<!doctype html>
<html lang="ru-RU"  xmlns="//www.w3.org/1999/xhtml"
                    xmlns:og="//ogp.me/ns#"
                    xmlns:fb="//www.facebook.com/2008/fbml">
  <head prefix="og: http://ogp.me/ns#
                fb: http://ogp.me/ns/fb#
                article: http://ogp.me/ns/article#">
    <meta charset="UTF-8">
    <meta http-equiv = "X-UA-Compatible" content="IE=edge;chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <meta name="msapplication-TileColor" content="#ffffff"/>
    <meta name="msapplication-TileImage" content="http://frontender.info/img/fr.png"/>

    <meta property="fb:app_id" content="302140436578036"/>
    <meta property="fb:admins" content="100002475344806"/>

    <meta property="og:type"                  content="article"/>
    <meta property="og:url"                   content="http://frontender.info/grunt-is-not-weird-and-hard/"/>
    <meta property="og:site_name"             content="Frontender Magazine">
    <meta property="og:image"                 content="http://frontender.info/img/frsqr.png"/>
    <meta property="og:title"                 content="Grunt для тех, кто считает штуки вроде него странными и сложными"/>
    <meta property="og:description"
          content="Крис Койер (Chris Coyier) в своей статье пошагово объясняет принцип работы с утилитой Grunt. Установка без подводных камней, начало использования, а также, улучшение и автоматизация процесса разработки при помощи Grunt, и какие реальные преимущества из этого всего можно извлечь. И, самое главное, почему не стоит бояться его использовать."/>
    <meta property="article:published_time"   content="2013-12-24">
    
    

    <meta name="description" content="Крис Койер (Chris Coyier) в своей статье пошагово объясняет принцип работы с утилитой Grunt. Установка без подводных камней, начало использования, а также, улучшение и автоматизация процесса разработки при помощи Grunt, и какие реальные преимущества из этого всего можно извлечь. И, самое главное, почему не стоит бояться его использовать.">

    <link rel="alternate" type="application/rss+xml" title="Frontender Magazine" href="http://feeds.frontender.info/FrontenderMagazine" />
    <link rel="alternate" type="application/atom+xml" title="Frontender Magazine | Полнотекстовый" href="http://feeds.frontender.info/FrontenderMagazineArticles" />
    <link rel="alternate" type="application/rss+xml" title="Frontender Magazine | Куча" href="http://feeds.frontender.info/FrontenderMagazineHEAP" />

    <link rel="shortcut icon" type="image/ico" href="//frontender.info/favicon.ico"/>
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="//frontender.info/apple-touch-icon-144x144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="//frontender.info/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="//frontender.info/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="//frontender.info/apple-touch-icon-precomposed.png">


    <link rel="stylesheet" href="/css/common.css">

    <title>Grunt для тех, кто считает штуки вроде него странными и сложными | Frontender Magazine</title>
  </head>
  <body>
    <div id="fb-root"></div>
    <header class="columns-59">
      <a href="http://frontender.info/">
       <h1 class="logotype">Frontender Magazine</h1>
      </a>
      <nav class="social">
        <a href="http://twitter.com/frontenderinfo" title="Подпишитесь на твиттер" class="twitter icon-twitter">@frontenderinfo</a>
        <a href="https://github.com/FrontenderMagazine/" title="Мы на гитхабе" class="github icon-github">GitHub</a>
        <a href="http://feeds.frontender.info/FrontenderMagazineArticles/" title="Читайте наш RSS" class="rss icon-rss">rss-канал</a>
      </nav>
    </header>
    <article class="columns-59 content">
      
<h1 id="gruntdlyatehktoschitaetshtukivrodenegostrannmiislozhnmi"><a href="#gruntdlyatehktoschitaetshtukivrodenegostrannmiislozhnmi">Grunt для тех, кто считает штуки вроде него странными и сложными</a></h1>

<p>Фронтенд-разработчикам часто советуют делать следующие вещи:</p>

<ul>
<li>
<strong>Работать с маленькими кусками CSS и JavaScript кода</strong>, 
насколько это имеет смысл, а затем объединять их для продакшена.</li>
<li>
<strong>Сжимать CSS и минифицировать JavaScript</strong> с целью сделать файлы для
продакшена как можно меньше по размеру.</li>
<li>
<strong>Оптимизировать изображения</strong>, чтобы уменьшить размеры файлов без потерь в
качестве.</li>
<li>
<strong>Использовать Sass</strong> для написания CSS из-за всех полезных абстракций,
которые он позволяет использовать.</li>
</ul>
<p>Конечно, этот список далеко не полон, но это такие вещи, которые делать просто необходимо.
Вы могли бы смело назвать эти советы <em>задачами</em>.</p>

<p>Бьюсь об заклад, вы наверняка уже что-то слышали про <a href="http://gruntjs.com/">Grunt</a>. 
Что ж, Grunt — это, по сути, <em>планировщик задач</em>. 
Grunt может делать все эти задачи за вас. Стоит лишь
установить его, что, кстати, не так уж и сложно, и эти операции будут 
происходить автоматически, так, что вам про них даже не придётся вспоминать.</p>

<p>Но, давайте посмотрим правде в глаза. 
Grunt — одна из тех новомодных штук, которой пользуются все эти крутые парни, 
но которая на первый взгляд выглядит странно и пугающе. Я вас понимаю. 
И эта статья для вас.</p>

<h2 id="presekaemzabluzhdeniyavzarodshe"><a href="#presekaemzabluzhdeniyavzarodshe">Пресекаем заблуждения в зародыше</a></h2>

<p>Возможно, вы <em>слышали</em> про Grunt, но, по какой-то причине, никогда с ним 
не работали. Я уверен, это предположение относится к большинству из вас. 
Я также уверен, что большинство ваших сомнений перечислены ниже.</p>

<h3 id="mnenenuzhnotochtodelaetgrunt"><a href="#mnenenuzhnotochtodelaetgrunt">Мне не нужно то, что делает Grunt</a></h3>

<p>Возможно, так оно и есть. Проверьте-ка ещё раз тот список задач в начале статьи. 
Эти рекомендации не просто неплохо было бы выполнять. Они — жизненно важная 
часть процесса веб–разработки в наше время. Если вы их уже соблюдаете, 
это замечательно. Вероятно, вы используете для этого разнообразные утилиты. 
Grunt помогает собрать их все, так сказать, под одной крышей. А если вы их ещё 
не используете, то, возможно, стоило бы, и тут вам может помочь Grunt. 
Ну а потом, когда вы уже будете их использовать, Grunt может сделать для вас 
ещё большее, что, в конечном итоге, будет означать, что вы лучше делаете 
свою работу.</p>

<h3 id="gruntrabotaetnanodejsayaegoneznayu"><a href="#gruntrabotaetnanodejsayaegoneznayu">Grunt работает на Node.js, а я его не знаю</a></h3>

<p>Вам и не надо знать Node. Точно так же, как вам не нужно знать Ruby, чтобы
пользоваться Sass. Или PHP, чтобы пользоваться WordPress. Или C++, чтобы
пользоваться Microsoft Word.</p>

<h3 id="veshtikotoredelaetgruntyaitakmogusdelatypodrugomu"><a href="#veshtikotoredelaetgruntyaitakmogusdelatypodrugomu">Вещи, которые делает Grunt, я и так могу сделать, по-другому</a></h3>

<p>Правда? Они все собраны в одном месте, настроены так, что запускаются 
автоматически, когда понадобятся, и есть у каждого члена команды, который 
работает над проектом? Рискну предположить, что это не так.</p>

<h3 id="gruntkonsolynayaprogrammaayavsegolishydizayner"><a href="#gruntkonsolynayaprogrammaayavsegolishydizayner">Grunt — консольная программа, а я всего лишь дизайнер</a></h3>

<p>Я тоже дизайнер. И я предпочитаю использовать в работе приложения с графическим 
интерфейсом, если, конечно, он существует. Но я не думаю, что у Grunt<a href="#note-1" id="ref-1" class="reference">1</a> такой 
интерфейс появится в ближайшее время.</p>

<p>Степень, в которой придётся работать с командной строкой, примерно такая:</p>

<ol>
<li>Перейти в папку с проектом.</li>
<li>Напечатать <code>grunt</code> и нажать <strong>Return</strong>.</li>
</ol>
<p>После установки, которая, повторюсь, не такая уж и сложная.</p>

<h2 id="horoshoustanavlivaemgrunt"><a href="#horoshoustanavlivaemgrunt">Хорошо. Устанавливаем Grunt</a></h2>

<p>Необходимое условие для установки Grunt - наличие Node.js. Если Node.js у Вас
не установлен, не беспокойтесь, это очень легко. вы просто скачиваете
установочный файл и запускаете его. Давайте, просто кликните по большой кнопке 
<strong>Install</strong> <a href="http://nodejs.org/">на сайте Node.js</a>.</p>

<p>Сам Grunt устанавливается на каждый проект отдельно. Вам нужно зайти в папку 
проекта и создать небольшой файл под названием <em>package.json</em> в его корне.</p>

<p><img src="img/package-json-file.gif" alt="package.json в корне проекта"></p>

<p>Содержимое файла package.json должно быть таким:</p>

<pre><code>{
  "name": "example-project",
  "version": "0.1.0",
  "devDependencies": {
    "grunt": "~0.4.1"
  }
}
</code></pre>

<p>Измените название проекта и укажите актуальную версию, главное, 
объявление <code>devDependencies</code> должно остаться таким же, как есть.</p>

<p>Это то, как Node обозначает зависимости в проекте. В Node для этого 
есть специальный пакетный менеджер под названием <a href="https://npmjs.org/">NPM</a>.</p>

<p>Как только <em>package.json</em> будет находиться в нужном вам месте, откройте терминал, 
и перейдите в папку проекта. Парни вроде меня, которые мало смыслят в терминале, 
делают это примерно так:</p>

<p><img src="img/drag-folder.gif" alt="Колхозный способ смены папки в терминале"></p>

<p>Далее запустите команду:</p>

<pre><code>npm install
</code></pre>

<p>После того, как она будет выполнена, в проекте появится новая папка с именем 
<em>node_modules</em>.</p>

<p><img src="img/node_modules.gif" alt="Пример папки node_modules"></p>

<p>Другие файлы, которые вы видите на анимации в корне моего проекта, 
<em>README.md</em> и <em>LICENSE</em>, находятся там только потому, что я собираюсь выложить 
этот проект <a href="https://github.com/chriscoyier/My-Grunt-Boilerplate">на Github</a>, они не относятся непосредственно к установке Grunt.</p>

<p>Последний шаг — установка Grunt CLI (command line interface, интерфейс командной 
строки). Это то, что заставит терминал обрабатывать команду <code>grunt</code>. Без неё 
запуск <code>grunt</code> вернёт ошибку «Command Not Found» («Команда или файл не найдена»). 
Она устанавливается отдельно по причинам эффективности. Иначе, если бы у вас был 
десяток проектов, пришлось бы устанавливать десять копий GruntCLI.</p>

<p>Установка GruntCLI — всего одна строчка в терминале. Просто запустите команду:</p>

<pre><code>npm install -g grunt-cli
</code></pre>

<p>После этого следует закрыть и заново открыть окно терминала. Это вообще хороший
подход для того, чтобы убедиться, что всё работает как надо. Типа как 
перезагрузить компьютер после установки новой программы в старые добрые времена.</p>

<h2 id="davaytezastavimgruntobaedinityparufaylov"><a href="#davaytezastavimgruntobaedinityparufaylov">Давайте заставим Grunt объединить пару файлов</a></h2>

<p>Представим, что в нашем проекте есть три отдельных файла JavaScript:</p>

<ol>
<li>
<strong><em>jquery.js</em></strong> — библиотека, которую мы используем.</li>
<li>
<strong><em>carousel.js</em></strong> — плагин для jQuery, который мы используем.</li>
<li>
<strong><em>global.js</em></strong> — написанный нами файл, где мы настраиваем и
вызываем наш плагин.</li>
</ol>
<p>На продакшене нам надо объединить все эти файлы в один, для улучшения
производительности (один http-запрос лучше, чем три). Нам нужно сказать Grunt, 
чтобы он это сделал для нас.</p>

<p>Но постойте, Grunt на самом деле ничего сам по себе не делает. 
Вы же помните, что Grunt — это всего лишь утилита для <em>выполнения</em> задач. 
А сами задачи нам придётся добавить. Пока что мы ещё не настраивали Grunt, 
чтобы он что-либо делал, поэтому давайте этим займёмся.</p>

<p>Официальный плагин Grunt для объединения файлов — <a href="https://github.com/gruntjs/grunt-contrib-concat">grunt-contrib-concat</a></p>

<pre><code>npm install grunt-contrib-concat --save-dev
</code></pre>

<p>Приятная особенность такого способа установки в том, что файл конфигурации 
<em>package.json</em> будет автоматически обновлён, и в него пропишется новая 
зависимость. Откройте его и убедитесь. Там появится новая строка:</p>

<pre><code>"grunt-contrib-concat": "~0.3.0"
</code></pre>

<p>Вот теперь мы готовы использовать этот плагин. А чтобы его использовать, нам
нужно начать настраивать Grunt и объяснять ему, что делать.</p>

<p>Указать Grunt, что ему делать, можно при помощи конфигурационного файла с
названием <em>Gruntfile.js</em><a href="#note-2" id="ref-2" class="reference">2</a>.</p>

<p>Точно так же, как и у файла <em>package.json</em>, у <em>Gruntfile.js</em> есть свой формат, 
которого нужно придерживаться. Я бы не стал заморачиваться по поводу того, 
что значит в нём каждое слово. Просто посмотрите на этот пример:</p>

<pre><code>module.exports = function(grunt) {

    // 1. Вся настройка находится здесь
    grunt.initConfig({
        pkg: grunt.file.readJSON('package.json'),

        concat: {
            // 2. Настройка для объединения файлов находится тут
        }

    });

    // 3. Тут мы указываем Grunt, что хотим использовать этот плагин
    grunt.loadNpmTasks('grunt-contrib-concat');

    // 4. Указываем, какие задачи выполняются, когда мы вводим «grunt» в терминале
    grunt.registerTask('default', ['concat']);

};
</code></pre>

<p>Теперь нам нужно создать конфигурационный файл. Документация может быть
ошеломляющей. Давайте сосредоточимся на простеньком <a href="https://github.com/gruntjs/grunt-contrib-concat#usage-examples">примере</a>.</p>

<p>Помните, у нас есть три файла JavaScript, которые мы пытаемся объединить. Мы
перечислим пути к ним в <code>src</code> в качестве массива с путями к файлам (как строки
в кавычках), и затем мы укажем файл назначения как <code>dest</code>. Файл назначения не
обязательно должен существовать на данном этапе. Он будет создан в процессе, 
когда будет запущена соответствующая задача, которая склеит все файлы в один.</p>

<p>И <em>jquery.js</em>, и <em>carousel.js</em> являются библиотеками. Мы, скорее всего, не
будем их изменять. И, для порядка в проекте, поместим их в отдельной папке 
<em>/js/libs/</em>. Файл <em>global.js</em> — то место, где мы пишем наш собственный код, 
поэтому он будет находиться прямо в корне папки <em>/js/</em>. Теперь нужно объяснить 
Grunt, как найти все эти файлы и склеить их в один файл <em>production.js</em>, 
названный так, чтобы показать, что он будет использоваться уже на настоящем, 
живом сайте.</p>

<pre><code>concat: {
    dist: {
        src: [
            'js/libs/*.js', // Все JS в папке libs
            'js/global.js'  // Конкретный файл
        ],
        dest: 'js/build/production.js',
    }
}
</code></pre>

<p><strong>Примечание:</strong> далее в этой статье будут приводиться такие же небольшие кусочки 
конфигурационного кода, как этот. 
Их цель — обратить внимание на важные места, однако, поначалу вы можете 
не понять, как каждый кусок будет интегрирован в большой файл.
Если вы запутаетесь, и вам нужно будет посмотреть на эти примеры в контексте, 
просмотрите готовый <a href="https://github.com/chriscoyier/My-Grunt-Boilerplate/blob/master/Gruntfile.js">полный файл конфигурации</a>.</p>

<p>Когда конфигурация <code>concat</code> окажется на своем месте, откройте терминал и
запустите команду:</p>

<pre><code>grunt
</code></pre>

<p>И, смотрите, что происходит! Создан файл <em>production.js</em>, который является 
превосходным объединением трёх файлов. Лично для меня это был такой момент 
«Ух ты!». Незабываемое ощущение могущества, текущего в моих венах. 
Давайте наклепаем побольше таких штук!</p>

<h2 id="ateperyzastavimgruntminifitsirovatynashjavascript"><a href="#ateperyzastavimgruntminifitsirovatynashjavascript">А теперь заставим Grunt минифицировать наш JavaScript</a></h2>

<p>Мы проделали столько дел для подготовки на предыдущих этапах, так что добавить 
ещё одну задачу для Grunt теперь относительно легко. 
Вот всё, что нужно сделать:</p>

<ol>
<li>Найти плагин для Grunt, который делает то, что нам нужно;</li>
<li>Изучить стиль конфигурации этого плагина;</li>
<li>Написать конфигурацию в соответствии с нашим проектом.</li>
</ol>
<p>Необходимый нам плагин для минификации кода — <a href="https://github.com/gruntjs/grunt-contrib-uglify">grunt-contrib-uglify</a>. Точно 
так же, как и в прошлый раз, мы запускаем команду <code>npm</code> для его инсталяции.</p>

<pre><code>npm install grunt-contrib-uglify --save-dev
</code></pre>

<p>Затем меняем содержимое файла <em>Gruntfile.js</em>, для загрузки плагина:</p>

<pre><code>grunt.loadNpmTasks('grunt-contrib-uglify');
</code></pre>

<p>И после этого конфигурируем его:</p>

<pre><code>uglify: {
    build: {
        src: 'js/build/production.js',
        dest: 'js/build/production.min.js'
    }
}
</code></pre>

<p>Теперь обновим задачу по умолчанию (<code>default</code>), чтобы она запускала ещё и минификацию:</p>

<pre><code>grunt.registerTask('default', ['concat', 'uglify']);
</code></pre>

<p>Очень-очень похоже на то, как настраивалось объединение файлов, верно?</p>

<p>Запускаем команду <code>grunt</code> в терминале и получаем на выходе немного 
изысканного, минифицированного JavaScript кода:</p>

<p><img src="img/uglify-code.gif" alt="Minified JavaScript"></p>

<p>Тот самый файл, <em>production.min.js</em>, который мы будем подключать в
<em>index.html</em>.</p>

<h2 id="nastraivaemgruntnaoptimizatsiyunashihizobrazheniy"><a href="#nastraivaemgruntnaoptimizatsiyunashihizobrazheniy">Настраиваем Grunt на оптимизацию наших изображений</a></h2>

<p>Теперь, когда вы уже освоили процесс, нужно лишь ещё раз пройти его по шагам.
Нужный нам плагин Grunt для оптимизации изображений — <a href="https://github.com/gruntjs/grunt-contrib-imagemin">grunt-contrib-imagemin</a>. 
Установим его:</p>

<pre><code>npm install grunt-contrib-imagemin --save-dev
</code></pre>

<p>Зарегистрируем в <em>Gruntfile.js</em>:</p>

<pre><code>grunt.loadNpmTasks('grunt-contrib-imagemin');
</code></pre>

<p>Настроим:</p>

<pre><code>imagemin: {
    dynamic: {
        files: [{
            expand: true,
            cwd: 'images/',
            src: ['**/*.{png,jpg,gif}'],
            dest: 'images/build/'
        }]
    }
}
</code></pre>

<p>Убедимся, что он запускается:</p>

<pre><code>grunt.registerTask('default', ['concat', 'uglify', 'imagemin']);
</code></pre>

<p>Запускаем <code>grunt</code> и наблюдаем великолепное сжатие изображений:</p>

<p><img src="img/squished-images.gif" alt="Минифицированные изображения"></p>

<p>Вам должно быть по душе то, как увеличивается производительность проекта 
практически без усилий.</p>

<h2 id="proyavimnemnogosoobrazitelynostiiavtomatiziruemprotsess"><a href="#proyavimnemnogosoobrazitelynostiiavtomatiziruemprotsess">Проявим немного сообразительности и автоматизируем процесс</a></h2>

<p>То, что мы уже сделали, само по себе невероятно круто и очень полезно. 
Но, кое где можно сделать еще лучше, и тем самым облегчить и улучшить процесс 
сборки, как для себя, так и для Grunt.</p>

<ol>
<li>Запускать наши задачи по необходимости автоматически;</li>
<li>Запускать только те задачи, которые нужны в данный момент.</li>
</ol>
<p>Например:</p>

<ol>
<li>Объединять и минифицировать код JavaScript, когда он изменился;</li>
<li>Оптимизировать изображения, если добавилось новое, или обновилось уже 
добавленное в проект.</li>
</ol>
<p>Добиться этого очень легко, надо лишь отслеживать изменения в файлах проекта. 
Мы можем попросить Grunt приглядывать за файлами, и, если произошли изменения, 
запускать определённые задачи. Отслеживание производится при помощи 
плагина <a href="https://github.com/gruntjs/grunt-contrib-watch">grunt-contrib-watch</a>.</p>

<p>Я позволю вам установить его самостоятельно. Установка этого плагина ничем 
не отличается от предыдущих. Настроим его, указав в свойстве <code>watch</code> конкретные 
файлы (или папки, или и то и другое), за которыми нужно следить. Под 
отслеживанием файлов я подразумеваю наблюдение за их изменением, удалением 
и добавлением. Затем мы указываем, какие задачи необходимо запустить, если 
такое изменение произошло.</p>

<p>Проще говоря, сейчас мы бы хотели, чтобы при наличии изменений в папке <em>/js/</em> 
запускались процессы по объединению и минификации файлов. Или, другими словами, 
когда это случится, нам нужно, что бы Grunt запустил тип задач, связанных с 
JavaScript. Но, если что-нибудь произойдёт в другом месте, нам, наоборот, 
<em>не</em> нужно запускать эти задачи, потому как они будут бесполезны. 
Итак:</p>

<pre><code>watch: {
    scripts: {
        files: ['js/*.js'],
        tasks: ['concat', 'uglify'],
        options: {
            spawn: false,
        },
    }
}
</code></pre>

<p>Пока все довольно просто, да? Единственная, немного странная опция — 
это <code>spawn</code>. И знаете, что? Я понятия не имею, что она обозначает. Из 
документации я лишь понял, что, по хорошему, её лучше не менять из значения 
по умолчанию. Ну, мы разрабатываем в реальном мире. Просто не трогайте эту 
настройку, пока всё работает, а если что-то пошло не так, принимайтесь 
за чтение мануала.</p>

<p><strong>Примечание:</strong> Грустно, когда что-то так просто выглядит в учебнике, но у вас 
по какой-то загадочной причине не работает, правда? Если вы не можете заставить 
Grunt работать после каких-то изменений, то, скорее всего, причина в 
синтаксической ошибке в файле <em>Gruntfile.js</em>. В терминале это выглядит 
примерно так:</p>

<p><img src="img/error-running-grunt.gif" alt="Ошибка при запуске Grunt"></p>

<p>Обычно, Grunt неплохо объясняет, что именно пошло не так, так что не забывайте 
проверять сообщения об ошибках. В моем случае произошла ошибка синтаксиса, 
меня подвела пропущенная запятая. Нужно её добавить, и всё снова заработает.</p>

<h2 id="zastavimgruntrabotatysnashimpreprotsessorom"><a href="#zastavimgruntrabotatysnashimpreprotsessorom">Заставим Grunt работать с нашим препроцессором</a></h2>

<p>Последний пункт нашего списка в начале статьи — использование Sass. И вновь,
Grunt отлично подходит для этой задачи. Но, спросите вы, как же так? 
Разве Sass работает не на Ruby? Да, это действительно так. Правда, есть 
<a href="https://github.com/sindresorhus/grunt-sass">версия Sass, работающая на Node</a>, но, она не добавляет в проект 
дополнительные зависимости, да и не такая свежая по сравнению с версией на Ruby. 
Так что мы будем использовать официальный плагин <a href="https://github.com/gruntjs/grunt-contrib-sass">grunt-contrib-sass</a>, 
который просто считает, что Sass уже установлен на вашей машине. Если это не так, 
<a href="http://sass-lang.com/install">изучите инструкцию по установке Saas из командной строки</a>.</p>

<p>Действительно крутая фишка Sass в том, что он самостоятельно производит 
объединение и минификацию файлов. Так что в нашем маленьком проекте достаточно 
просто скомпилировать наш основной файл <em>global.scss</em>:</p>

<pre><code>sass: {
    dist: {
        options: {
            style: 'compressed'
        },
        files: {
            'css/build/global.css': 'css/global.scss'
        }
    }
}
</code></pre>

<p>И, конечно, нам бы не хотелось запускать эту задачу вручную. 
У нас ведь уже есть плагин для отслеживания изменений, так что давайте его 
используем! В конфигурации <code>watch</code> добавим ещё одну подзадачу:</p>

<pre><code>css: {
    files: ['css/*.scss'],
    tasks: ['sass'],
    options: {
        spawn: false,
    }
}
</code></pre>

<p>Готово. И теперь, всякий раз, когда мы вносим изменения в Sass файлы, исходящий 
CSS файл будет автоматически обновляться.</p>

<p>Давайте пойдём немного дальше, это определённо того стоит, и добавим поддержку LiveReload.
С LiveReload вам больше не придётся переключаться в окно браузера и обновлять
страницу. Страница будет обновляться автоматически, а в случае CSS, новые стили
будут внедряться в страницу также, без перезагрузки. Особенно полезно для тех 
сайтов, отображение которых зависит от различного состояния страниц.</p>

<p>Это очень легко устроить, потому как LiveReload уже включён в плагин watch.
Всё, что нам надо сделать:</p>

<ol>
<li>Установить <a href="http://feedback.livereload.com/knowledgebase/articles/86242-how-do-i-install-and-use-the-browser-extensions-">плагин для браузера</a>;</li>
<li><p>Добавить пару строк в настройки <code>watch</code>:
    watch: {
        options: {
            livereload: true,
        },
        scripts: {
        /* и т.д. */</p></li>
<li><p>Перезапустить браузер и щёлкнуть на иконку LiveReload, чтобы включить его;</p></li>
<li>Отредактировать файл Sass и увидеть, как изменения появляются на странице
без перезагрузки.</li>
</ol>
<p><img src="img/style-injection.gif" alt="Страница обновляется на лету"></p>

<p>Загляденье.</p>

<h3 id="predpochitaetevideo"><a href="#predpochitaetevideo">Предпочитаете видео?</a></h3>

<p>Если вы лучше воспринимаете информацию в формате видеоуроков, то, специально 
для вас я подготовил небольшой скринкаст, отлично дополняющий эту статью. 
Он опубликован на CSS-Tricks: <a href="http://css-tricks.com/video-screencasts/130-first-moments-grunt/">First Moments with Grunt</a></p>

<h2 id="poluchaemlevelup"><a href="#poluchaemlevelup">Получаем level-up</a></h2>

<p>Можете представить, какое море улучшений для вашего рабочего процесса вам 
теперь доступно? Наверняка, это станет <a href="http://www.smashingmagazine.com/2013/06/11/front-end-ops/">должностью на полный рабочий день</a> 
в некоторых организациях.</p>

<p>Какие-нибудь заумные приверженцы DevOps могут смотреть свысока на нашу
простую конфигурацию. Но я бы посоветовал им умерить пыл. Даже то, что мы
сделали уже сейчас чрезвычайно значимый шаг. И не забывайте, что это всё 
бесплатно, с открытыми исходниками, и это поразительно.</p>

<p>Вы можете получить настоящий level-up, используя следующие полезные задачи Grunt:</p>

<ul>
<li>Обработка CSS <a href="http://css-tricks.com/autoprefixer/">Автопрефиксером</a> (Пятёрка с плюсом, рекомендую)
вместо аддонов препроцессора.</li>
<li>Написание и запуск юнит-тестов JavaScript (например, <a href="https://github.com/pivotal/jasmine">Jasmine</a>).</li>
<li>Создание спрайтов и иконок SVG автоматически (например, <a href="https://github.com/filamentgroup/grunticon">Grunticon</a>).</li>
<li>Запуск сервера, чтобы вы смогли подключать на страницу ресурсы с нужными
путями и использовать сервисы, требующие настоящие URL, вроде TypeKit и
подобного, без использования других похожих утилиты, вроде MAMP.</li>
<li>Поиск проблем в коде при помощи <a href="http://philipwalton.com/articles/introducing-html-inspector/">HTML-Inspector</a>, <a href="http://csslint.net/">CSS Lint</a>, или
<a href="http://www.jshint.com/">JS Hint</a>.</li>
<li>Помощь в работе с репозиториями систем контроля версий, таких, например, как GitHub.</li>
<li>Добавление номеров версий в имена файлов ваших ресурсов (проталкивание
кэша).</li>
<li>Помощь в сборке на стейджинге или продакшене (например, <a href="http://leanmeanfightingmachine.github.io/dploy/">DPLOY</a>).</li>
</ul>
<p>А также вы можете прокачаться ещё больше, просто поняв принцип работы самого Grunt:</p>

<ul>
<li>Прочитайте <a href="http://www.integralist.co.uk/Grunt-Boilerplate.html">Grunt Boilerplate</a> авторства Mark McDonnell.</li>
<li>Прочитайте <a href="http://blog.ponyfoo.com/2013/11/13/grunt-tips-and-tricks">Grunt Tips and Tricks</a> авторства Nicolas Bevacqua.</li>
<li>Организуйте ваш <em>Gruntfile.js</em>, <a href="https://github.com/cowboy/wesbos/commit/5a2980a7818957cbaeedcd7552af9ce54e05e3fb">разбив его на меньшие файлы</a>.</li>
<li>Изучите <em>Gruntfile.js</em> написанные другими людьми и на других проектах.</li>
<li>Узнайте больше про Grunt, покопайтесь в исходниках, изучите <a href="http://gruntjs.com/api/grunt">API</a>.</li>
</ul>
<h2 id="delimsyaznaniyami"><a href="#delimsyaznaniyami">Делимся знаниями</a></h2>

<p>Я думаю, в завершении этой темы было бы неплохо организовать обмен знаниями 
между заинтересованными сторонами. Если вы установили Grunt в первый раз 
(или хорошо помните, как это делали), будьте особенно внимательны к неприятным 
мелочам, которые вы испытали и превозмогли. Это — те мелочи, которыми следует 
поделиться тут, в комментариях. Так мы сделаем из этой статьи полезный ресурс, 
помогающий преодолеть эти неприятные моменты без смущения. Мы все, вместе, 
занимаемся этой штукой!</p>

<hr>
<h3 id="primechaniya"><a href="#primechaniya">Примечания</a></h3>

<p><a href="#ref-1" id="note-1" class="note">1.</a> Может быть, кто-нибудь когда-нибудь сделает красивый UI под
Grunt для вашей операционной системы. Но я до конца не уверен, что этот день наступит.
Конфигурация плагинов — это важный атрибут использования Grunt. Каждый плагин
немного отличается от остальных, в зависимости от того, что он делает. 
Это означает уникальный интерфейс для каждого отдельного плагина, и его воплощение — довольно рискованное занятие.</p>

<p>Возможно, неплохим компромиссом станет плагин <a href="https://github.com/vladikoff/grunt-devtools">Grunt DevTools</a> для Chrome.</p>

<p><a href="#ref-2" id="note-2" class="note">2.</a> <em>Gruntfile.js</em> в документации и примерах часто называется
<em>Gruntfile</em>. Не называйте этот файл буквально, <em>Gruntfile</em>, он не заработает.</p>

      <section class="prose-editor">
<p>Если вы заметили ошибку, вы всегда можете <a class="prose-edit" href="http://prose.io/#FrontenderMagazine/grunt-is-not-weird-and-hard/edit/master/rus.md">отредактировать статью</a>, <a href="https://github.com/FrontenderMagazine/grunt-is-not-weird-and-hard/issues/new">создать issue</a> или просто написать об этом Антону Немцеву в skype <a href="skype:ravencry?chat">ravencry</a>.</p>
</section>
    </article>
        <nav class="article-source columns-29">
      <h3>Оригинальная статья:</h3>
      <a href="http://24ways.org/2013/grunt-is-not-weird-and-hard/">Grunt for People Who Think Things Like Grunt are Weird and Hard</a>
    </nav>
    <nav class="article-social columns-29">
      <h3>Поделиться в:</h3>
      <a class="icon-twitter-sign" href="http://twitter.com/intent/tweet?url=http://frontender.info/grunt-is-not-weird-and-hard/&amp;text=Grunt для тех, кто считает штуки вроде него странными и сложными&amp;via=frontenderinfo" class="tw">Twitter</a>
      <a class="icon-facebook-sign" href="http://www.facebook.com/sharer.php?u=http://frontender.info/grunt-is-not-weird-and-hard/&amp;t=Grunt для тех, кто считает штуки вроде него странными и сложными">Facebook</a>
      <a class="icon-google-plus-sign" href="https://plus.google.com/share?url=http://frontender.info/grunt-is-not-weird-and-hard/">Google+</a>
    </nav>
    <section class="users">
      <section class="user columns-29">
  <a href="http://chriscoyier.net/"><img class="avatar" src="https://secure.gravatar.com/avatar/8081b26e05bb4354f7d65ffc34cbbd67?s=160" alt="Chris Coyier"></a>
  <div class="details">
    <dl>
      <dt>Автор:</dt>
      <dd><a href="http://chriscoyier.net/">Chris Coyier</a></dd>
    </dl>
              <dl>
            <dt>Twitter:</dt>
            <dd><a href="http://twitter.com/chriscoyier">@chriscoyier</a></dd>
          </dl>          <dl>
            <dt>GitHub:</dt>
            <dd><a href="http://github.com/chriscoyier">chriscoyier</a></dd>
          </dl>          <dl>
            <dt>Сaйт:</dt>
            <dd><a href="http://chriscoyier.net/">http://chriscoyier.net/</a></dd>
          </dl>          <dl>
            <dt>Email:</dt>
            <dd><a href="mailto:chriscoyier@gmail.com">chriscoyier@gmail.com</a></dd>
          </dl>
  </div>
</section><section class="user columns-29">
  <a href="http://github.com/subzey"><img class="avatar" src="//gravatar.com/avatar/ac8a5e8739b75bda6567a4630b91dd82?s=160" alt="Антон Хлыновский"></a>
  <div class="details">
    <dl>
      <dt>Переводчик:</dt>
      <dd><a href="http://github.com/subzey">Антон Хлыновский</a></dd>
    </dl>
              <dl>
            <dt>GitHub:</dt>
            <dd><a href="https://github.com/subzey">subzey</a></dd>
          </dl>          <dl>
            <dt>Twitter:</dt>
            <dd><a href="http://twitter.com/subzey">@subzey</a></dd>
          </dl>
  </div>
</section>
    </section>
    <nav class='editor-block'>Статью вычитывали: <a href='https://twitter.com/konstantinkosmo'>Константин Гупалов</a>, <a href='https://twitter.com/silentimp'>Антон Немцев</a>, <a href='http://iamstarkov.com'>Vladimir Starkov</a>.</nav>
    
    <section class="comments" id="comments">
      <h3>Комментарии <b>(36 комментариев, если быть точным)</b></h3>      <article class="comment" data-issue="1" data-comment="31169157">
        <a class="user" href="https://github.com/iamstarkov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/559321?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/iamstarkov">iamstarkov</a><time datetime="2013-12-24T11:55:27Z">24 декабря 2013 года в 11:55</time>
          <div class="body">
          <p>Жалко, что этой статьи не было несколько месяцев назад</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31268659">
        <a class="user" href="https://github.com/ghost">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/10137?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/ghost">ghost</a><time datetime="2013-12-27T16:17:15Z">27 декабря 2013 года в 16:17</time>
          <div class="body">
          <p>У вас опечатка в статье. После выполнения команды grunt-contrib-concat в package.json будет добавлена зависимость именно для grunt-contrib-concat, а не для grunt-contrib-uglify</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31269361">
        <a class="user" href="https://github.com/prBigBrother">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/3617478?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/prBigBrother">prBigBrother</a><time datetime="2013-12-27T16:35:23Z">27 декабря 2013 года в 16:35</time>
          <div class="body">
          <p>Я, конечно же, понимаю, это все гибко и работает с помощью пару строк.</p>

<p>Но: в разработке обычно использую CodeKit. Он выполняет все требуемые пункты статьи, описанные выше (Единственного чего нет, это оптимизации изображения, но раньше я не обращал внимание на необходимость данного).</p>

<p>Процесс добавлении проекта в CodeKit состоит из пункта перенести в папку в окно программы. Конечно же, желательно ознакомиться с настройками программы при первом использовании и настроить под себя. В дальнейшем, вряд ли появится нужда изменять настройки, так как можно один раз настроить так, как тебе удобно.</p>

<p>Процесс c Grunt'ом требует куда более затрат по времени, со всеми нуждами прописывать команды, создавать тот же package.json.</p>

<p>То есть, мне для того что бы компилировать Less в CSS (c проверкой на ошибки), минифицировать JS (с проверкой на ошибки), и паковать это все нормально, плюс все плюшечки типа компилирования на лету и лайв релоуда, достаточно добавить папку с проектом в CodeKit.</p>

<p>Надеюсь был полезным ;)</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31269514">
        <a class="user" href="https://github.com/prBigBrother">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/3617478?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/prBigBrother">prBigBrother</a><time datetime="2013-12-27T16:38:57Z">27 декабря 2013 года в 16:38</time>
          <div class="body">
          <p>П.С. понимаю, что Codekit бесплатен в отличии Grunt'а, понимаю что много могу не знать о Grunt'е. Оперирую только на теми фактами, что раскрыли в статье.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31270694">
        <a class="user" href="https://github.com/iamstarkov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/559321?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/iamstarkov">iamstarkov</a><time datetime="2013-12-27T17:07:25Z">27 декабря 2013 года в 17:07</time>
          <div class="body">
          <p>@prBigBrother, каждый волен выбирать то, что ему удобно.</p>

<p>из описанного вами про CodeKit я всё ещё продолжаю видеть у Grunt плюсы, так как:</p>

<ul>
<li>грант кроссплатформен</li>
<li>грант-воркфлоу легко поделиться, лишь предложив людям выполнить <code>grunt test</code> для прогонки тестов, а не  описывать как настроить кодкит-окружение</li>
<li>больше двух тысяч тасков на данный момент и появляется всё больше, а также можно всегда написать свой</li>
</ul>

<hr />

<blockquote>
  <p>что Codekit бесплатен в отличии Grunt'а</p>
</blockquote>

<p>вы точно ничего не путаете?</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31271527">
        <a class="user" href="https://github.com/iamstarkov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/559321?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/iamstarkov">iamstarkov</a><time datetime="2013-12-27T17:26:41Z">27 декабря 2013 года в 17:26</time>
          <div class="body">
          <p>@EugeneAbrosimov, спасибо вам! исправил.</p>

<p>Проблема была в том, что ошибка существовала в оригинале на момент начала перевод.</p>

<p>В следующий раз, можете не стесняться и сразу присылать пулл-реквесты с исправлением таких неточностей.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31274259">
        <a class="user" href="https://github.com/prBigBrother">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/3617478?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/prBigBrother">prBigBrother</a><time datetime="2013-12-27T18:34:14Z">27 декабря 2013 года в 18:34</time>
          <div class="body">
          <p>@matmuchrapna   вы меня почти убедили. Не подумайте, что я упираюсь в единственное решение в виде CodeKit, просто не нашел аргументов в статье, почему Grunt мне действительно заменит его.</p>

<blockquote>
  <p>что Codekit бесплатен в отличии Grunt'а
  вы точно ничего не путаете?</p>
</blockquote>

<p>Конечно же, я заметил опечатку изначально, не хотел плодить комментарии с исправлением.</p>

<p>Может у вас будет возможность раскрыть возможности Grunt'а чуть больше?</p>

<p>Опять же, останавливает меня только постоянная необходимости все настраивать с нуля на каждый проект. Может есть возможность обойти?</p>

<p>Опишу спектр своих задач: я разработчик кастомных тем под WP, у нас есть свое готовое тема-ядро. То есть, особенных задач, кроме как из LESS в CSS, из script.js в script.min.js + Autor Reload, в принципе и нет.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31274743">
        <a class="user" href="https://github.com/iamstarkov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/559321?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/iamstarkov">iamstarkov</a><time datetime="2013-12-27T18:46:58Z">27 декабря 2013 года в 18:46</time>
          <div class="body">
          <blockquote>
  <p>Конечно же, я заметил опечатку изначально, не хотел плодить комментарии с исправлением.</p>
</blockquote>

<p>можно было отредактировать <a href="https://github.com/FrontenderMagazine/grunt-is-not-weird-and-hard/issues/1#issuecomment-31269514">свой комментарий на гитхабе</a></p>

<hr />

<blockquote>
  <p>Может у вас будет возможность раскрыть возможности Grunt'а чуть больше?</p>
</blockquote>

<p>я не смогу «продать» вам грант не зная ваших потребностей.</p>

<hr />

<blockquote>
  <p>Опять же, останавливает меня только постоянная необходимости все настраивать с нуля на каждый проект. Может есть возможность обойти?</p>
</blockquote>

<p>Мне кажется, что грант-таски обеспечивают достаточную степень абстракции над проектами и позволяют реиспользовать себя. Если же у вас совсем похожие проекты, то на первых порах вы вполне себе можете копировать из проекта в проект файлы <em>package.json</em> (зависимости) и Gruntfile.js (таски для ваших проектов) а затем даже написать свой <a href="http://frontender.info/skaffolding-dlya-frontenderov/">скаффолдер</a>, например yeoman-генератор</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31292071">
        <a class="user" href="https://github.com/askd">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/1499345?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/askd">askd</a><time datetime="2013-12-28T07:18:18Z">28 декабря 2013 года в 7:18</time>
          <div class="body">
          <p>Тоже недавно открыла для себя grunt. Сейчас не представляю, как можно было разрабатывать без него.
По поводу экспириенса по установке и настройке... Оказалось проще, чем я думала, когда бралась за это.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31313258">
        <a class="user" href="https://github.com/raqystyle">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/1846484?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/raqystyle">raqystyle</a><time datetime="2013-12-29T08:08:57Z">29 декабря 2013 года в 8:08</time>
          <div class="body">
          <p>@prBigBrother а насколько гибкий в настройке CodeKit? насколько легко переконфигурировать его согласно требованиям, изминениям в команде, деплойментам и прочим? Возможно, если вы работаете один (фрилансер, например) то его вполне хватает. Но если вы работаете в гибкой команде где люди могут приходит и уходить каждые пол-года, а то и чаще, то лучше Grunt'a я пока ничего не встречал.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31327849">
        <a class="user" href="https://github.com/toydestroyer">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/578554?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/toydestroyer">toydestroyer</a><time datetime="2013-12-29T23:11:42Z">29 декабря 2013 года в 23:11</time>
          <div class="body">
          <p>Друзья, правильно понимаю, что в grunt-contrib-watch уже полностью включен LiveReload и по сути лицензия не нужна? (Я покупал GUI в AppStore).</p>

<p>Видимо, Grunt достаточно занятная штука, особенно порадовала оптимизация изображения. Но у меня вновь вопрос: почти все эти задачи решает Sprockets (почти все проекты делаю в Middleman), соотвенно Grunt всего лишь альтернатива?</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31342816">
        <a class="user" href="https://github.com/prBigBrother">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/3617478?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/prBigBrother">prBigBrother</a><time datetime="2013-12-30T11:55:53Z">30 декабря 2013 года в 11:55</time>
          <div class="body">
          <p>@raqystyle речь шла больше не о гибкости CodeKit и о безусловной альтернативе Grunt'у. Я говорил что с основными задачами он справляется.</p>

<p>Но сейчас, я понимаю что можно куда более автоматизировать благодаря Grunt'у то, о чем мне и в голову не приходило бы автоматизировать ранее, тем более то что недоступно CodeKit'у</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31367868">
        <a class="user" href="https://github.com/egamzin">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/2581304?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/egamzin">egamzin</a><time datetime="2013-12-30T20:49:25Z">30 декабря 2013 года в 20:49</time>
          <div class="body">
          <p>Кто-то может поделиться опытом использования Grunt в больших проектах?</p>

<p>Проект на .Net с огромным кол-вом уникальных страниц, на каждой подключается по 5-50 js-ов.
Планируется собирать для каждой страницы свой js-файл из всех скриптов, которые используются на ней.
Задача усложняется наличием большого количества зависимостей. Например, нужно подключить какой-то модуль, но для него нужны некоторые библиотеки или jquery-плагины. И отслеживать это в ручную не представляется возможным.</p>

<p>Другой вопрос — как организоваться сборку проекта в девелоперской среде и на продакшене?
В продакшене нужно склеивать и минифицировать все файлы, а в при разработке нужно подключать их все по отдельности. Но хранить всю информацию о том какие скрипты нужны и с какими зависимостями хочется в виде конфигов в json-файлах.</p>

<p>Где можно почитать о best practice? Поиск выдает в основном совсем простые туториалы для новичков.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31372939">
        <a class="user" href="https://github.com/iamstarkov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/559321?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/iamstarkov">iamstarkov</a><time datetime="2013-12-30T22:27:08Z">30 декабря 2013 года в 22:27</time>
          <div class="body">
          <p>@egamzin я не встречал на просторах интернета статью с best practice, но думаю она есть.</p>

<p>Попробую поделиться своим опытом: когда я начинал свой пока, что самый большой проект <a href="https://github.com/matmuchrapna/Hampi">Хампи</a>, то для достижения грант-просветления я осознал две вещи и начал использовать обе в полную силу:</p>

<p>1) для гранта огромное количество готовых плагинов, поэтому я отсмотрел все плагины по интересующим кейвордам и попробовал выбранные (повторяю с некоторой периодичностью)
2) осознал, что Gruntfile.js это обычный js-файл и внутри него можно творить, что угодно и использовать это в своих целях</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31379760">
        <a class="user" href="https://github.com/ghost">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/10137?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/ghost">ghost</a><time datetime="2013-12-31T01:34:23Z">31 декабря 2013 года в 1:34</time>
          <div class="body">
          <p>@egamzin мы обычно используем для этих целей require.js. Если посмотреть доки по оптимизации, то можно найти примеры билда проекта в несколько "модулей". Но если у вас весь проект после билда не будет весить много, то не будет никакого смысла его разбивать на части.</p>

<p>Если используете какие то популярные библиотеки (jquery, например), то в конфиге require.js можно прописать его CDN, что позволит в некоторых случаях сократить время загрузки скриптов.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31391716">
        <a class="user" href="https://github.com/ivanzolotov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/4838660?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/ivanzolotov">ivanzolotov</a><time datetime="2013-12-31T11:33:06Z">31 декабря 2013 года в 11:33</time>
          <div class="body">
          <p>Если конфигурировать imagemin способом, описанным в статье, то при повторном запуске grunt возьмёт все графические файлы из ./img и всех её поддиректорий. Да, в том числе и из ./img/build, а при размещении оптимизированного файла аккуратно воссоздаст структуру папок в пункте назначения, то есть в ./img/build снова создаст build и положит оптимизированный файл туда. При третьем запуске grunt структура будет выглядеть уже следующим образом: ./img/build/build/build. Чтобы этого избежать нужно каким-то образом исключить ./img/build из источника, то есть внести корректировку вот в эту строку:</p>

<p>src: ['**/*.{png,jpg,gif}']</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31394290">
        <a class="user" href="https://github.com/jslby">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/6238161?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/jslby">jslby</a><time datetime="2013-12-31T13:13:14Z">31 декабря 2013 года в 13:13</time>
          <div class="body">
          <p>@egamzin, используйте require.js</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31394355">
        <a class="user" href="https://github.com/jslby">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/6238161?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/jslby">jslby</a><time datetime="2013-12-31T13:16:00Z">31 декабря 2013 года в 13:16</time>
          <div class="body">
          <p>Набросал за несколько часов небольшой скелет. Если кому то интересно, то вот линк: https://github.com/jslby/fewatcher</p>

<p>Полностью функционирует, жду предложения и замечания.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31394808">
        <a class="user" href="https://github.com/ivanzolotov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/4838660?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/ivanzolotov">ivanzolotov</a><time datetime="2013-12-31T13:32:51Z">31 декабря 2013 года в 13:32</time>
          <div class="body">
          <p>А я правильно понимаю, что LiveReload заработает только с сервером? Ну, и вообще, раскрытия темы сервера статье не достаёт.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31394955">
        <a class="user" href="https://github.com/ivanzolotov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/4838660?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/ivanzolotov">ivanzolotov</a><time datetime="2013-12-31T13:39:16Z">31 декабря 2013 года в 13:39</time>
          <div class="body">
          <p>Насчёт SASS под Mac OS X. Для тех, у кого Ruby через Homebrew потребуется после установки самого SASS командой gem install sass выполнить:</p>

<p>brew unlink ruby; brew link ruby</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31395386">
        <a class="user" href="https://github.com/iamstarkov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/559321?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/iamstarkov">iamstarkov</a><time datetime="2013-12-31T13:55:03Z">31 декабря 2013 года в 13:55</time>
          <div class="body">
          <p>@jslby отписался в ишью репозитории</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31395583">
        <a class="user" href="https://github.com/A">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/1410106?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/A">A</a><time datetime="2013-12-31T14:01:29Z">31 декабря 2013 года в 14:01</time>
          <div class="body">
          <blockquote>
  <p>А я правильно понимаю, что LiveReload заработает только с сервером? Ну, и вообще, раскрытия темы сервера статье не достаёт.</p>
</blockquote>

<p><code>grunt-contrib-watch</code> сам запускает <code>livereload-server</code>. Пользователю достаточно всего лишь подключить его в своем html-файле:</p>

<pre><code>&lt;script src="//localhost:35729/livereload.js"&gt;&lt;/script&gt;
</code></pre>

<p>Как альтернативу подключению файла, можно использовать плагин для браузера. Подробнее вы можете прочитать <a href="https://github.com/gruntjs/grunt-contrib-watch#enabling-live-reload-in-your-html">в документации</a></p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31736787">
        <a class="user" href="https://github.com/zjoin">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/4652760?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/zjoin">zjoin</a><time datetime="2014-01-07T13:28:37Z">7 января 2014 года в 13:28</time>
          <div class="body">
          <p>Если настроить concat по статье и напечатать 'grunt'</p>

<p>Warning: Task “default” not found. Use –force to continue.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31752804">
        <a class="user" href="https://github.com/iamstarkov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/559321?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/iamstarkov">iamstarkov</a><time datetime="2014-01-07T16:29:45Z">7 января 2014 года в 16:29</time>
          <div class="body">
          <p>Если у тебя есть строчка: <code>grunt.registerTask('default', ['concat']);</code>, то всё должно работать. Покажи свой грантфайл</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31769197">
        <a class="user" href="https://github.com/zjoin">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/4652760?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/zjoin">zjoin</a><time datetime="2014-01-07T19:18:01Z">7 января 2014 года в 19:18</time>
          <div class="body">
          <p>http://jsbin.com/UYoDaxUt/1/edit</p>

<p>Непорядок здесь
grunt-contrib-imagemin</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31783861">
        <a class="user" href="https://github.com/iamstarkov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/559321?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/iamstarkov">iamstarkov</a><time datetime="2014-01-07T21:52:52Z">7 января 2014 года в 21:52</time>
          <div class="body">
          <p>во-первых, это уже другая ошибка.
во-вторых, у тебя не так, как в статье: <code>grunt.registerTask('default', ['concat']);</code>
в-третьих, default-таск падает из-за ошибки в таске imagemin. тут уже веселее.</p>

<p>Подозреваю, что таск просто не находит ни одного файла внутри вложенных папок (<code>**/*…</code>) папки <code>images/</code>. А также проблема может быть здесь http://stackoverflow.com/q/20118325/1057730</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31809655">
        <a class="user" href="https://github.com/ivanzolotov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/4838660?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/ivanzolotov">ivanzolotov</a><time datetime="2014-01-08T06:55:12Z">8 января 2014 года в 6:55</time>
          <div class="body">
          <p>А что насчёт бесконечного вложения папок build? Есть идеи, как это побороть?</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="31811777">
        <a class="user" href="https://github.com/iamstarkov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/559321?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/iamstarkov">iamstarkov</a><time datetime="2014-01-08T07:56:16Z">8 января 2014 года в 7:56</time>
          <div class="body">
          <p>Конечно.</p>

<p>Достаточно добавить папку build в исключения</p>

<p><code>js
    imagemin: {
        dynamic: {
            files: [{
                expand: true,
                cwd: 'images/',
                src: ['**/*.{png,jpg,gif}', '!build/'],
                dest: 'images/build/'
            }]
        }
    }</code></p>

<p>И всё будет хорошо, если только imagemin умеет перезаписывать файлы, если не умеет, то нам придёт на помощь <a href="https://github.com/gruntjs/grunt-contrib-clean">grunt-contrib-clean</a>:</p>

<p><code>js
    clean: {
      build: {
        src: ['images/build/']
      }
    }</code></p>

<p>И итоговый код для default-таска будет таким:</p>

<p><code>js
    grunt.registerTask('default', ['concat', 'uglify', 'clean', 'imagemin']);</code></p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="45433053">
        <a class="user" href="https://github.com/P3trovichUA">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/6774750?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/P3trovichUA">P3trovichUA</a><time datetime="2014-06-08T10:02:09Z">8 июня 2014 года в 10:02</time>
          <div class="body">
          <p>Только что сравнил imagemin с прогой которой я пользуюсь. Пока еще он проигрывает в сжатии.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="45434393">
        <a class="user" href="https://github.com/P3trovichUA">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/6774750?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/P3trovichUA">P3trovichUA</a><time datetime="2014-06-08T11:19:38Z">8 июня 2014 года в 11:19</time>
          <div class="body">
          <p>Опробовал grunt. Отличная вещь. Prepros — на свалку.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="57781316">
        <a class="user" href="https://github.com/transGLUKator">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/2004567?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/transGLUKator">transGLUKator</a><time datetime="2014-10-03T11:08:23Z">3 октября 2014 года в 11:08</time>
          <div class="body">
          <p>Спасибо, давно хотел начать пользоваться grunt'ом.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="57836698">
        <a class="user" href="https://github.com/iamstarkov">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/559321?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/iamstarkov">iamstarkov</a><time datetime="2014-10-03T18:42:33Z">3 октября 2014 года в 18:42</time>
          <div class="body">
          <p>попробуйте приглядеться к gulp</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="139887832">
        <a class="user" href="https://github.com/pavlyukpetr">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/11602610?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/pavlyukpetr">pavlyukpetr</a><time datetime="2015-09-13T15:32:54Z">13 сентября 2015 года в 15:32</time>
          <div class="body">
          <p>подскажите в чем проблема:
imagemin проваливается с ошибкой write EOF in file ...</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="139907641">
        <a class="user" href="https://github.com/pavlyukpetr">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/11602610?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/pavlyukpetr">pavlyukpetr</a><time datetime="2015-09-13T18:54:09Z">13 сентября 2015 года в 18:54</time>
          <div class="body">
          <p>и ошибка при использовании contrib-sass. Пишет, что я должен установить руби и sass (You need to have Ruby and Sass installed and in your PATH for this task to work). Но они у меня стоят. Я могу через консоль посмотреть их версии. Как это решить?</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="144203155">
        <a class="user" href="https://github.com/KorbenMakar">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/12738140?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/KorbenMakar">KorbenMakar</a><time datetime="2015-09-29T21:58:18Z">29 сентября 2015 года в 21:58</time>
          <div class="body">
          <p>Это, наверное, самая лучшая статья о настройках Grunt!!!  До этого читал другие блоги - напряжно... Здесь же все доходчиво, ясно и понятно. Супер, спасибо.</p>

          </div>
        </div>
      </article>      <article class="comment" data-issue="1" data-comment="163052276">
        <a class="user" href="https://github.com/Sigmanor">
          <img class="avatar" src="https://avatars.githubusercontent.com/u/7986067?v=3&amp;s=160" alt="Автар пользователя">
        </a>
        <div class="wrapper">
          <a class="author" href="https://github.com/Sigmanor">Sigmanor</a><time datetime="2015-12-08T23:15:11Z">8 декабря 2015 года в 23:15</time>
          <div class="body">
          <p>Занятно, но gulp Наше все :D</p>

          </div>
        </div>
      </article><h3 class="no-auth"><a href="https://github.com/login/oauth/authorize?client_id=1295b0c39150f38ee008&amp;state=707745966&amp;redirect_uri=http%3A%2F%2Ffrontender.info%2Fgrunt-is-not-weird-and-hard%2F&amp;scope=public_repo" class="login">Участвовать в обсуждении</a></h3>
    </section>
    <section class="donate" id="donate">
      <iframe style="float:right;" frameborder="0" allowtransparency="true" scrolling="no" src="https://money.yandex.ru/embed/donate.xml?account=410011262111925&quickpay=donate&payment-type-choice=on&default-sum=100&targets=%D0%94%D0%B5%D0%BD%D1%8C%D0%B3%D0%B8+%D0%B1%D1%83%D0%B4%D1%83%D1%82+%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D1%8B+%D0%B4%D0%BB%D1%8F+%D0%BE%D0%BF%D0%BB%D0%B0%D1%82%D1%8B+%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B+%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D1%81%D1%82%D0%BE%D0%B2%2C+%D0%B1%D0%BB%D0%B0%D0%B3%D0%BE%D0%B4%D0%B0%D1%80%D1%8F+%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B5+%D0%BA%D0%BE%D1%82%D0%BE%D1%80%D1%8B%D1%85+%D1%80%D0%B5%D0%B3%D1%83%D0%BB%D1%8F%D1%80%D0%BD%D0%BE+%D0%BF%D0%BE%D1%8F%D0%B2%D0%BB%D1%8F%D1%8E%D1%82%D1%81%D1%8F+%D0%BD%D0%BE%D0%B2%D1%8B%D0%B5+%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8.&project-name=Frontender+Magazine&project-site=http%3A%2F%2Ffrontender.info%2F&button-text=05" width="520" height="105"></iframe>
      <section class="abstract">
        <h3>Поддержите журнал!</h3>
        <p>Деньги будут использованы для оплаты работы над новыми публикациями.</p>
      </section>
    </section>
    <footer>
      <a href="http://frontender.info/" class="logotype">fr.</a>
      <nav>
        <p class="social">
          <a href="http://twitter.com/frontenderinfo" class="tw icon-twitter">@frontenderinfo</a>
          <a href="http://feeds.frontender.info/FrontenderMagazine" class="rss icon-rss">rss-канал журнала</a>
          <a href="http://feeds.frontender.info/FrontenderMagazineArticles" class="rss icon-rss">полнотекстовый rss-канал журнала</a>
          <a href="http://feeds.frontender.info/FrontenderMagazineHEAP" class="rss icon-rss">rss-канал кучи</a>
          <a href="http://github.com/FrontenderMagazine/" class="github icon-github">GitHub</a>
        </p>
      </nav>
      <nav>
        <p>
          <a href="/heap/">Куча</a>
          <a href="/about.html">О проекте</a>
          <a href="/team.html">Редакция</a>
          <a href="/team.html#partners">Наши партнеры</a>
        </p>
      </nav>
      <p class="copy">&copy; 2013 Frontender Magazine.</p>
      <p class="cc">Материалы в оригинале опубликованные под лицензией <a class="cc-sign" href="http://creativecommons.org/">Creative Commons</a> сохраняют её.</p>
    </footer>
    <div class="templates">
      <div id="comment-template">
<article class="comment preview" data-issue="{{issue}}" data-comment="">
  <a class="user" href="{{user}}">
    <img class="avatar" src="{{img}}" alt="Автар пользователя">
  </a>
  <div class="wrapper">
    <a class="author" href="{{user}}">{{login}}</a><time datetime="{{mashinetime}}">{{time}}</time>
    <div class="body">
      {{{comment}}}
    </div>
  </div>
</article>
      </div>
    </div>
    <script src="/js/side/jquery.min.js"></script>
    <script async src="//codepen.io/assets/embed/ei.js"></script>
    <script src="/js/side/marked.js"></script>
    <script src="/js/side/moment.min.js"></script>
    <script src="/js/side/ru.js"></script>
    <script src="/js/side/handlebars.min.js"></script>
    <script src="/js/side/highlight.pack.js"></script>
    <script src="/js/CommentsController.js"></script>
    <script src="/js/social.js"></script>
  </body>
</html>