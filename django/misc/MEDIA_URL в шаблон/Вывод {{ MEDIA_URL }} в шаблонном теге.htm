<!DOCTYPE html>

<title>Вывод {{ MEDIA_URL }} в шаблонном теге</title>

<link rel="stylesheet" href="/media/style/style.css?1393485583">

<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700">
<link rel="icon" href="/media/style/icon.png">
<script src="/media/js/jquery-1.3.2.min.js?1393485583"></script>
<link rel="openid.server" href="http://softwaremaniacs.org/openid/endpoint/"><link rel="openid.delegate" href="http://softwaremaniacs.org/about/">

<script src='/media/js/highlight.pack.js?1389247506'></script>
<script src='/media/js/core.js?1393485583'></script>
<script src='/media/js/cicero.js?1393485583'></script>

<link rel="alternate" type="application/atom+xml" href="/forum/feeds/articles/django/8145/">


<body id="topic" class="forum old_topic" lang="">

<div id="header">
  <h1>Вывод {{ MEDIA_URL }} в шаблонном теге</h1>
  <p class="meta">
  <a href="/forum/">Форум</a>: <a href="/forum/django/">Django</a>,
  <span class="time">08.01.2009</span>
  
  
  <span id="spawned_from">Топик отщеплен от <a href="/forum/django/1375/">Не выводится {{ MEDIA_URL }} в шаблоне</a></span>
  
  
  

</div>


<div id="content">

<ol id="articles">


  <li class="article" id="32900">
    
    <div class="meta">
      <p class="mutant"><a href="/forum/users/1021/"><img src="/media/mutants/1021.png" alt="" title="http://glader.livejournal.com/"></a>
      <address>
      
        <a href="/forum/users/1021/">glader.livejournal.com</a>
      
      </address>
      <p class="time" title="2009-01-08 14:16">08.01.2009

      <div class="vote">
        

<div class="up" title="Нравится пост">
<span class="votes_up">0</span>

<img src="/media/style/vote-up-off.png" alt="↑">

</div>

<div class="down" title="Не нравится пост">
<span class="votes_down">0</span>

<img src="/media/style/vote-down-off.png" alt="↓">

</div>

      </div>

      <div class="control">
        
        
      </div>
    </div>

    <div class="usertext">
      <div>Это хорошо работает для вьюх, а как быть с custom template tags?</div>
    </div>
    

  <li class="article" id="32901">
    
    <div class="meta">
      <p class="mutant"><a href="/forum/users/1/"><img src="/media/mutants/1.png" alt="" title="http://softwaremaniacs.org/about/"></a>
      <address>
      
        <a href="/forum/users/1/">Ivan Sagalaev</a>
      
      </address>
      <p class="time" title="2009-01-08 14:17">08.01.2009

      <div class="vote">
        

<div class="up" title="Нравится пост">
<span class="votes_up">0</span>

<img src="/media/style/vote-up-off.png" alt="↑">

</div>

<div class="down" title="Не нравится пост">
<span class="votes_down">0</span>

<img src="/media/style/vote-down-off.png" alt="↓">

</div>

      </div>

      <div class="control">
        
        
      </div>
    </div>

    <div class="usertext">
      <p>Просто в шаблонном теге передаешь в контекст <code>settings.MEDIA_URL</code> (я так понимаю, речь об inclusion-теге).
    </div>
    

  <li class="article" id="33275">
    
    <div class="meta">
      <p class="mutant"><a href="/forum/users/1021/"><img src="/media/mutants/1021.png" alt="" title="http://glader.livejournal.com/"></a>
      <address>
      
        <a href="/forum/users/1021/">glader.livejournal.com</a>
      
      </address>
      <p class="time" title="2009-01-10 01:11">10.01.2009

      <div class="vote">
        

<div class="up" title="Нравится пост">
<span class="votes_up">0</span>

<img src="/media/style/vote-up-off.png" alt="↑">

</div>

<div class="down" title="Не нравится пост">
<span class="votes_down">0</span>

<img src="/media/style/vote-down-off.png" alt="↓">

</div>

      </div>

      <div class="control">
        
        
      </div>
    </div>

    <div class="usertext">
      <div>То есть если у меня куча тегов, в каждом надо добавлять settings.MEDIA_URL? Как-то некошерно. DRY, опять же...</div>
    </div>
    

  <li class="article" id="33306">
    
    <div class="meta">
      <p class="mutant"><a href="/forum/users/1/"><img src="/media/mutants/1.png" alt="" title="http://softwaremaniacs.org/about/"></a>
      <address>
      
        <a href="/forum/users/1/">Ivan Sagalaev</a>
      
      </address>
      <p class="time" title="2009-01-10 04:01">10.01.2009

      <div class="vote">
        

<div class="up" title="Нравится пост">
<span class="votes_up">0</span>

<img src="/media/style/vote-up-off.png" alt="↑">

</div>

<div class="down" title="Не нравится пост">
<span class="votes_down">0</span>

<img src="/media/style/vote-down-off.png" alt="↓">

</div>

      </div>

      <div class="control">
        
        
      </div>
    </div>

    <div class="usertext">
      <p>DRY тут ни при чем, на самом деле... </p>
<p>Если ты хочешь, чтобы <code>MEDIA_URL</code> был вообще во всех шаблоных, то нужен не контекст-процессор, а немного другое — надо сделать это слово частью языка шаблонов. То есть, сделать тег <code>{% MEDIA_URL %}</code> и добавить библиотеку с ним в дефолтные:</p>
<pre><code>from django.template import add_to_builtins
add_to_builtins('appname.templatetags.defaulttags')
</code></pre>
    </div>
    

</ol>

<div class="meta">

</div>


<p><em>Внимание!</em> Это довольно старый топик, посты в него не попадут в новые, и их
никто не увидит. Пишите пост, если хотите просто дополнить топик, а чтобы задать
новый вопрос — <a href="/forum/django/">начните новый</a>.


<form action="/forum/django/8145/" method="post" id="add" class="edit">
  <p>
    <label for="id_filter">Фильтр</label>
    <select name="filter" id="id_filter">
<option value="">---------</option>
<option value="markdown">markdown</option>
<option value="bbcode" selected="selected">bbcode</option>
</select>
    
  
  <p>
    <label for="id_name">Имя или OpenID</label>
    <input type="text" name="name" id="id_name" />
    
  
  
  <div id="preview">
    <p><label>Предпросмотр</label>
    <div class="usertext"></div>
  </div>
  <p>
    <label for="id_text">Текст</label>
    <textarea id="id_text" rows="10" cols="40" name="text"></textarea>
    
  <p style="position: absolute; left: -1000px;">
    <label>Это поле — ловушка для роботов, оставьте его пустым</label>
    <input type="text" name="email" value="" tabindex="-1" autocomplete="off">

  <div class="buttons"><button type="submit">Добавить</button></div>
</form>


</div>


<!-- Yandex.Metrika -->
<script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript"></script>
<div style="display:none;"><script type="text/javascript">
try { var yaCounter1199159 = new Ya.Metrika(1199159); } catch(e){}
</script></div>
<noscript><div style="position:absolute"><img src="//mc.yandex.ru/watch/1199159" alt="" /></div></noscript>
<!-- /Yandex.Metrika -->

