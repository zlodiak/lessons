!function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},fire:function(e,i,n){var r=t.Event(i);return e.trigger(r,n),r.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(n){var r,o,s,a,c,u,l,d;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain"),c=a===e?null:a,u=n.data("with-credentials")||null,l=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){r=n.attr("method"),o=n.attr("action"),s=n.serializeArray();var h=n.data("ujs:submit-button");h&&(s.push(h),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(r=n.data("method"),o=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(r=n.data("method")||"get",o=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):(r=n.data("method"),o=i.href(n),s=n.data("params")||null);d={type:r||"GET",data:s,dataType:l,beforeSend:function(t,r){return r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),i.fire(n,"ajax:beforeSend",[t,r])},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:c},u&&(d.xhrFields={withCredentials:u}),o&&(d.url=o);var f=i.ajax(d);return n.trigger("ajax:send",f),f}return!1},handleMethod:function(n){var r=i.href(n),o=n.data("method"),s=n.attr("target"),a=t("meta[name=csrf-token]").attr("content"),c=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+r+'"></form>'),l='<input name="_method" value="'+o+'" type="hidden" />';c!==e&&a!==e&&(l+='<input name="'+c+'" value="'+a+'" type="hidden" />'),s&&u.attr("target",s),u.hide().append(l).appendTo("body"),u.submit()},disableFormElements:function(e){e.find(i.disableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with",e[i]()),e[i](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(i.enableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[i](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,n=t.data("confirm"),r=!1;return n?(i.fire(t,"confirm")&&(r=i.confirm(n),e=i.fire(t,"confirm:complete",[r])),r&&e):!0},blankInputs:function(e,i,n){var r,o,s=t(),a=i||"input,textarea",c=e.find(a);return c.each(function(){if(r=t(this),o=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!o==!n){if(r.is("input[type=radio]")&&c.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;s=s.add(r)}}),s.length?s:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var r=t(this),o=r.data("method"),s=r.data("params");if(!i.allowAction(r))return i.stopEverything(n);if(r.is(i.linkDisableSelector)&&i.disableElement(r),r.data("remote")!==e){if(!(!n.metaKey&&!n.ctrlKey||o&&"GET"!==o||s))return!0;var a=i.handleRemote(r);return a===!1?i.enableElement(r):a.error(function(){i.enableElement(r)}),!1}return r.data("method")?(i.handleMethod(r),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var r=t(this),o=r.data("remote")!==e,s=i.blankInputs(r,i.requiredInputSelector),a=i.nonBlankInputs(r,i.fileInputSelector);if(!i.allowAction(r))return i.stopEverything(n);if(s&&r.attr("novalidate")==e&&i.fire(r,"ajax:aborted:required",[s]))return i.stopEverything(n);if(o){if(a){setTimeout(function(){i.disableFormElements(r)},13);var c=i.fire(r,"ajax:aborted:file",[a]);return c||setTimeout(function(){i.enableFormElements(r)},13),c}return i.handleRemote(r),!1}setTimeout(function(){i.disableFormElements(r)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var r=n.attr("name"),o=r?{name:r,value:n.val()}:null;n.closest("form").data("ujs:submit-button",o)}),n.delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)}))}(jQuery),jQuery(function(t){var e;return window.AjaxIndicator=e=function(){function e(e){this.block=t(e)}return e.prototype.show=function(){return this.block.show()},e.prototype.show_on=function(t){return this.block.css({left:t.offset().left+t.outerWidth()/2,top:t.offset().top+t.outerHeight()/2}).show()},e.prototype.show_next_to=function(t){return this.block.css({left:t.offset().left+(t.width()+35),top:t.offset().top+t.height()/2}).show()},e.prototype.hide=function(){return this.block.hide()},e}(),window.ajax_i=new e("#ajax_indicator"),window.ajax_i_black=new e("#ajax_indicator"),window.ajax_i_gray=new e("#ajax_indicator")});var ButtonAnimation;ButtonAnimation={},jQuery(function(t){return jQuery.fn.center=function(t){var e;return e=t.offset(),this.css("top",(t.outerHeight()-this.outerHeight())/2+e.top+"px"),this.css("left",(t.outerWidth()-this.outerWidth())/2+e.left+"px"),this},ButtonAnimation={start_on:function(e,i){return i||(i="gray"),e.attr("disabled")?!1:(t("img#btn_wait_indicator_"+i).center(e).show(),t(".btn, [type=submit]").attr("disabled","disabled"))},stop:function(){return t(".btn, [type=submit]").removeAttr("disabled"),t("img.btnWaitIndicator").hide()}},t(".btn:not(.noAnimation), [type=submit]:not(.noAnimation)").click(function(){var e;return e=t(this).hasClass("btn-success")?"green":t(this).hasClass("btn-danger")?"red":"gray",ButtonAnimation.start_on(t(this),e)}),t("[type=submit]").click(function(){return t(this).parents("form").submit(),!1})}),jQuery(function(t){var e;return e=function(){function e(){this.block=t('<div id="form_locker"><div id="form_locker_text"></div></div>'),this.text=this.block.children("#form_locker_text"),t("body").prepend(this.block),this.ajax_indicators={white:ajax_i}}return e.prototype.show_on=function(t,e){var i;return null==e&&(e={css_class:"white"}),e.css_class||(e.css_class="gray"),e.show_ajax_i=!0,this.block.css({left:t.offset().left,top:t.offset().top,width:t.outerWidth(),height:t.outerHeight()}).show(),this.block.attr("class",""),e.css_class&&this.block.addClass(e.css_class),e.show_ajax_i?(this.ajax_indicators[e.css_class].show_on(this.block),this.text.text(e.text),i=this.ajax_indicators[e.css_class].block.offset().top-this.block.offset().top+2*this.ajax_indicators[e.css_class].block.outerHeight(),this.text.css({position:"relative",top:i,textAlign:"center"})):void 0},e.prototype.hide=function(){var t,e,i,n;this.block.hide(),i=this.ajax_indicators,n=[];for(t in i)e=i[t],n.push(e.hide());return n},e}(),window.FormLocker=new e}),jQuery(function(t){var e;return e=function(){function e(){var e=this;this.block=t("#frontend_notification"),this.message=t(".message",this.block),this.timer=t(".closingCounter .number",this.block),this.update_timer=function(){return e.stop_timer?void 0:"1"!==e.timer.text()?(e.timer.text(e.timer.text()-1),setTimeout(e.update_timer,1e3)):e.close()},t("#close_notification_ico").click(function(){return e.stop_timer=!0,e.close()})}return e.prototype.show=function(t,e){return"string"!=typeof t&&(e=t.type,t=t.message),this.block.removeClass("error").removeClass("success").addClass(e),this.timer.text(5),this.message.html(t),this.block.show(),this.current_timestamp=(new Date).getTime(),this.start_timer(this.current_timestamp)},e.prototype.show_error=function(){return this.show(t("#frontend_notification_error500").text(),"error")},e.prototype.close=function(){return this.block.slideUp(300)},e.prototype.start_timer=function(t){var e=this;return this.stop_timer=!1,setTimeout(function(){return t===e.current_timestamp?e.update_timer():void 0},1e3)},e}(),window.FrontendNotifier=new e,t("#frontend_notification_content span").size()>0?FrontendNotifier.show(t("#frontend_notification_content span").text(),t("#frontend_notification_content span").attr("class")):void 0}),jQuery(function(t){var e;return window.Vote=e=function(){function e(e){this.el=t(e),this.votes_block=this.el.parents(".votes"),this.voted_el=this.votes_block.children("."+this.el.attr("class")+".done"),this.votes_count_el=this.votes_block.children(".votesCounter"),this.votable_id=this.votes_block.attr("data-votable_id"),this.votable_type=this.votes_block.attr("data-votable_type")}return e.prototype.upvote=function(){return this.send_vote(1)},e.prototype.downvote=function(){return this.send_vote(-1)},e.prototype.highlight_arrow=function(t){return"up"===t?(this.votes_block.children("img.upvote").hide(),this.votes_block.children("img.upvote.done").show()):"down"===t?(this.votes_block.children("img.downvote").hide(),this.votes_block.children("img.downvote.done").show()):(this.el.hide(),this.voted_el.show())},e.prototype.set_units=function(t){return t=parseInt(t),this.votes_count_el.text(parseInt(this.votes_count_el.text())+t)},e.prototype.send_vote=function(e){var i=this;return this.el.css({opacity:.5}),t.ajax({url:"/votes",type:"post",dataType:"json",data:{vote:{votable_id:this.votable_id,votable_type:this.votable_type,units:e}},success:function(t){return"error"!==t.type?(i.set_units(e),i.highlight_arrow()):(FrontendNotifier.show(t),t.units<0?i.highlight_arrow("down"):t.units>0?i.highlight_arrow("up"):void 0)},error:function(){return FrontendNotifier.show_error},complete:function(){return i.el.css({opacity:1})}})},e}()}),jQuery(function(t){var e;return window.Answer=e=function(){function e(t){this.el=t,this.el&&(this.answer_id=this.el.attr("data-answer_id"))}return e.prototype.save=function(e){var i=this;return this.form=t(e),FormLocker.show_on(this.form),t(this.form).ajaxSubmit({success:function(t){return"error"===t.type?FrontendNotifier.show(t):i.render(t.html)},error:function(){return FrontendNotifier.show_error()},complete:function(){return FormLocker.hide(),ButtonAnimation.stop()}})},e.prototype["delete"]=function(){var e=this;return FormLocker.show_on(this.el),t.ajax({type:"post",url:"/answers/"+this.answer_id,data:{_method:"delete"},success:function(t){return"success"===t.type&&e.el.fadeOut(),FrontendNotifier.show(t)},error:function(){return FrontendNotifier.show_error()},complete:function(){return FormLocker.hide()}})},e.prototype.markAsCorrect=function(){var e=this;return this.el.find(".correct").css({opacity:.5}),t.ajax({type:"post",url:"/answers/"+this.answer_id+"/set_correct",success:function(i){return"success"===i.type?(t(".answer .correct").removeClass("true").addClass("false"),e.el.find(".correct").removeClass("false").addClass("true")):FrontendNotifier.show(i)},error:function(t){return console.log(t),FrontendNotifier.show_error()},complete:function(){return e.el.find(".correct").css({opacity:1})}})},e.prototype.render=function(e){return this.new_el=t(e).hide(),this.el?(this.el.hide(),this.el.before(this.new_el),this.el.remove()):(t(".question .answers.list h2").after(this.new_el),t(".question .answers.list h2").show()),this.form.hide(),t(".noOneLeftTheAnswer").remove(),this.new_el.fadeIn(400)},e}()}),jQuery(function(t){return window.Comment={},Comment.create=function(e,i){return FormLocker.show_on(e),e.ajaxSubmit({success:function(n){var r;return"success"===n.type?(e.remove(),r=t(n.html).hide(),i.find(".comments").append(r),r.fadeIn(200),i.find(".addComment").show(),ButtonAnimation.stop()):FrontendNotifier.show(n)},error:function(){return FrontendNotifier.show_error()},complete:function(){return FormLocker.hide()}})},Comment.build_form=function(e){var i;return t(".answer .addComment").show(),t("form.new_comment.visible").remove(),i=t("form.new_comment").clone(),i.children("input#comment_commentable_id").val(e.attr("data-answer_id")),i.addClass("visible"),e.append(i),i.submit(function(){return new Comment.create(t(this),e),!1}),i.show(),e.find(".addComment").hide()},Comment["delete"]=function(e){return FormLocker.show_on(e),t.ajax({url:"/comments/"+e.attr("data-comment_id"),type:"post",data:{_method:"delete"},success:function(t){return"success"===t.type&&e.fadeOut(200,function(){return e.remove()}),FrontendNotifier.show(t)},error:function(){return FrontendNotifier.show_error()},complete:function(){return FormLocker.hide()}})}}),jQuery(function(t){return t("form#add_comment").submit(function(){return new Comment.create(t(this),t(this).parents(".blogPost")),!1})}),jQuery(function(t){return t("form.new_subscription").submit(function(){var e,i=this;return e=t(this).find("input[type=submit]"),t(this).find("input[name=email]").size()>0?!0:(t(this).ajaxSubmit({dataType:"json",success:function(e){return FrontendNotifier.show(e),"success"===e.type?(t.cookie("subscriptionEmailWarning_displayed")||(t.cookie("subscriptionEmailWarning_displayed","1",{expires:1e4,path:"/",domain:"."+ROOT_DOMAIN}),t(".subscriptionEmailWarning").slideDown(200)),t(i).remove()):void 0},error:function(){return e.removeAttr("disabled"),FrontendNotifier.show_error},complete:function(){return ButtonAnimation.stop()}}),!1)}),t("table.subscriptions button").click(function(){var e,i;return e=t(this),e.attr("disabled",!0).val("Ждите..."),i=t(this).attr("data-subscription_id"),t.ajax({url:"/subscriptions/"+i,type:"post",dataType:"json",data:{_method:"delete",authenticity_token:AUTH_TOKEN},success:function(t){return FrontendNotifier.show(t),"success"===t.type?e.parents("tr").fadeOut(300):e.removeAttr("disabled")},error:function(){return FrontendNotifier.show_error},complete:function(){return e.val("Удалить")}})})}),jQuery(function(t){var e,i;return window.UIGuider=e=function(){function e(e){this.block=t(e),this.target=t(t(this.block).attr("data-target-element")),this.arrows={top:this.block.children(".arrow.top"),bottom:this.block.children(".arrow.bottom"),left:this.block.children(".arrow.side.left"),right:this.block.children(".arrow.side.right")},this.state="hidden",this.hide_arrows=function(){var t,e,i,n,r;for(n=this.arrows,r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(t.hide());return r},this.place_arrow=function(t,e){return null==e&&(e={}),this.hide_arrows(),e.side_arrow?this.arrows[t.x].css({top:this.block.height()/2-this.arrows.left.height()}).show():this.arrows[t.y].show().addClass(t.x)},this.place_guider=function(t,e){var i,n,r,o,s;return null==e&&(e={}),e.side_arrow?(i=this.arrows.left,n=1):(i=this.arrows.top,n=-1),o=e.side_arrow?this.target.offset().top+this.target.height()/2-this.block.height()/2:"top"===t.y?this.target.offset().top+this.target.height()+i.height():this.target.offset().top-this.block.height()-i.height(),"left"===t.x?(r=this.target.offset().left+i.width()*n,s="left"===e.edge?0:"right"===e.edge?this.target.width():this.target.width()/2):(n=-n,r=this.target.offset().left+i.width()*n,s="left"===e.edge?-this.block.width():"right"===e.edge?-this.block.width()+this.target.width():-this.block.width()+this.target.width()/2),this.block.css({top:o}),this.block.css({left:r+s})},this.set_cookie=function(){return this.block.hasClass("show_once")&&this.block.attr("id")?t.cookie("UIGuider_"+this.block.attr("id"),"1",{expires:3560}):void 0},this.target_location=function(){var e,i;return this.target_location_cached?this.target_location_cached:(e=t(document).width()/2-this.target.offset().left<0?"right":"left",i=t(document).height()/2-this.target.offset().top<0?"bottom":"top",this.target_location_cached={x:e,y:i})}}return e.prototype.show=function(e){return null==e&&(e={}),this.hiding||(UIGuidersCollection.hide_all(),t.cookie("UIGuider_"+this.block.attr("id")))?void 0:(this.block.hasClass("side_arrow")&&(e.side_arrow=!0),this.block.attr("data-target-edge")&&(e.edge=this.block.attr("data-target-edge")),e.target&&(this.target=e.target),this.place_arrow(this.target_location(),e),this.place_guider(this.target_location(),e),this.set_cookie(),e.content&&this.block.find(".content").html(e.content),this.block.fadeIn(300),this.state="visible")},e.prototype.hide=function(){var t=this;if(!this.hiding)return this.hiding=!0,this.block.fadeOut(300,function(){return t.hiding=!1}),this.state="hidden"},e}(),i=function(){function i(){var i,n,r,o,s,a,c;for(this.ui_guiders=[],a=t(".uiGuider"),n=0,o=a.length;o>n;n++)i=a[n],this.ui_guiders.push(new e(i));for(c=this.ui_guiders,r=0,s=c.length;s>r;r++)i=c[r],i.block.hasClass("autoshow")&&setTimeout(function(){return i.show()},1e3),i.block.hasClass("autohide")&&i.target.bind("mouseleave",{guider:i},function(t){return t.data.guider.hide()}),i.block.attr("data-event-name")&&i.block.attr("data-event-name").length>0&&i.target.bind(i.block.attr("data-event-name"),{guider:i},function(e){return"visible"!==e.data.guider.state?e.data.guider.show({target:t(e.currentTarget)}):void 0}),i.block.find(".close").click(function(){return i.hide()})}return i.prototype.find=function(t){var e,i,n,r,o;for(i=null,o=this.ui_guiders,n=0,r=o.length;r>n;n++)e=o[n],e.block.attr("id")===t&&(i=e);return i},i.prototype.hide_all=function(){var t,e,i,n,r;for(n=this.ui_guiders,r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(t.hide());return r},i}(),window._UIGuidersCollection=i,window.UIGuidersCollection=new i});var disabled_buttons_captions;disabled_buttons_captions={},jQuery(function(t){return t(".sessionInfo").mouseenter(function(){return t(this).css("opacity",1)}),t(".sessionInfo").mouseleave(function(){return t(this).css("opacity",.5)}),t(".frontpage .sectionContainer").mouseenter(function(){return t(this).addClass("hover")}),t(".frontpage .sectionContainer").mouseleave(function(){return t(this).removeClass("hover")}),window.toggle_button_lock=function(e){return e.attr("disabled")?(e.val(disabled_buttons_captions[t(this).attr("id")]),e.removeAttr("disabled")):(e.parents("form").size()>0&&(disabled_buttons_captions[t(this).parents("form").attr("id")]=e.val()),e.attr("disabled",!0).val("Ждите..."))},t(".votes img.upvote").click(function(){return new Vote(this).upvote()}),t(".votes img.downvote").click(function(){return new Vote(this).downvote()}),t("form.new_answer textarea, form.edit_answer textarea").bind("focus",function(){return t(this).css("height","150px")}),t("form.new_answer").submit(function(){return(new Answer).save(this),!1}),t("form.edit_answer").bind("submit",function(){return new Answer(t(this).parents(".answer")).save(this),!1}),t(".answer .editAnswer").bind("click",function(){return t(this).parents(".actions").hide(),t(this).parents(".answer").find("form").show().focus()}),t(".answer .deleteAnswer").bind("click",function(){return confirm("Уверены?")?new Answer(t(this).parents(".answer"))["delete"]():void 0}),t(".answer .correctAnswer.unset").bind("click",function(){return new Answer(t(this).parents(".answer")).markAsCorrect()}),t(".btn.deleteQuestion").click(function(){return t("form.deleteQuestion").slideDown(),t(this).hide()}),t(".btn.deleteScreencast").click(function(){return t("form.deleteScreencast").slideDown(),t(this).hide()}),t(".question .showGuidelines").click(function(){return t(".question .guidelines").show()}),t(".answer .addComment").bind("click",function(){return Comment.build_form(t(this).parents(".answer"))}),t(".deleteComment").bind("click",function(){return confirm(t(".comments").attr("data-comment-delete-confirmation-text"))?Comment["delete"](t(this).parents(".comment")):void 0}),t("#subscribe_to_news").click(function(){var e;return e=t(this),t.ajax({url:"/users",data:{user:{notifications:{news:"1"}},authenticity_token:AUTH_TOKEN,_method:"patch"},dataType:"json",type:"post",success:function(t){return ButtonAnimation.stop(),FrontendNotifier.show(t),e.parents(".span4").hide()}})})});