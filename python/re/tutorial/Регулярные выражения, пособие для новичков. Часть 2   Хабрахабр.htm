
<!DOCTYPE html>
   
<html >
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    
    <meta name = "viewport" content = "width = 1080">
    
    <title>Регулярные выражения, пособие для новичков. Часть 2 / Хабрахабр</title>
    <meta name="description" content="В первой половине этого пособия мы раскрыли лишь малую часть возможностей регулярных выражений. Во второй, большей, половине мы рассмотрим некоторые новые метасимволы, то, как использовать группы..." />    
    <meta name="keywords" content="python, re, regular expressions, regexp, howto, регулярные выражения" />
    
    	<meta property="fb:app_id"      content="444736788986613" /> 
<meta property="og:type"        content="article" /> 
<meta property="og:url"         content="http://habrahabr.ru/post/115436/" /> 
<meta property="og:title"       content="Регулярные выражения, пособие для новичков. Часть 2" /> 
	
	<meta property="og:image"       content="http://habrahabr.ru/i/habralogo.jpg" />
	<link rel="image_src" href="http://habrahabr.ru/i/habralogo.jpg" />
<meta property="og:description" content="В первой половине этого пособия мы раскрыли лишь малую часть возможностей регулярных выражений. Во второй, большей, половине мы рассмотрим некоторые новые..." />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@habrahabr" />

    <script type="text/javascript">function adriver(a,b){};</script>
      <link href="/styles/1392889138/all.css" rel="stylesheet" media="all" />


      <link href="/styles/1392889138/_parts/posts.css" rel="stylesheet" media="all" />
  <link href="/styles/1392889138/_parts/comments.css" rel="stylesheet" media="all" />
  <link href="/styles/1392889138/forms.css" rel="stylesheet" media="all" />
  <link href="/styles/1392889138/highlight.css" rel="stylesheet" media="all" />
  
    <link href="/styles/1392889138/printer.css" rel="stylesheet" media="print" />

    
    

      <script type="text/javascript" src="/javascripts/1392889138/all.js"></script>
    
    
    

  
  
  
  
      <script type="text/javascript" src="/javascripts/1392889138/libs/jquery.form.js"></script>
  <script type="text/javascript" src="/javascripts/1392889138/libs/jquery.cookie.js"></script>
  <script type="text/javascript" src="/javascripts/1392889138/libs/wysiwyg.js"></script>
  <script type="text/javascript" src="/javascripts/1392889138/libs/highlight.js"></script>
  <script type="text/javascript" src="/javascripts/1392889138/libs/jquery-ui-highlight.js"></script>
  <script type="text/javascript" src="/javascripts/1392889138/_parts/posts.js"></script>
  <script type="text/javascript" src="/javascripts/1392889138/_parts/comments.js"></script>
  <script type="text/javascript" src="/javascripts/1392889138/posts/all.js"></script>



  	<script type='text/javascript'>
	  var crtg_nid="2580";
	  var crtg_cookiename="cto_rtt";
	  var crtg_varname="crtg_content";
	  function crtg_getCookie(c_name){
		  var i,x,y,ARRCookies=document.cookie.split(";");
		  for(i=0;i<ARRCookies.length;i++){
			  x=ARRCookies[i].substr(0,ARRCookies[i].indexOf("="));
			  y=ARRCookies[i].substr(ARRCookies[i].indexOf("=")+1);
			  x=x.replace(/^\s+|\s+$/g,"");
			  if(x==c_name){return unescape(y);}
		   }
		return'';
	   }
	var crtg_content = crtg_getCookie(crtg_cookiename);var crtg_rnd=Math.floor(Math.random()*99999999999);
		var crtg_url=location.protocol+'//rtax.criteo.com/delivery/rta/rta.js?netId='+escape(crtg_nid);crtg_url+='&cookieName='+escape(crtg_cookiename);crtg_url+='&rnd='+crtg_rnd;crtg_url+='&varName=' + escape(crtg_varname);
		var crtg_script=document.createElement('script');crtg_script.type='text/javascript';crtg_script.src=crtg_url;crtg_script.async=true;
		if(document.getElementsByTagName("head").length>0)document.getElementsByTagName("head")[0].appendChild(crtg_script);
		else
		if(document.getElementsByTagName("body").length>0)document.getElementsByTagName("body")[0].appendChild(crtg_script);
	</script>

      <script type="text/javascript" src="/javascripts/1392889138/adriver.core.2.js"></script>

    <link title="Хабрахабр / Комментарии к публикации «Регулярные выражения, пособие для новичков. Часть 2»" type="application/rss+xml" rel="alternate" href="http://habrahabr.ru/rss/post/115436/"/>
        
      <script type="text/javascript">
      var _gaq = window._gaq || [];
      window.onerror = function(msg, url, line) {
          //var preventErrorAlert = true;
          //_gaq.push(['_trackEvent', 'JS Error', msg, navigator.userAgent + ' -> ' + url + " : " + line]);
          //return preventErrorAlert;
      };
      
      jQuery.error = function (message) {
          _gaq.push(['_trackEvent', 'jQuery Error', message, navigator.userAgent]);
      }
      </script>
       
  </head>

  <body>
   <div class="wrapper">
      
      <div id="layout">
        <div id="header">
    <div class="userpanel silver">
          <div class="top">
            <a href="http://habrahabr.ru/users/zlodiak/" class="username dark">zlodiak</a>
                    <sup><a href="https://auth.habrahabr.ru/settings/upgrade/">read-only</a></sup>
				
        <a href="https://auth.habrahabr.ru/settings/" class="nav-settings">настройки</a>
        <a href="http://habrahabr.ru/logout/zlodiak/478187341/">выйти</a>
    </div>
    <div class="bottom">
        <a href="http://habrahabr.ru/tracker/">трекер</a>
        
        <a href="http://habrahabr.ru/users/zlodiak/favorites/">избранное</a>
                <a href="http://habrahabr.ru/sandbox/add/">получить инвайт</a>
    </div>
    <div class="charge" id="charge_string">

      </div>
  </div>
  <a class="logo " href="http://habrahabr.ru/feed/" title="На главную страницу"></a>
  <div class="search">
    <form id="search_form" name="search" method="get" action="//habrahabr.ru/search/" >
      <input type="submit" value="" />
      <input type="text" name="q" x-webkit-speech speech tabindex="1" >
    </form>
  </div>

	<div class="main_menu">
		<a href="http://habrahabr.ru/feed/">лента</a><a href="http://habrahabr.ru/posts/top/" class="active">посты</a><a href="http://toster.ru/?_aa=press_anykey">q&amp;a</a><a href="http://habrahabr.ru/events/coming/">события</a><a href="http://habrahabr.ru/hubs/">хабы</a><a href="http://habrahabr.ru/companies/">компании</a>
		<div class="banner_special">

		<script type="text/javascript">
			(function(){
				var custom = [];
				/* custom params */
					custom[1] = 'python';
				/* end of custom params */
				var std = {gender:100, age:101},i;for(i in std){try{custom[std[i]]=eval(i)}catch(e){} }
				custom.getStd = function(){for(var i=0,j,s=[];i<this.length;i++){if(this[i])s.push((!j?(j=1,i+'='):'')+escape(this[i]));else j=0}return s.length?'&custom='+s.join(';'):''};
				var RndNum4NoCash = Math.round(Math.random() * 1000000000), ar_Tail = escape(document.referrer || 'unknown');
				document.write('<iframe src="http://ad.adriver.ru/cgi-bin/erle.cgi?' + 'sid=176776&target=top&w=135&h=35&bt=25&pz=0&rnd=' +
				RndNum4NoCash + '&tail256=' + ar_Tail + custom.getStd() + '" frameborder=0 vspace=0 hspace=0 width=135 height=35 marginwidth=0'
				+ ' marginheight=0 scrolling=no></iframe>');
			})();
 		</script>
	

</div>
		
	</div>

</div>



        
        

	
  <div class="content_left">

	
<div id="global_notify">
		<div class="inner first" id="notification_4">
			<a href="#close" class="close" data-id="4" title="Закрыть уведомление">закрыть (3) </a>
			О, <a href="http://habrahabr.ru/info/help/other/#hotkeys">горячие клавиши</a> заработали!
		</div>
		<div class="inner hidden" id="notification_3">
			<a href="#close" class="close" data-id="3" title="Закрыть уведомление">закрыть (2) </a>
			В разделе <a href="http://habrahabr.ru/companies/">«Компании»</a> теперь можно быстро подписаться или отписаться от компании.
		</div>
		<div class="inner hidden" id="notification_2">
			<a href="#close" class="close" data-id="2" title="Закрыть уведомление">закрыть </a>
			В «Ленте» появилась вкладка «Всё». Теперь посты и вопросы из Q&A можно читать в одном потоке.
		</div>
</div>








	
  <div class="post translation shortcuts_item" id="post_115436">
  	<div class="published">20 марта 2011 в 19:46</div>  
    <h1 class="title">
	      
      


        <span class="post_title">Регулярные выражения, пособие для новичков. Часть 2</span>

			<span class="flag flag_translation">перевод</span>
			
			
			
			

  	</h1>
  	
  	<div class="hubs">
		<a href="http://habrahabr.ru/hub/python/" class="hub " title="Вы не подписаны на этот хаб" >Python</a><span class="profiled_hub" title="Профильный хаб">*</span>
</div>

  	
    <div class="content html_format">
      В <a href="http://habrahabr.ru/blogs/python/115825/">первой половине</a> этого пособия мы раскрыли лишь малую часть возможностей регулярных выражений. Во второй, большей, половине мы рассмотрим некоторые новые метасимволы, то, как использовать группы для получения частей совпавшего текста, разбивать строки, находить и замещать части текста. В конце немного поговорим о распространенных ошибках.<br/>
<a name="habracut"></a><br/>
<h4>Больше метасимволов</h4><br/>
Есть некоторые метасимволы, которые мы еще не изучили. Большинство из них будут рассмотрены в этом разделе.<br/>
<br/>
Некоторые из оставшихся метасимволов являются <i>утверждениями нулевого размера</i>. Они не вызывают движок для прохода по строке, они вообще не охватывают никаких символов, возможен просто успех или неудача. Например, <code>\b</code> это утверждение о том, что текущая позиция находится на границе (<i>boundary</i>) слова, при этом сам символ <code>\b</code> не изменяет позицию. Это означает, что утверждения нулевого размера никогда не должны повторяться, потому что, если они совпали один раз в данном месте, они, очевидно, будут соответствовать этому месту бесконечное число раз.<br/>
<br/>
<code>|</code><br/>
Соответствует оператору ИЛИ. Если А и В являются регулярными выражениями, то <code>A|B </code> будет соответствовать любая строка, которая соответствует А или В. Метасимвол <code>|</code> имеет очень низкий приоритет для того, чтобы заставить его работать разумно, когда вы чередуете несколько символов строки. Crow|Servo будет искать соответствие либо <code>Crow</code>, либо <code>Servo</code>, а не <code>Cro('w' или 'S')ervo</code>.<br/>
<br/>
<code>^</code><br/>
Ищет соответствие только в начале строки. Если включен флаг <code>MULTILINE</code>, как говорилось в прошлой части, то происходит сравнение и для каждой части после символа новой строки.<br/>
<br/>
Например, если вы хотите найти только те строки, у которых в начале имеется <code>From</code>, то в регулярном выражении записывается <code>^From</code>:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;<font color="#dc143c">re</font>.<font>search</font><font>(</font><font color="#483d8b">'^From'</font>,&nbsp;<font color="#483d8b">'From&nbsp;Here&nbsp;to&nbsp;Eternity'</font><font>)</font><br/>
<font color="#66cc66">&lt;</font>_sre.<font>SRE_Match</font>&nbsp;<font color="#008000">object</font>&nbsp;at&nbsp;0x...<font color="#66cc66">&gt;</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;<font color="#dc143c">re</font>.<font>search</font><font>(</font><font color="#483d8b">'^From'</font>,&nbsp;<font color="#483d8b">'Reciting&nbsp;From&nbsp;Memory'</font><font>)</font><br/>
<font color="#008000">None</font></blockquote><br/>
<br/>
<code>$</code><br/>
То же, что <code>^</code>, но в конце строки, которая определяется либо, собственно по концу строки как таковому, либо по символу новой строки.<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;<font color="#dc143c">re</font>.<font>search</font><font>(</font><font color="#483d8b">'}$'</font>,&nbsp;<font color="#483d8b">'{block}'</font><font>)</font><br/>
<font color="#66cc66">&lt;</font>_sre.<font>SRE_Match</font>&nbsp;<font color="#008000">object</font>&nbsp;at&nbsp;0x...<font color="#66cc66">&gt;</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;<font color="#dc143c">re</font>.<font>search</font><font>(</font><font color="#483d8b">'}$'</font>,&nbsp;<font color="#483d8b">'{block}&nbsp;'</font><font>)</font><br/>
<font color="#008000">None</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;<font color="#dc143c">re</font>.<font>search</font><font>(</font><font color="#483d8b">'}$'</font>,&nbsp;<font color="#483d8b">'{block}<font color="#000099">\n</font>'</font><font>)</font><br/>
<font color="#66cc66">&lt;</font>_sre.<font>SRE_Match</font>&nbsp;<font color="#008000">object</font>&nbsp;at&nbsp;0x...<font color="#66cc66">&gt;</font></blockquote><br/>
<br/>
<code>\A</code><br/>
Совпадение только в начале строки, то есть тоже, что <code>^</code>, но не зависит от флага <code>MULTILINE</code><br/>
<br/>
<code>\Z</code><br/>
Совпадение только в конце строки, то есть тоже, что <code>$</code>, но не зависит от флага <code>MULTILINE</code><br/>
<br/>
<code>\b</code><br/>
Граница слова. Слово определяется как последовательность символов чисел и/или букв, так что границы слова представляют пробелы или любые символы, не относящиеся к перечисленным.<br/>
<br/>
Следующий пример ищет слово <code>class</code> только когда это отдельное слово. Если оно содержится внутри другого слова, соответствия не находится:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>r<font color="#483d8b">'<font color="#000099">\b</font>class<font color="#000099">\b</font>'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;p.<font>search</font><font>(</font><font color="#483d8b">'no&nbsp;class&nbsp;at&nbsp;all'</font><font>)</font><br/>
<font color="#66cc66">&lt;</font>_sre.<font>SRE_Match</font>&nbsp;<font color="#008000">object</font>&nbsp;at&nbsp;0x...<font color="#66cc66">&gt;</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;p.<font>search</font><font>(</font><font color="#483d8b">'the&nbsp;declassified&nbsp;algorithm'</font><font>)</font><br/>
<font color="#008000">None</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;p.<font>search</font><font>(</font><font color="#483d8b">'one&nbsp;subclass&nbsp;is'</font><font>)</font><br/>
<font color="#008000">None</font></blockquote><br/>
<br/>
Есть две тонкости, которые вы должны помнить при использовании этой специальной последовательности. Во-первых, это одно из худших столкновений между строковыми литералами Python и последовательностями регулярных выражений: в строковых литералах Python, <code>\b</code> это символ backspace, ASCII значение 8. Если не использовать «сырые» строки, Python будет конвертировать <code>\b</code> в backspace, и ваше регулярное выражение будет не таким, как задумано:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font><font color="#483d8b">'<font color="#000099">\b</font>class<font color="#000099">\b</font>'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;p.<font>search</font><font>(</font><font color="#483d8b">'no&nbsp;class&nbsp;at&nbsp;all'</font><font>)</font><br/>
<font color="#008000">None</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;p.<font>search</font><font>(</font><font color="#483d8b">'<font color="#000099">\b</font>'</font>&nbsp;+&nbsp;<font color="#483d8b">'class'</font>&nbsp;+&nbsp;<font color="#483d8b">'<font color="#000099">\b</font>'</font><font>)</font><br/>
<font color="#66cc66">&lt;</font>_sre.<font>SRE_Match</font>&nbsp;<font color="#008000">object</font>&nbsp;at&nbsp;0x...<font color="#66cc66">&gt;</font></blockquote><br/>
<br/>
Во-вторых, внутри класса символов нельзя использовать данное сочетание, потому как сочетание <code>\b</code> для совместимости со строковыми литералами Python представляет символ backspace.<br/>
<br/>
\B<br/>
Противоположное предыдущему сочетание, соответствующая текущей позиции не на границе слова.<br/>
<br/>
<h4>Группировка</h4><br/>
Часто необходимо получить больше информации, чем просто узнать, находит ли РВ соответствие или нет. Регулярные выражения часто используются для разрезания строк написанием регулярных выражений, разделенных на несколько подгрупп, которые соответствуют различным компонентам запроса. Например, в стандарте RFC-822 в заголовке имеются различные поля, разделенные двоеточием:<br/>
<br/>
<code>From: author@example.com
User-Agent: Thunderbird 1.5.0.9 (X11/20061227)
MIME-Version: 1.0
To: editor@example.com</code><br/>
<br/>
Это может быть обработано написанием регулярного выражения, которое соответствует всей строке заголовка, и в нем есть одна группа, которая соответствует имени заголовка, и другая группа, которая соответствует значению заголовка.<br/>
<br/>
Группы обозначаются метасимволами в виде круглых скобок <code>'(', ')'</code>. <code>'('</code> и <code>')'</code> имеют такой же смысл, как в математических выражениях; они группируют вместе выражения, содержащиеся в них, и вы можете повторять содержание группы повторяющими квалификаторами, такими как <code>*, +,  ?</code> и <code>{m, n}</code>. Например, <code>(ab)*</code> будет соответствовать нулю или более повторений <code>ab</code>.<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font><font color="#483d8b">'(ab)*'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;p.<font>match</font><font>(</font><font color="#483d8b">'ababababab'</font><font>)</font>.<font>span</font><font>(</font><font>)</font><br/>
<font>(</font><font color="#ff4500">0</font>,&nbsp;<font color="#ff4500">10</font><font>)</font></blockquote><br/>
<br/>
Группы, определяемые скобками, также захватывают начальные и конечные индексы совпадающего текста; это может быть получено передачей аргумента <code>group(), start(), end()</code> и <code>span()</code>. Группы нумеруются, начина с 0. Группа 0 имеется всегда, это само регулярное выражение целиком, так что методы <code>MatchObject</code> всегда содержат 0 как аргумент по умолчанию:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font><font color="#483d8b">'(a)b'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m&nbsp;=&nbsp;p.<font>match</font><font>(</font><font color="#483d8b">'ab'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m.<font>group</font><font>(</font><font>)</font><br/>
<font color="#483d8b">'ab'</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m.<font>group</font><font>(</font><font color="#ff4500">0</font><font>)</font><br/>
<font color="#483d8b">'ab'</font></blockquote><br/>
<br/>
Подгруппы нумеруются слева направо, от 1 и далее. Группы могут быть вложенными; для того чтобы определить число вложений, просто подсчитываем слева направо символы открывающей скобки:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font><font color="#483d8b">'(a(b)c)d'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m&nbsp;=&nbsp;p.<font>match</font><font>(</font><font color="#483d8b">'abcd'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m.<font>group</font><font>(</font><font color="#ff4500">0</font><font>)</font><br/>
<font color="#483d8b">'abcd'</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m.<font>group</font><font>(</font><font color="#ff4500">1</font><font>)</font><br/>
<font color="#483d8b">'abc'</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m.<font>group</font><font>(</font><font color="#ff4500">2</font><font>)</font><br/>
<font color="#483d8b">'b'</font></blockquote><br/>
<br/>
<code>group()</code> может принять одновременно несколько номеров групп в одном запросе, и будет возвращен кортеж, содержащий значения для соответствующих групп:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m.<font>group</font><font>(</font><font color="#ff4500">2</font>,<font color="#ff4500">1</font>,<font color="#ff4500">2</font><font>)</font><br/>
<font>(</font><font color="#483d8b">'b'</font>,&nbsp;<font color="#483d8b">'abc'</font>,&nbsp;<font color="#483d8b">'b'</font><font>)</font></blockquote><br/>
<br/>
Метод <code>groups()</code> возвращает кортеж строк для всех подгрупп, начиная с 1-ой:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m.<font>groups</font><font>(</font><font>)</font><br/>
<font>(</font><font color="#483d8b">'abc'</font>,&nbsp;<font color="#483d8b">'b'</font><font>)</font></blockquote><br/>
<br/>
Обратные ссылки в шаблоне позволяют вам указать, что содержание ранее захваченной группы также должно быть найдено в текущей позиции строки. Например, <code>\1</code> соответствует тому, что содержание группы 1 в точности повторяется в текущей позиции. <br/>
<br/>
Например, следующее РВ обнаруживает в строке дважды подряд повторяющиеся слова:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>r<font color="#483d8b">'(<font color="#000099">\b</font><font color="#000099">\w</font>+)<font color="#000099">\s</font>+<font color="#000099">\1</font>'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>search</font><font>(</font><font color="#483d8b">'Paris&nbsp;in&nbsp;the&nbsp;the&nbsp;spring'</font><font>)</font>.<font>group</font><font>(</font><font>)</font><br/>
<font color="#483d8b">'the&nbsp;the'</font></blockquote><br/>
<br/>
Обратные ссылки, такие, как эта, не часто бывают полезны для поиска по строке, но вы скоро узнаете, что они очень полезны при выполнении замены строки.<br/>
<br/>
<h5>Группы с захватом содержимого и именованные группы</h5><br/>
Регулярные выражения могут использовать множество групп, как для захвата необходимой подстроки, так и для группировки и структурирования самих РВ. В сложных регулярных выражениях становится трудно отслеживать номера групп. Есть две особенности, которые помогают справиться с этой проблемой. Обе из них используют общий синтаксис для расширения регулярных выражений, который мы поэтому и рассмотрим сначала.<br/>
<br/>
В Perl 5 было добавлено несколько дополнительных функций для стандартных регулярных выражений, и модуль <code>re</code> поддерживает большинство из них. Было бы сложно выбрать новые односимвольные метасимволы или новые последовательности с бэкслешем, для того чтобы представить новые особенности так, чтобы регулярные выражения Perl без путаницы отличались от стандартных регулярных выражений. Если выбрать в качестве нового метасимвола, например, <code>&</code>, то старые регулярные выражения принимали бы его как обычный символ и нельзя было бы экранировать его <code>\&</code> или <code>[&]</code>.<br/>
<br/>
Решение, выбранное разработчиками Perl состояло в том, чтобы использовать в качестве расширения синтаксиса <code>(?...)</code>. Знак вопроса после скобки в случае обычного РВ это синтаксическая ошибка, поскольку <code>?</code> нечего повторять, так что это не приводит к каким-либо проблемам в совместимости. Символы сразу после <code>?</code> показывают какое расширение используется, так <code>(?=foo)</code> это одно (положительное утверждение о предпросмотре), а <code>(?:foo)</code> это что-то другое (группа без захвата содержимого, включающая подвыражение <code>foo</code>).<br/>
<br/>
К расширенному синтаксису Perl в Python добавляется собственное расширение. Если первый символ после знака вопроса <code>P</code>, то это означает что используется расширение, специфичное для Python. В настоящее время существуют два таких расширения: (<code>?P&lt;some_name&gt;...</code> )определяет именованную группу, а (<code>?P=some_name</code>) служит для нее обратной ссылкой. Если в будущих версиях Perl 5 добавятся аналогичные возможности, использующие другой синтаксис, модуль <code>re</code> будет изменен для поддержки нового синтаксиса, сохраняя при этом для совместимости Python-синтаксис.<br/>
<br/>
Иногда вам нужно использовать группу для сбора части регулярного выражения, но вы не заинтересованы в извлечении содержимого группы. Вы можете сделать это, используя группу без захвата содержимого: <code>(?:...)</code>, где вы можете заменить <code>...</code> любым другим регулярным выражением:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font>match</font><font>(</font><font color="#483d8b">&quot;([abc])+&quot;</font>,&nbsp;<font color="#483d8b">&quot;abc&quot;</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m.<font>groups</font><font>(</font><font>)</font><br/>
<font>(</font><font color="#483d8b">'c'</font>,<font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font>match</font><font>(</font><font color="#483d8b">&quot;(?:[abc])+&quot;</font>,&nbsp;<font color="#483d8b">&quot;abc&quot;</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m.<font>groups</font><font>(</font><font>)</font><br/>
<font>(</font><font>)</font></blockquote><br/>
<br/>
За исключением того, что вы не получаете содержимого того, с чем совпала группа, эти группы ведут себя также, как и обычные; вы можете в них поместить что угодно, повторить с помощью соответствующего символа, такого как <code>*</code>, и вставить их в другие группы (собирающие данные или нет).<br/>
<br/>
Более важной особенностью являются именованные группы: вместо ссылки на них по номерам, на эти группы можно ссылаться по имени.<br/>
<br/>
Синтаксис именованных групп это одно из специфичных Python-расширений: <code>(?P&lt;some_name&gt;...)</code>. Именованные группы ведут себя в точности как обычные, но вдобавок к этому ассоциируются с каким-то именем. Методы <code>MatchObject</code>, которые использовались для обычных групп принимают как числа, ссылающиеся на номер группы, так и строки, содержащие имя необходимой группы. То есть именованные группы все также принимают и числа, так что вы можете получить информацию о группе двумя способами:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>r<font color="#483d8b">'(?P&lt;word&gt;<font color="#000099">\b</font><font color="#000099">\w</font>+<font color="#000099">\b</font>)'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m&nbsp;=&nbsp;p.<font>search</font><font>(</font>&nbsp;<font color="#483d8b">'((((&nbsp;Lots&nbsp;of&nbsp;punctuation&nbsp;)))'</font>&nbsp;<font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m.<font>group</font><font>(</font><font color="#483d8b">'word'</font><font>)</font><br/>
<font color="#483d8b">'Lots'</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;m.<font>group</font><font>(</font><font color="#ff4500">1</font><font>)</font><br/>
<font color="#483d8b">'Lots'</font></blockquote><br/>
<br/>
Именованные группы удобны тем, что они позволяют использовать вместо цифр легко запоминающиеся имена. Вот пример регулярного выражения из модуля <code>imaplib</code>:<br/>
<br/>
<blockquote>InternalDate&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>r<font color="#483d8b">'INTERNALDATE&nbsp;&quot;'</font><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r<font color="#483d8b">'(?P&lt;day&gt;[&nbsp;123][0-9])-(?P&lt;mon&gt;[A-Z][a-z][a-z])-'</font><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r<font color="#483d8b">'(?P&lt;year&gt;[0-9][0-9][0-9][0-9])'</font><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r<font color="#483d8b">'&nbsp;(?P&lt;hour&gt;[0-9][0-9]):(?P&lt;min&gt;[0-9][0-9]):(?P&lt;sec&gt;[0-9][0-9])'</font><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r<font color="#483d8b">'&nbsp;(?P&lt;zonen&gt;[-+])(?P&lt;zoneh&gt;[0-9][0-9])(?P&lt;zonem&gt;[0-9][0-9])'</font><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r<font color="#483d8b">'&quot;'</font><font>)</font></blockquote><br/>
<br/>
Синтаксис обратных ссылок в регулярном выражение типа <code>(...)\1</code> ссылается на номер группы. Более естественно было бы использовать вместо номеров имена групп. Другое Python расширение: <code>(?P=name)</code> показывает, что содержимое названной группы снова должно быть сопоставлено в текущей позиции. Наше прежнее регулярное выражение для поиска дублирующихся слов, <code>(\b\w+)\s+\1</code> может быть также записано как <code>(?P&lt;doble_word&gt;\b\w+)\s+(?P=doble_word)</code>:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>r<font color="#483d8b">'(?P&lt;word&gt;<font color="#000099">\b</font><font color="#000099">\w</font>+)<font color="#000099">\s</font>+(?P=word)'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>search</font><font>(</font><font color="#483d8b">'Paris&nbsp;in&nbsp;the&nbsp;the&nbsp;spring'</font><font>)</font>.<font>group</font><font>(</font><font>)</font><br/>
<font color="#483d8b">'the&nbsp;the'</font></blockquote><br/>
<br/>
<h5>Опережающие проверки</h5><br/>
Проверки доступны в позитивной и негативной (ретроспективной) форме, и выглядят так:<br/>
<br/>
<code>(?=...)</code><br/>
Положительная проверка. Соответствует случаю, когда содержащееся выражение, представленное здесь как <code>...</code>, соответствует текущей позиции. Но, после того как содержащееся выражение было опробовано, сравнивающий движок не продвигается далее; остаток шаблона сравнивается далее справа от того места, где начинается утверждение.<br/>
<br/>
<code>(?!...)</code><br/>
Отрицательное проверка соответствует случаю, когда содержащиеся выражение не соответствует текущей позиции строки.<br/>
<br/>
Для конкретики, рассмотрим случай, в котором полезен предпросмотр. Рассмотрим простой шаблон для сравнения имени файла и разбиения его на части: само имя и расширение, отделенные друг от друга точкой.<br/>
<br/>
Шаблон для такого сравнения довольно прост:<br/>
<br/>
<code>.*[.].*$</code><br/>
<br/>
Отметим, что символ <code>.</code> требует специальных скобок, поскольку сама точка является метасимволом, что видно в этом же выражении. Также отметим заключительный $; он добавлен для того, чтобы обеспечить включение в расширение всего остатка строки.<br/>
<br/>
Теперь, рассмотрим проблему немного шире; что, если вы хотите сравнить имена всех файлов, у которых расширение не <code>bat</code>? Несколько неверных попыток:<br/>
<br/>
<code>.*[.][^b].*$</code><br/>
Первая попытка состоит в том, чтобы исключить <code>bat</code> требованием, чтобы первый символ расширение был не <code>b</code>. Это неправильно, потому что шаблон также исключит <code>foo.bar</code>.<br/>
<br/>
<code>.*[.]([^b]..|.[^a].|..[^t])$</code><br/>
Выражение получится еще неряшливее, когда вы решите подправить первое решение отдельным заданием нужных символов: первый символ расширения должен быть не b; второй — не a; третий — не t. Это позволит включить <code>foo.bar</code> и отклонить <code>autoexec.bat</code>, но требует расширения из трех букв и не будет работать с двухсимвольными расширениями имен файлов, наприме <code>sendmail.cf</code>. Тогда нам придется снова усложнить шаблон, чтобы решить эту проблему:<br/>
<br/>
<code>.*[.]([^b].?.?|.[^a]?.?|..?[^t]?)$</code><br/>
В третьей попытке, вторая и третья буквы для того, чтобы позволить сравнение расширений, короче чем три символа, сделаны необязательными.<br/>
<br/>
Шаблон теперь действительно готов, его сложно читать и понимать. Еще хуже, если изменится проблема и вам нужно будет исключить и bat, и exe расширения, шаблон станет еще более сложным и запутанным.<br/>
<br/>
Негативная опережающая проверка решает все эти затруднения:<br/>
<br/>
<code>.*[.](?!bat$).*$</code><br/>
Отрицательный предпросмотр означает: если выражение <code>bat</code> не соответствует данной позиции, сравнить остаток шаблона; если обнаружено соответствие <code>bat$</code>, то весь шаблон нам не подходит. Заключающий выражение знак <code>$</code> нужен для того, чтобы было разрешено и такое выражение, как <code>sample.batch</code>.<br/>
<br/>
Исключить другое расширение теперь тоже легко; просто добавляем его как альтернативное в том же утверждении. Следующий шаблон исключает имена файлов, которые заканчиваются расширением <code>bat</code> или <code>exe</code>:<br/>
<br/>
<code>.*[.](?!bat$|exe$).*$</code><br/>
<br/>
<h4>Изменение строк</h4><br/>
До этого момента, мы просто выполняли поиск по статической строке. Регулярные выражения также часто используется для изменения строк различными способами, используя следующие методы шаблонов:<br/>
<br/>
<table>
<tr>
<td><b>Метод/атрибут</b></td>
<td><b>Цель</b></td>
</tr>
<tr>
<td>split()</td>
<td>Разбить строку в список там, где есть совпадение РВ</td>
</tr>
<tr>
<td>sub()</td>
<td>Найти все подстроки совпадений с РВ и заменить их другой строкой</td>
</tr>
<tr>
<td>subn()</td>
<td>Делает то же, что и sub(), но возвращает новую строку и число замещений</td>
</tr>
</table><br/>
<br/>
<h5>Разбиение строк</h5><br/>
Метод шаблона <code>split()</code> разбивает строку на части там, где есть совпадение РВ, возвращая список частей. Это похоже на строковый метод <code>split()</code>, но обеспечивает всеобщность в разделителях, по которым происходит разбиение; обычный <code>split()</code> обеспечивает разбиение только по whitespace-символам или фиксированной строке. Как и следовало ожидать, существует и модульная функция <code>re.split()</code>.<br/>
<br/>
<b>.split(string[, maxsplit=0])</b><br/>
Разбивает строку по совпадениям с регулярным выражением. Если в РВ имеются захватывающие скобки, то их содержание также будет возвращаться как часть полученного списка. Если <code>maxsplit</code> не ноль, выполняется не более, чем <code>maxsplit</code> разбиений, остаток строки будет возвращен как последний элемент списка.<br/>
<br/>
В следующем примере разделителем является любая последовательность небуквенно-цифровых символов.<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>r<font color="#483d8b">'<font color="#000099">\W</font>+'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>split</font><font>(</font><font color="#483d8b">'This&nbsp;is&nbsp;a&nbsp;test,&nbsp;short&nbsp;and&nbsp;sweet,&nbsp;of&nbsp;split().'</font><font>)</font><br/>
<font>[</font><font color="#483d8b">'This'</font>,&nbsp;<font color="#483d8b">'is'</font>,&nbsp;<font color="#483d8b">'a'</font>,&nbsp;<font color="#483d8b">'test'</font>,&nbsp;<font color="#483d8b">'short'</font>,&nbsp;<font color="#483d8b">'and'</font>,&nbsp;<font color="#483d8b">'sweet'</font>,&nbsp;<font color="#483d8b">'of'</font>,&nbsp;<font color="#483d8b">'split'</font>,&nbsp;<font color="#483d8b">''</font><font>]</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>split</font><font>(</font><font color="#483d8b">'This&nbsp;is&nbsp;a&nbsp;test,&nbsp;short&nbsp;and&nbsp;sweet,&nbsp;of&nbsp;split().'</font>,&nbsp;<font color="#ff4500">3</font><font>)</font><br/>
<font>[</font><font color="#483d8b">'This'</font>,&nbsp;<font color="#483d8b">'is'</font>,&nbsp;<font color="#483d8b">'a'</font>,&nbsp;<font color="#483d8b">'test,&nbsp;short&nbsp;and&nbsp;sweet,&nbsp;of&nbsp;split().'</font><font>]</font></blockquote><br/>
<br/>
Иногда вы заинтересованы не только в том, какой текст был между разделителями, но также должны знать, какой разделитель использовался. Если в РВ есть захватывающие скобки, то и эти значения также возвращаются, как часть списка. Сравните:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>r<font color="#483d8b">'<font color="#000099">\W</font>+'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p2&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>r<font color="#483d8b">'(<font color="#000099">\W</font>+)'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>split</font><font>(</font><font color="#483d8b">'This...&nbsp;is&nbsp;a&nbsp;test.'</font><font>)</font><br/>
<font>[</font><font color="#483d8b">'This'</font>,&nbsp;<font color="#483d8b">'is'</font>,&nbsp;<font color="#483d8b">'a'</font>,&nbsp;<font color="#483d8b">'test'</font>,&nbsp;<font color="#483d8b">''</font><font>]</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p2.<font>split</font><font>(</font><font color="#483d8b">'This...&nbsp;is&nbsp;a&nbsp;test.'</font><font>)</font><br/>
<font>[</font><font color="#483d8b">'This'</font>,&nbsp;<font color="#483d8b">'...&nbsp;'</font>,&nbsp;<font color="#483d8b">'is'</font>,&nbsp;<font color="#483d8b">'&nbsp;'</font>,&nbsp;<font color="#483d8b">'a'</font>,&nbsp;<font color="#483d8b">'&nbsp;'</font>,&nbsp;<font color="#483d8b">'test'</font>,&nbsp;<font color="#483d8b">'.'</font>,&nbsp;<font color="#483d8b">''</font><font>]</font></blockquote><br/>
<br/>
Функция модуля <code>re.split()</code> в качестве первого аргумента забирает РВ, а в остальном ведет себя также:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#dc143c">re</font>.<font>split</font><font>(</font><font color="#483d8b">'[<font color="#000099">\W</font>]+'</font>,&nbsp;<font color="#483d8b">'Words,&nbsp;words,&nbsp;words.'</font><font>)</font><br/>
<font>[</font><font color="#483d8b">'Words'</font>,&nbsp;<font color="#483d8b">'words'</font>,&nbsp;<font color="#483d8b">'words'</font>,&nbsp;<font color="#483d8b">''</font><font>]</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#dc143c">re</font>.<font>split</font><font>(</font><font color="#483d8b">'([<font color="#000099">\W</font>]+)'</font>,&nbsp;<font color="#483d8b">'Words,&nbsp;words,&nbsp;words.'</font><font>)</font><br/>
<font>[</font><font color="#483d8b">'Words'</font>,&nbsp;<font color="#483d8b">',&nbsp;'</font>,&nbsp;<font color="#483d8b">'words'</font>,&nbsp;<font color="#483d8b">',&nbsp;'</font>,&nbsp;<font color="#483d8b">'words'</font>,&nbsp;<font color="#483d8b">'.'</font>,&nbsp;<font color="#483d8b">''</font><font>]</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#dc143c">re</font>.<font>split</font><font>(</font><font color="#483d8b">'[<font color="#000099">\W</font>]+'</font>,&nbsp;<font color="#483d8b">'Words,&nbsp;words,&nbsp;words.'</font>,&nbsp;<font color="#ff4500">1</font><font>)</font><br/>
<font>[</font><font color="#483d8b">'Words'</font>,&nbsp;<font color="#483d8b">'words,&nbsp;words.'</font><font>]</font></blockquote><br/>
<br/>
<h5>Поиск и замена</h5><br/>
Другая распространенная задача — найти все совпадения с шаблоном и заменить их другой строкой. Метод <code>sub()</code> берет в качестве аргументов значение замещающей части (которая может быть как строкой, так и функцией) и строку, которая должна быть обработана.<br/>
<br/>
<b>.sub(replacement, string[, count=0])</b><br/>
Возвращает строку, получающуюся при замене. Если шаблон не найден строка возвращается неизменной.<br/>
<br/>
Добавочный аргумент <code>count</code> это максимальное число замещаемых совпадений.<br/>
<br/>
Простой пример использования метода <code>sub()</code>. Названия цветов замещаются словом <code>colour</code>:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>&nbsp;<font color="#483d8b">'(blue|white|red)'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>sub</font><font>(</font><font color="#483d8b">'colour'</font>,&nbsp;<font color="#483d8b">'blue&nbsp;socks&nbsp;and&nbsp;red&nbsp;shoes'</font><font>)</font><br/>
<font color="#483d8b">'colour&nbsp;socks&nbsp;and&nbsp;colour&nbsp;shoes'</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>sub</font><font>(</font><font color="#483d8b">'colour'</font>,&nbsp;<font color="#483d8b">'blue&nbsp;socks&nbsp;and&nbsp;red&nbsp;shoes'</font>,&nbsp;count=<font color="#ff4500">1</font><font>)</font><br/>
<font color="#483d8b">'colour&nbsp;socks&nbsp;and&nbsp;red&nbsp;shoes'</font></blockquote><br/>
<br/>
Метод subn() делает то же самое, но возвращает кортеж, содержащий новую строку и число произведенных замен:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>&nbsp;<font color="#483d8b">'(blue|white|red)'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>subn</font><font>(</font>&nbsp;<font color="#483d8b">'colour'</font>,&nbsp;<font color="#483d8b">'blue&nbsp;socks&nbsp;and&nbsp;red&nbsp;shoes'</font><font>)</font><br/>
<font>(</font><font color="#483d8b">'colour&nbsp;socks&nbsp;and&nbsp;colour&nbsp;shoes'</font>,&nbsp;<font color="#ff4500">2</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>subn</font><font>(</font>&nbsp;<font color="#483d8b">'colour'</font>,&nbsp;<font color="#483d8b">'no&nbsp;colours&nbsp;at&nbsp;all'</font><font>)</font><br/>
<font>(</font><font color="#483d8b">'no&nbsp;colours&nbsp;at&nbsp;all'</font>,&nbsp;<font color="#ff4500">0</font><font>)</font></blockquote><br/>
<br/>
Пустые совпадения заменяются только тогда, когда они не смежны с предыдущим совпадением:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font><font color="#483d8b">'x*'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>sub</font><font>(</font><font color="#483d8b">'-'</font>,&nbsp;<font color="#483d8b">'abxd'</font><font>)</font><br/>
<font color="#483d8b">'-a-b-d-'</font></blockquote><br/>
<br/>
Если заместителем служит строка, то в ней поддерживаются символы экранирования. Так, <code>\n</code> это одиночный символ новой строки, <code>\r</code> это возврат каретки и так далее. Обратные ссылки, такие как <code>\6</code> замещаются подстрокой, совпавшей с соответствующей группой в РВ. Это позволяет вам включать части оригинального текста в результат замены строки.<br/>
<br/>
Пример соответствует слову <code>section</code> в части строки, предшествующей части в фигурных скобках <code>{, }</code>, и заменяет <code>section</code> на <code>subsection</code>:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font><font color="#483d8b">'section{&nbsp;(&nbsp;[^}]*&nbsp;)&nbsp;}'</font>,&nbsp;<font color="#dc143c">re</font>.<font>VERBOSE</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>sub</font><font>(</font>r<font color="#483d8b">'subsection{<font color="#000099">\1</font>}'</font>,<font color="#483d8b">'section{First}&nbsp;section{second}'</font><font>)</font><br/>
<font color="#483d8b">'subsection{First}&nbsp;subsection{second}'</font></blockquote><br/>
<br/>
Также имеется возможность ссылаться на именованные группы. Для этого используется последовательность <code>\g&lt;...&gt;</code>, где в качестве <code>...</code> может выступать номер или имя группы.<code> \g&lt;2&gt;</code> это эквивалент <code>\2</code>, но он не двусмыслен в таких заместителях, как <code>\g&lt;2&gt;0</code>. (<code>\20</code> будет интерпретироваться как ссылка на группу 20, а не как вторую группу с последующим литералом '0'.) Следующие операции эквиваленты, но используют три различных способа:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font><font color="#483d8b">'section{&nbsp;(?P&lt;name&gt;&nbsp;[^}]*&nbsp;)&nbsp;}'</font>,&nbsp;<font color="#dc143c">re</font>.<font>VERBOSE</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>sub</font><font>(</font>r<font color="#483d8b">'subsection{<font color="#000099">\1</font>}'</font>,<font color="#483d8b">'section{First}'</font><font>)</font><br/>
<font color="#483d8b">'subsection{First}'</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>sub</font><font>(</font>r<font color="#483d8b">'subsection{<font color="#000099">\g</font>&lt;1&gt;}'</font>,<font color="#483d8b">'section{First}'</font><font>)</font><br/>
<font color="#483d8b">'subsection{First}'</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>sub</font><font>(</font>r<font color="#483d8b">'subsection{<font color="#000099">\g</font>&lt;name&gt;}'</font>,<font color="#483d8b">'section{First}'</font><font>)</font><br/>
<font color="#483d8b">'subsection{First}'</font></blockquote><br/>
<br/>
Заместитель также может быть и функцией, дающем вам больше возможностей управления. Если это так, функция вызывается для каждого случая неперекрытия шаблона. При каждом вызове функции передается в качестве аргумента <code>MatchObject</code>.<br/>
<br/>
В следующем примере функция замены переводит десятичные числа в шестнадцатеричные:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">def</font>&nbsp;hexrepl<font>(</font>&nbsp;match&nbsp;<font>)</font>:<br/>
...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#483d8b">&quot;Return&nbsp;the&nbsp;hex&nbsp;string&nbsp;for&nbsp;a&nbsp;decimal&nbsp;number&quot;</font><br/>
...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font>value</font>&nbsp;=&nbsp;<font color="#008000">int</font><font>(</font>&nbsp;match.<font>group</font><font>(</font><font>)</font>&nbsp;<font>)</font><br/>
...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ff7700">return</font>&nbsp;<font color="#008000">hex</font><font>(</font>value<font>)</font><br/>
…<br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>r<font color="#483d8b">'<font color="#000099">\d</font>+'</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;p.<font>sub</font><font>(</font>hexrepl,&nbsp;<font color="#483d8b">'Call&nbsp;65490&nbsp;for&nbsp;printing,&nbsp;49152&nbsp;for&nbsp;user&nbsp;code.'</font><font>)</font><br/>
<font color="#483d8b">'Call&nbsp;0xffd2&nbsp;for&nbsp;printing,&nbsp;0xc000&nbsp;for&nbsp;user&nbsp;code.'</font></blockquote><br/>
<br/>
<h4>Общие проблемы</h4><br/>
Регулярные выражения это мощный инструмент для некоторых применений, но в некоторых отношениях их поведение не интуитивно, а иногда они не ведут себя так, как вы ожидаете от них. В этом разделе будет указано на некоторые из наиболее распространенных ошибок.<br/>
<br/>
<h5>Использование строковых методов</h5><br/>
Иногда использование модуля <code>re</code> это ошибка. Если вы ищете фиксированную строку или одиночный символ, и вам не нужно использовать никаких особенностей <code>re</code>, то и вся мощь регулярных выражения для этого не требуется. У строк есть несколько методов для операций с фиксированными строками и они обычно гораздо быстрее, потому что оптимизированы для этой цели.<br/>
<br/>
Представим, нужно заменить одну фиксированную строку другой, например, заменить слово <code>word</code> словом <code>deed</code>. Здесь, конечно, подойдет функция <code>re.sub()</code>, но рассмотрим строковый метод <code>replace()</code>. Отметим, что <code>replace()</code> будет также заменять <code>word</code> внутри слов, меняя <code>swordfish</code> на <code>sdeedfish</code>, но и простецкое регулярное выражение будет делать это то же. (Чтобы избежать выполнения замещения на части слов, шаблон должен содержать <code>\bword\b</code>).<br/>
<br/>
Другая распространенная задача это удаление одиночного символа из строки или замена его другим символом. Вы можете сделать это чем-то вроде <code>re.sub('\n', '  ', S)</code>, но метод <a href="http://docs.python.org/library/stdtypes.html#str.translate">translate()</a> справится с обеими задачами и сделает это быстрее, чем любое регулярное выражение.<br/>
<br/>
Короче говоря, прежде чем использовать модуль <code>re</code>, посмотрите, может ли проблема быть решена более быстрыми и простыми методами строк.<br/>
<br/>
<h5>match() в сравнении с search()</h5><br/>
Функция <code>match()</code> ищет соответствие РВ в начале строки, тогда как <code>search()</code> ищет соответствие во всей строке. Важно иметь в виду это различие:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;<font color="#dc143c">re</font>.<font>match</font><font>(</font><font color="#483d8b">'super'</font>,&nbsp;<font color="#483d8b">'superstition'</font><font>)</font>.<font>span</font><font>(</font><font>)</font><br/>
<font>(</font><font color="#ff4500">0</font>,&nbsp;<font color="#ff4500">5</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;<font color="#dc143c">re</font>.<font>match</font><font>(</font><font color="#483d8b">'super'</font>,&nbsp;<font color="#483d8b">'insuperable'</font><font>)</font><br/>
<font color="#008000">None</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;<font color="#dc143c">re</font>.<font>search</font><font>(</font><font color="#483d8b">'super'</font>,&nbsp;<font color="#483d8b">'superstition'</font><font>)</font>.<font>span</font><font>(</font><font>)</font><br/>
<font>(</font><font color="#ff4500">0</font>,&nbsp;<font color="#ff4500">5</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;<font color="#dc143c">re</font>.<font>search</font><font>(</font><font color="#483d8b">'super'</font>,&nbsp;<font color="#483d8b">'insuperable'</font><font>)</font>.<font>span</font><font>(</font><font>)</font><br/>
<font>(</font><font color="#ff4500">2</font>,&nbsp;<font color="#ff4500">7</font><font>)</font></blockquote><br/>
<br/>
У вас может возникнуть соблазн всегда пользоваться <code>re.match()</code>, просто добавляя перед вашим регулярным выражением <code>.*</code>. Сопротивляйтесь этому искушению, и вместо этого используйте <code>re.search()</code>. Компилятор регулярных выражений производит небольшой анализ РВ для того, чтобы ускорить процесс поиска соответствия. Один из видов такого анализа заключается в определении того, что должно быть первым символом совпадения, например, совпадение с шаблоном, начинающимся с <code>Crow</code>, должно начинаться с <code>'C'</code>. Этот анализ приводит к тому, что движок быстро пробегает строку в поиске начального символа, и начинает полное сравнение только, если найден символ 'C'.<br/>
<br/>
Добавление <code>.*</code> сводит на нет эту оптимизацию, требуя сканирования до конца строки, а затем возвращения, чтобы сравнить остаток регулярного выражения. Используйте вместо этого <code>re.search()</code>.<br/>
<br/>
<h5>Жадный против нежадного</h5><br/>
При повторении в РВ, таком как <code>a*</code>, результирующее действие съедает настолько большую часть шаблона, насколько это возможно. На этом часто обжигаются те, кто хочет найти пару симметричных определителей, таких как угловые скобки &lt;&gt;, окружающие HTML-теги. Наивный подход к шаблону сопоставления тега HTML не будет работать из-за «жадного» характера <code>.*</code>:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;s&nbsp;=&nbsp;<font color="#483d8b">'&lt;html&gt;&lt;head&gt;&lt;title&gt;Title&lt;/title&gt;'</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#008000">len</font><font>(</font>s<font>)</font><br/>
<font color="#ff4500">32</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;<font color="#dc143c">re</font>.<font>match</font><font>(</font><font color="#483d8b">'&lt;.*&gt;'</font>,&nbsp;s<font>)</font>.<font>span</font><font>(</font><font>)</font><br/>
<font>(</font><font color="#ff4500">0</font>,&nbsp;<font color="#ff4500">32</font><font>)</font><br/>
<font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;<font color="#dc143c">re</font>.<font>match</font><font>(</font><font color="#483d8b">'&lt;.*&gt;'</font>,&nbsp;s<font>)</font>.<font>group</font><font>(</font><font>)</font><br/>
<font color="#66cc66">&lt;</font>html<font color="#66cc66">&gt;&lt;</font>head<font color="#66cc66">&gt;&lt;</font>title<font color="#66cc66">&gt;</font>Title<font color="#66cc66">&lt;</font>/title<font color="#66cc66">&gt;</font></blockquote><br/>
<br/>
РВ сопоставляет <code>'&lt;'</code> в первом теге — html, и <code>.*</code> забирает остаток строки. В итоге сопоставление простирается от открывающей склюки <code>'&lt;'</code> тега <code>html</code> до закрывающей скобки '<code>&gt;'</code> закрывающего тега <code>/title</code>, что, конечно, не есть то, чего мы хотели.<br/>
<br/>
В таком случае, решение заключается в использовании нежадных определителей <code>*?, +?, ??</code> или <code>{m,n}?</code>, которые сопоставляют так мало текста, как это возможно. В примере выше, будет выбран первый символ '&gt;' после '&lt;', и только, если не получится, движок будет продолжать попытки найти символ '&gt;' на следующей позиции, в зависимости от того, как длинно имя тега. Это дает нужный результат:<br/>
<br/>
<blockquote><font color="#66cc66">&gt;&gt;&gt;</font>&nbsp;<font color="#ff7700">print</font>&nbsp;<font color="#dc143c">re</font>.<font>match</font><font>(</font><font color="#483d8b">'&lt;.*?&gt;'</font>,&nbsp;s<font>)</font>.<font>group</font><font>(</font><font>)</font><br/>
<font color="#66cc66">&lt;</font>html<font color="#66cc66">&gt;</font></blockquote><br/>
<br/>
(Заметим, что парсинг HTML или XML с использованием регулярных выражений является делом болезненным. Наспех сделанный шаблон может справиться с какими-то вещами, но рушится при изменении кода страницы. А хорошо продуманный шаблон может оказаться <i>слишком</i> сложным для того, чтобы пытаться его модифицировать. Для таких задач лучше использовать модули HTML или XML парсеров.)<br/>
<br/>
<h5>Использование re.VERBOSE</h5><br/>
К настоящему моменты вы, вероятно, заметили, что РВ обладают очень компактной записью, но иногда они не очень читабельны. РВ умеренной сложности могут представлять собой длинные последовательности слэшей, круглых скобок, метасимволов, что делает их трудными для чтения и понимания.<br/>
<br/>
Для таких РВ может быть полезным указание флага VERBOSE при компиляции регулярного выражения потому что это позволяет форматировать регулярное выражение более ясным образом.<br/>
<br/>
Флаг VERBOSE имеет несколько особенностей. Пробелы в РВ, которые не находятся внутри класса символов игнорируется. Это означает, что выражения, такие как <code>dog | cat</code> эквивалентны менее читабельным беспробельным <code>dog|cat</code>, но [a b] будет по-прежнему соответствовать символам <code>'a', 'b' </code> или пробелу. Кроме того, вы можете также помещать внутрь РВ комментарии, длящиеся с символа <code>#</code> до следующей строки. Форматирование будет более аккуратным при использовании тройных кавычек:<br/>
<br/>
<blockquote>pat&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>r<font color="#483d8b">&quot;&quot;&quot;<br/>
&nbsp;<font color="#000099">\s</font>*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Skip&nbsp;leading&nbsp;whitespace<br/>
&nbsp;(?P&lt;header&gt;[^:]+)&nbsp;&nbsp;&nbsp;#&nbsp;Header&nbsp;name<br/>
&nbsp;<font color="#000099">\s</font>*&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Whitespace,&nbsp;and&nbsp;a&nbsp;colon<br/>
&nbsp;(?P&lt;value&gt;.*?)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;The&nbsp;header's&nbsp;value&nbsp;--&nbsp;*?&nbsp;used&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;lose&nbsp;the&nbsp;following&nbsp;trailing&nbsp;whitespace<br/>
&nbsp;<font color="#000099">\s</font>*$&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Trailing&nbsp;whitespace&nbsp;to&nbsp;end-of-line<br/>
&quot;&quot;&quot;</font>,&nbsp;<font color="#dc143c">re</font>.<font>VERBOSE</font><font>)</font></blockquote><br/>
<br/>
Это гораздо проще читается, чем:<br/>
<br/>
<blockquote>pat&nbsp;=&nbsp;<font color="#dc143c">re</font>.<font color="#008000">compile</font><font>(</font>r<font color="#483d8b">&quot;<font color="#000099">\s</font>*(?P&lt;header&gt;[^:]+)<font color="#000099">\s</font>*:(?P&lt;value&gt;.*?)<font color="#000099">\s</font>*$&quot;</font><font>)</font></blockquote><br/>
<br/>
<h4>В заключение</h4><br/>
<a href="http://docs.python.org/library/re.html">Документация модуля re</a><br/>
<a href="http://habrahabr.ru/blogs/regex/">Хабраблог «Регулярные выражения»</a><br/>
<a href="http://gskinner.com/RegExr/">Regexp editor</a>
  	<div class="clear"></div>
    </div>
    
    
<ul class="tags">
	<li ><a href="http://habrahabr.ru/search/?q=%5Bpython%5D&target_type=posts" rel="tag">python</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5Bre%5D&target_type=posts" rel="tag">re</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5Bregular%20expressions%5D&target_type=posts" rel="tag">regular expressions</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5Bregexp%5D&target_type=posts" rel="tag">regexp</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5Bhowto%5D&target_type=posts" rel="tag">howto</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5B%D1%80%D0%B5%D0%B3%D1%83%D0%BB%D1%8F%D1%80%D0%BD%D1%8B%D0%B5%20%D0%B2%D1%8B%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F%5D&target_type=posts" rel="tag">регулярные выражения</a></li>
</ul>


    <div class="infopanel_wrapper">
	<div class="infopanel " id="infopanel_post_115436">
	
				<div class="voting   ">
	
						<span class="plus" title="Срок голосования истек."></span>
	
					<div class="mark positive ">
							<span class="score" title="Всего 67: &uarr;66 и &darr;1">+65</span>
					</div>
					
						<span class="minus" title="Срок голосования истек."></span>
		
				</div>
	
		<div class="pageviews" title="Просмотры поста">28570</div>
			
		<div class="favorite">
				<a class="add" title="Добавить в избранное" href="#" onclick="return posts_add_to_favorite(this, '2', 115436)"> </a>
		</div>
		<div class="favs_count" title="Количество пользователей, добавивших пост в избранное">317</div>
		
		
			<div class="original-author">
				<a title="Автор оригинала: A. M. Kuchling" href="http://docs.python.org/howto/regex.html">A. M. Kuchling</a>
			</div>
		
	
	
	
	
				<div class="author">
					<a title="Автор текста" href="http://habrahabr.ru/users/LeoMat/" >LeoMat</a>
					<span class="rating" title="рейтинг пользователя">39,0</span>
				</div>
		
	
	
		
			<div class="share">
				<div class="twitter">
					<a href="http://twitter.com/intent/tweet?text=%D0%A0%D0%B5%D0%B3%D1%83%D0%BB%D1%8F%D1%80%D0%BD%D1%8B%D0%B5+%D0%B2%D1%8B%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F%2C+%D0%BF%D0%BE%D1%81%D0%BE%D0%B1%D0%B8%D0%B5+%D0%B4%D0%BB%D1%8F+%D0%BD%D0%BE%D0%B2%D0%B8%D1%87%D0%BA%D0%BE%D0%B2.+%D0%A7%D0%B0%D1%81%D1%82%D1%8C+2+http://habr.ru/p/115436/+via+%40habrahabr+%23habr" title="Опубликовать ссылку в Twitter" target="_blank"></a>
				</div>
				<div class="vkontakte">
					<a href="http://vk.com/share.php?url=http://habrahabr.ru/post/115436/" title="Опубликовать ссылку во ВКонтакте" onclick="window.open(this.href, 'Опубликовать ссылку во Вконтакте', 'width=800,height=300'); return false"></a>
				</div>
				<div class="facebook">
					<a href="https://www.facebook.com/sharer/sharer.php?u=http://habrahabr.ru/post/115436/" title="Опубликовать ссылку в Facebook" onclick="window.open(this.href, 'Опубликовать ссылку в Facebook', 'width=640,height=436,toolbar=0,status=0'); return false"></a>
				</div>
				<div class="googleplus">
					<a href="https://plus.google.com/share?url=http://habrahabr.ru/post/115436/" title="Опубликовать ссылку в Google Plus" onclick="window.open(this.href, 'Опубликовать ссылку в Google Plus', 'width=800,height=300'); return false"></a>
				</div>
			</div>
	
	</div>
	<div class="clear"></div>
</div>




    
    
		
		
	</div>



	
<style type="text/css">
	.post_inner_banner.adidas_inner_banner {overflow:hidden;text-decoration:none;text-align:left;height:70px;border:1px solid #d4d4d4;border-radius:15px;background: url(/images/posts/inner_post_banner/adidas/img.png) no-repeat 0px 0px;}
	.post_inner_banner.adidas_inner_banner a{display:block;}
	.post_inner_banner.adidas_inner_banner .adidas-text{font-size: 15px;font-weight:bold;text-transform: uppercase;float:left;margin-top:16px;color: #000000;line-height: 19px;padding-right:30px;margin-right:20px;background: url(/images/posts/inner_post_banner/adidas/arrow.png) no-repeat right center;}
	.post_inner_banner.adidas_inner_banner .adidas-text1{margin-left:200px;}	
	.post_inner_banner.adidas_inner_banner .adidas-text2{}	
	.post_inner_banner.adidas_inner_banner .adidas-btn{width:164px;height:40px;margin-top:15px;display:block;float:left;background: url(/images/posts/inner_post_banner/adidas/btn.png) no-repeat 0px 0px;}
	
	@media (max-width: 1300px) { 
    .post_inner_banner.adidas_inner_banner .adidas-text{font-size:13px;}
	}
	@media (max-width: 1200px) { 
    .post_inner_banner.adidas_inner_banner .adidas-text1{display: none;}
    .post_inner_banner.adidas_inner_banner .adidas-text2{margin-left:200px;font-size:15px;padding-right: 50px;margin-right:30px;}
	}
	@media (max-width: 1100px) { 
    .post_inner_banner.adidas_inner_banner .adidas-text1{color:green;}
    .post_inner_banner.adidas_inner_banner .adidas-text2{margin-left:200px;font-size:13px;padding-right: 28px;margin-right:18px;}    
	}
</style>
<div class="adidas_inner_banner post_inner_banner hidden">
  <a href="#url" class="block_url">
  <div class="adidas-text adidas-text1">Свежий взгляд<br>на бег</div>
  <div class="adidas-text adidas-text2">протестируй кроссовки<br>нового поколения</div>
  <div class="adidas-btn"></div>
  </a>
</div>

<style type="text/css">
    .post_inner_banner.wserver_inner_banner {overflow:hidden;text-decoration:none;text-align:left;height:69px;border:1px solid #d4d4d4;border-radius:15px;background: url(/images/posts/inner_post_banner/wserver/left.png) no-repeat -15px 0px;}
    .post_inner_banner.wserver_inner_banner a {display:block;}
    .post_inner_banner.wserver_inner_banner .wserver-text {font-family:'PT Sans', sans-serif;font-size:18px;float:left;color: #000000;line-height: 19px;}
    .post_inner_banner.wserver_inner_banner .wserver-text1 {margin-left:155px;margin-top:16px;padding-right:20px;}
    .post_inner_banner.wserver_inner_banner .wserver-text2 {background: url(/images/posts/inner_post_banner/wserver/man.png) no-repeat left center;padding-left:95px;height:53px;padding-top:16px;}
    .post_inner_banner.wserver_inner_banner .wserver-btn{width:164px;height:40px;margin-top:15px;margin-left:15px;display:block;float:left;background: url(/images/posts/inner_post_banner/wserver/button.png) no-repeat 0px 0px;font-family:'PT Sans Caption', sans-serif;font-weight:bold;color:#fff;font-size:21px;line-height:40px;text-align:center;}

    @media (max-width: 1300px) {
        .post_inner_banner.wserver_inner_banner .wserver-text{font-size:15px;}
    }

    @media (max-width: 1200px) {
        .post_inner_banner.wserver_inner_banner .wserver-text{font-size:13px;}
        .post_inner_banner.wserver_inner_banner .wserver-btn {margin-left:10px;}
        .post_inner_banner.wserver_inner_banner .wserver-text2 {padding-left:80px;}
        .post_inner_banner.wserver_inner_banner .wserver-text1 {padding-right:0;}
    }

    @media (max-width: 1100px) {
        .post_inner_banner.wserver_inner_banner .wserver-text1 {display:none;}
        .post_inner_banner.wserver_inner_banner .wserver-text2{margin-left:155px;background-position:right center;padding-left:0;padding-right:85px;}
    }
</style>
<div class="wserver_inner_banner post_inner_banner hidden">
    <a href="#url" class="block_url">
        <div class="wserver-text wserver-text1">Стань<br/>первоиспытателем!</div>
        <div class="wserver-text wserver-text2">Скачай Windows Server 2012 R2<br/>и <b>выиграй почетную футболку!</b></div>
        <div class="wserver-btn">Скачать</div>
    </a>
</div>

<style type="text/css">
    .post_inner_banner.nokia_lumia1520_inner_banner {overflow:hidden;text-align:center;height:69px;border:1px solid #d4d4d4;border-radius:15px;background: url(/images/posts/inner_post_banner/nokia/lumia1520_phone.png) no-repeat right;}
    .post_inner_banner.nokia_lumia1520_inner_banner a {text-decoration:none;color:#000;}
    .post_inner_banner.nokia_lumia1520_inner_banner div {display:block;float:left;text-align:left;}
    .post_inner_banner.nokia_lumia1520_inner_banner .nokia_icons {background: url(/images/posts/inner_post_banner/nokia/lumia1520_icons.png) no-repeat;width:120px;height:34px;margin-left:29px;margin-top:18px;}
    .post_inner_banner.nokia_lumia1520_inner_banner .pedia {margin:16px 30px 0 29px;font-size:15px;line-height:18px;}
    .post_inner_banner.nokia_lumia1520_inner_banner .pedia a {color:#70a4bd;}
    .post_inner_banner.nokia_lumia1520_inner_banner .pedia_button {display:block;float:left;margin-top:14px;background: url(/images/posts/inner_post_banner/nokia/lumia1520_button.png) no-repeat;width:229px;height:40px;}

    @media (max-width: 1300px) {
        .post_inner_banner.nokia_lumia1520_inner_banner {background-position:right -20px top; }

        .post_inner_banner.nokia_lumia1520_inner_banner .pedia {margin:18px 15px 0 15px;}
        .post_inner_banner.nokia_lumia1520_inner_banner .nokia_icons {margin-left:15px;}
    }
    @media (max-width: 1200px) {
        .post_inner_banner.nokia_lumia1520_inner_banner .nokia_icons {display:none;}
        .post_inner_banner.nokia_lumia1520_inner_banner {background-position:right -30px top; }
    }
    @media (max-width: 1100px) {
        .post_inner_banner.nokia_lumia1520_inner_banner {background-position:right -90px top; }
        .post_inner_banner.nokia_lumia1520_inner_banner .pedia {margin-right:30px;}
    }
</style>
<div class="nokia_lumia1520_inner_banner post_inner_banner hidden">
    <div class="nokia_icons"></div>
    <div class="pedia"><a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=445870&bt=21&pid=1533340&bid=3132651&bn=3132651&rnd=951495518" target="_blank">Энциклопедия Nokia<br/> Lumia</a> на Хабрахабре</div>
    <a class="pedia_button block_url" href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=445870&bt=21&pid=1533340&bid=3132651&bn=3132651&rnd=951495518" target="_blank"></a>
</div>
<style type="text/css">
    .post_inner_banner.seopult_inner_banner { overflow:hidden;text-align:center;height:70px;border:1px solid #d4d4d4;border-radius:15px; }
    .post_inner_banner.seopult_inner_banner a { text-decoration:none;color:#000;overflow:hidden;display:block;height:70px;width:1500px; }
    .post_inner_banner.seopult_inner_banner div { display:block;float:left;text-align:left;font-size:12px; }
    .post_inner_banner.seopult_inner_banner .logo { background: url(/images/posts/inner_post_banner/seopult/logo.png) no-repeat center;width:153px;height:70px; }
    .post_inner_banner.seopult_inner_banner .zig { background: url(/images/posts/inner_post_banner/seopult/zig.png) no-repeat center;width:7px;height:70px; }
    .post_inner_banner.seopult_inner_banner .target { background: url(/images/posts/inner_post_banner/seopult/target.png) no-repeat 0 5px;width:200px;padding-left:55px;padding-top:12px;height:53px;font:18px/22px Verdana, Arial;color:#000;margin:0 20px; }
    .post_inner_banner.seopult_inner_banner .list ul { margin:10px 20px; }
    .post_inner_banner.seopult_inner_banner .list ul li { background: url(/images/posts/inner_post_banner/seopult/li.png) no-repeat 0 2px;padding-left:15px;font:12px/16px Verdana, Arial;color:#000; }
    .post_inner_banner.seopult_inner_banner .mline { background: url(/images/posts/inner_post_banner/seopult/right.png) no-repeat;width:6px;height:70px; }
    .post_inner_banner.seopult_inner_banner .mmore { background:#ea9d4a;text-align:center;height:70px;width:172px;font:18px/70px Verdana, Arial;color:#fff; }
    .post_inner_banner.seopult_inner_banner .mmore span { border-bottom:1px solid #fff; }


    @media (max-width: 1300px) {
        .post_inner_banner.seopult_inner_banner .mmore { width:102px;font-size:14px; }
    }
    @media (max-width: 1200px) {
        .post_inner_banner.seopult_inner_banner .mline,
        .post_inner_banner.seopult_inner_banner .mmore { display:none; }
    }
    @media (max-width: 1100px) {
        .post_inner_banner.seopult_inner_banner .logo { width:140px; }
        .post_inner_banner.seopult_inner_banner .target { width:152px;font-size:14px;padding-left:50px;margin:0 10px; }
    }
</style>
<div class="seopult_inner_banner post_inner_banner hidden">
    <a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=451110&bt=21&bid=3186459&bn=3186459&rnd=140312559" target="_blank" class="block_url">
        <div class="logo"></div>
        <div class="zig"></div>
        <div class="target">Автоматизированное<br/>продвижение сайтов</div>
        <div class="zig"></div>
        <div class="list">
            <ul>
                <li>50% экономии на ссылках</li><li>Запуск проекта за 10 минут</li><li>Вывод и удержание в ТОП 10</li>
            </ul>
        </div>
        <div class="mline"></div>
        <div class="mmore"><span>Подробнее</span></div>
    </a>
</div>
<style type="text/css">
    .post_inner_banner.megafon_inner_banner { overflow:hidden;text-align:center;height:70px;border:1px solid #d4d4d4;border-radius:15px;background: url(/images/posts/inner_post_banner/megafon/login_green.png) no-repeat left top; }
    .post_inner_banner.megafon_inner_banner a { text-decoration:none;color:#000;}
    .post_inner_banner.megafon_inner_banner a > div { display:block;float:left;text-align:left; }
    .post_inner_banner.megafon_inner_banner .slogan { margin-left:30px;font-size:18px;color:#fff;margin-top:12px; }
    .post_inner_banner.megafon_inner_banner .slogan b { display:block; }
    .post_inner_banner.megafon_inner_banner .planshet { background: url(/images/posts/inner_post_banner/megafon/login_planshet.png) no-repeat center;width:235px;height:70px;margin:0 20px 0 40px; }
    .post_inner_banner.megafon_inner_banner .price { font:11px/14px Verdana, Arial;color:#aaaaaa;margin-top:12px; }
    .post_inner_banner.megafon_inner_banner .price .sum { font:30px/32px Verdana, Arial;color:#472671;font-weight:bold; }
    .post_inner_banner.megafon_inner_banner .price .zvezda { font-size:18px;position:relative;bottom:0.6em; }
    .post_inner_banner.megafon_inner_banner .price .link { text-decoration:underline; }
    .post_inner_banner.megafon_inner_banner .button { background: url(/images/posts/inner_post_banner/megafon/login_button.png) no-repeat;width:125px;height:38px;font:14px/38px Verdana, Arial;color:#fff;margin:17px 0 0 20px;text-align:center; }

    @media (max-width: 1300px) {
        .post_inner_banner.megafon_inner_banner { background-position:-50px 0; }
        .post_inner_banner.megafon_inner_banner .slogan { background-position:20px 0;font-size:14px;margin:17px 0 0 17px; }
        .post_inner_banner.megafon_inner_banner .planshet { margin:0 10px 0 20px; }
    }
    @media (max-width: 1200px) {
        .post_inner_banner.megafon_inner_banner .planshet { margin-left:40px; }
        .post_inner_banner.megafon_inner_banner .price { margin-left:15px; }
        .post_inner_banner.megafon_inner_banner .button { display:none; }
    }
    @media (max-width: 1100px) {
        .post_inner_banner.megafon_inner_banner .planshet { margin-left:10px; }
        .post_inner_banner.megafon_inner_banner .price { margin-left:0;font-size:10px; }
        .post_inner_banner.megafon_inner_banner .button { margin-left:20px; }

    }
</style>
<div class="megafon_inner_banner post_inner_banner hidden">
    <script type="text/javascript">
        (new Image()).src = 'http://ar.tns-counter.ru/V13a****ar_ru/ru/CP1251/tmsec=77790_450366-1552541/!' + Math.round(Math.random()*1E9);
    </script>

    <a href="" target="_blank" class="block_url">
        <div class="slogan">
            Новый 3G-планшет
            <b>Login 2</b>
        </div>
        <div class="planshet"></div>
        <div class="price">
            <div><span class="sum">2790 р.</span><span class="zvezda"><sup>*</sup></span></div>
            <sup>*</sup>Условия акции на <span class="link">www.megafon.ru</span>
        </div>
        <div class="button">Подробнее</div>
    </a>
</div>

<script type="text/javascript">
function show_inner_banner_block(name, url) {
	if( typeof(name) !== 'undefined') {
		if( $('.'+name+'_inner_banner').size() > 0) {
			$('.'+name+'_inner_banner').show();
		}
	}

	if( typeof(url) !== 'undefined') {
		$('.'+name+'_inner_banner .block_url').attr('href', url);
	}
}
</script>

<div id="adriver_banner_1586921565"></div>
<script type="text/javascript">
	//if (true)
	//	show_inner_banner_block('megafon');
    //else
		new adriver("adriver_banner_1586921565", {sid:179440, bt:52, bn:3});
</script>


	
		<div class="comments_list " id="comments">

  <h2 class="title ">комментарии (<span id="comments_count">20</span>)
  		<span class="subscribe_comments">
			отслеживать новые: 
			<label ><input type="checkbox" id="subscribe_comments" rel="{target_type:'2',target_id:115436 }"  /> в почте</label>
			<label ><input type="checkbox" id="tracker_comments" rel="{target_type:'2',target_id:115436 }"  /> в трекере</label>
		</span>

  </h2>

    <div class="comment_item" id="comment_3754060" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body">
        <div class="info  " rel="3754060">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3754060" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/av0000/" class="avatar"><img src="//habr.habrastorage.org/avatars/b8b/37d/cdf/b8b37dcdf51cc78a04edaadcb28e624a_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/av0000/" class="username">av0000</a><span class="comma">,</span>
            <time>20 марта 2011 в 21:35</time>

            <a href="#comment_3754060" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3754060 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Полезная шпаргалка. В избранное :)<br/>
<br/>
Вот кто бы ещё написал про оптимизацию питоньих регэкспов — вообще бы было здорово.<br/>
<br/>
От себя замечу:<br/>
 — встроенные в питон регэкспы написаны на самом питоне и не слишком быстрЫ<br/>
 — в отличие от «обычного» кода их нельзя ускорить при помощи <a href="http://psyco.sourceforge.net/">psyco</a><br/>
 — по моим тестам обработка не слишком больших (до 2мб, книжки с самиздата) текстов «руками» давала ускорение от 1.5 до 6 раз. 
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3754060">
        <div class="comment_item" id="comment_3756812" >

    <span class="parent_id" data-parent_id="3754060"></span>
    <div class="comment_body">
        <div class="info  " rel="3756812">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3756812" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Ano/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/Ano/" class="username">Ano</a><span class="comma">,</span>
            <time>21 марта 2011 в 19:30</time>

            <a href="#comment_3756812" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3756812 )" title="В избранное"></a>
            <div class="show_tree" data-id="3756812" data-parent_id="3754060" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3754060" data-id="3756812" data-parent_id="3754060" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Встроенные в питон регэкспы написаны на C, и ненамного медленнее перловых, а изредка и быстрее.<br/>
<br/>
<a href="http://svn.python.org/view/python/trunk/Modules/_sre.c?revision=60054&amp;view=markup&amp;pathrev=60915">Modules/_sre.c</a>
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3756812">
        <div class="comment_item" id="comment_3757413" >

    <span class="parent_id" data-parent_id="3756812"></span>
    <div class="comment_body">
        <div class="info  is_topic_starter  " rel="3757413">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3757413" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/LeoMat/" class="avatar"><img src="//habr.habrastorage.org/avatars/397/fe0/f1d/397fe0f1d3b43931763be4d82ba2b133_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/LeoMat/" class="username">LeoMat</a><span class="comma">,</span>
            <time>21 марта 2011 в 22:48</time>

            <a href="#comment_3757413" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3757413 )" title="В избранное"></a>
            <div class="show_tree" data-id="3757413" data-parent_id="3756812" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3756812" data-id="3757413" data-parent_id="3756812" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Согласен, об этом сказано и в первой половине пособия.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3757413">
    </div>
</div>

        <div class="comment_item" id="comment_3758693" >

    <span class="parent_id" data-parent_id="3756812"></span>
    <div class="comment_body">
        <div class="info  " rel="3758693">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3758693" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/av0000/" class="avatar"><img src="//habr.habrastorage.org/avatars/b8b/37d/cdf/b8b37dcdf51cc78a04edaadcb28e624a_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/av0000/" class="username">av0000</a><span class="comma">,</span>
            <time>22 марта 2011 в 11:54</time>

            <a href="#comment_3758693" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3758693 )" title="В избранное"></a>
            <div class="show_tree" data-id="3758693" data-parent_id="3756812" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3756812" data-id="3758693" data-parent_id="3756812" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Хм… Заставили зарыться в исходники…<br/>
<br/>
Таки да, исполняющая часть «живёт» в статически скомпиленном модуле _sre, а все 50кб кода из sre_*.py в основном всяческие обёртки…<br/>
<br/>
Эхх… Значит не видать мне 100500 раз ускорения от подключения внешней библиотеки :(<br/>
Остаётся вопрос про оптимизацию самих регэкспов, типа «Как писать быстрые регулярные выражения». Нет на примете подобной статьи? Почитал бы не без удовольствия ;)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3758693">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    <div class="comment_item" id="comment_3754305" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body">
        <div class="info  " rel="3754305">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3754305" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Trept/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/Trept/" class="username">Trept</a><span class="comma">,</span>
            <time>20 марта 2011 в 23:12</time>

            <a href="#comment_3754305" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3754305 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Очень неплохие примеры, руководство написано длинновато, но все по делу.<br/>
Хорошо, что даны строковые методы, их надо бы выделить в отдельную главу Оптимизация.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3754305">
        <div class="comment_item" id="comment_3754340" >

    <span class="parent_id" data-parent_id="3754305"></span>
    <div class="comment_body">
        <div class="info  is_topic_starter  " rel="3754340">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3754340" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/LeoMat/" class="avatar"><img src="//habr.habrastorage.org/avatars/397/fe0/f1d/397fe0f1d3b43931763be4d82ba2b133_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/LeoMat/" class="username">LeoMat</a><span class="comma">,</span>
            <time>20 марта 2011 в 23:21</time>

            <a href="#comment_3754340" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3754340 )" title="В избранное"></a>
            <div class="show_tree" data-id="3754340" data-parent_id="3754305" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3754305" data-id="3754340" data-parent_id="3754305" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Всмысле строковые методы? О них здесь говорится как пример того, когда не нужно изобретать велосипед с регулярными выражениями. Длинновато, потому что это почти полный перевод.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3754340">
        <div class="comment_item" id="comment_3755518" >

    <span class="parent_id" data-parent_id="3754340"></span>
    <div class="comment_body">
        <div class="info  " rel="3755518">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3755518" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Trept/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/Trept/" class="username">Trept</a><span class="comma">,</span>
            <time>21 марта 2011 в 12:39</time>

            <a href="#comment_3755518" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3755518 )" title="В избранное"></a>
            <div class="show_tree" data-id="3755518" data-parent_id="3754340" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3754340" data-id="3755518" data-parent_id="3754340" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            «Велосипед» — это немного другое, ведь чтобы его не изобретать, надо знать. Поэтому само Ваше руководство целиком (перевод) работает на это.<br/>
А пункт о строковых методах показывает часть ограничений для регулярных выражений. Иначе говоря, нужны правильные методы для соответствующих задач. Не надо рассчитывать на широкий универсализм регэкспов.<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3755518">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    <div class="comment_item" id="comment_3754354" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body">
        <div class="info  " rel="3754354">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3754354" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/HomoErectus/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/HomoErectus/" class="username">HomoErectus</a><span class="comma">,</span>
            <time>20 марта 2011 в 23:25</time>

            <a href="#comment_3754354" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3754354 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            я читаю такие штуки когда надо ими пользоваться, а так, прочитал забыл.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3754354">
        <div class="comment_item" id="comment_3754389" >

    <span class="parent_id" data-parent_id="3754354"></span>
    <div class="comment_body">
        <div class="info  is_topic_starter  " rel="3754389">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3754389" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/LeoMat/" class="avatar"><img src="//habr.habrastorage.org/avatars/397/fe0/f1d/397fe0f1d3b43931763be4d82ba2b133_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/LeoMat/" class="username">LeoMat</a><span class="comma">,</span>
            <time>20 марта 2011 в 23:36</time>

            <a href="#comment_3754389" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3754389 )" title="В избранное"></a>
            <div class="show_tree" data-id="3754389" data-parent_id="3754354" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3754354" data-id="3754389" data-parent_id="3754354" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Просто интервал времени, определенный вами как «когда надо пользоваться» может растянуться на продолжительный срок.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3754389">
    </div>
</div>

        <div class="comment_item" id="comment_3755540" >

    <span class="parent_id" data-parent_id="3754354"></span>
    <div class="comment_body">
        <div class="info  " rel="3755540">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3755540" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/AlexZaharow/" class="avatar"><img src="//habr.habrastorage.org/avatars/7f9/d73/949/7f9d739495b41d9a2fe66809f5937702_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/AlexZaharow/" class="username">AlexZaharow</a><span class="comma">,</span>
            <time>21 марта 2011 в 12:45</time>

            <a href="#comment_3755540" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3755540 )" title="В избранное"></a>
            <div class="show_tree" data-id="3755540" data-parent_id="3754354" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3754354" data-id="3755540" data-parent_id="3754354" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
             — братан, я не ел три дня!<br/>
 — Как не ел? надо заставлять себя!<br/>
<br/>
Обычно новые технологии всегда кажется неуместно обкатывать, то времени нет, то возможности, то не понимаешь, как применить, если работу надо сделать в excel и даже кажется, что регулярки подойдут, но как их применить? Хорошо бы автор топика ещё и показал, как ими воспользоваться, когда пользователь работает в среде где использование регулярок в принципе не предусмотрено. Хотя бы несколько ухищрений. Без них никуда ;)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3755540">
    </div>
</div>

    </div>
</div>

    <div class="comment_item" id="comment_3754520" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body">
        <div class="info  " rel="3754520">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3754520" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 2: &uarr;2 и &darr;0">+2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/bekbulatov/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/bekbulatov/" class="username">bekbulatov</a><span class="comma">,</span>
            <time>21 марта 2011 в 00:28</time>

            <a href="#comment_3754520" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3754520 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Спасибо за перевод.<br/>
<br/>
Только «опережающая и ретроспективная позиционная проверка», знакомая по книге Фридла, мне кажется, звучит лучше, чем «положительное и отрицательное утверждение предпросмотра»
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3754520">
        <div class="comment_item" id="comment_3754525" >

    <span class="parent_id" data-parent_id="3754520"></span>
    <div class="comment_body">
        <div class="info  is_topic_starter  " rel="3754525">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3754525" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/LeoMat/" class="avatar"><img src="//habr.habrastorage.org/avatars/397/fe0/f1d/397fe0f1d3b43931763be4d82ba2b133_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/LeoMat/" class="username">LeoMat</a><span class="comma">,</span>
            <time>21 марта 2011 в 00:32</time>

            <a href="#comment_3754525" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3754525 )" title="В избранное"></a>
            <div class="show_tree" data-id="3754525" data-parent_id="3754520" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3754520" data-id="3754525" data-parent_id="3754520" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Спасибо, я не очень знаком с этими терминами и во многих «длинных» словосочетаниях было непросто подобрать достойный эквивалент.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3754525">
    </div>
</div>

        <div class="comment_item" id="comment_3754766" >

    <span class="parent_id" data-parent_id="3754520"></span>
    <div class="comment_body">
        <div class="info  " rel="3754766">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3754766" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/zibada/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/zibada/" class="username">zibada</a><span class="comma">,</span>
            <time>21 марта 2011 в 03:42</time>

            <a href="#comment_3754766" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3754766 )" title="В избранное"></a>
            <div class="show_tree" data-id="3754766" data-parent_id="3754520" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3754520" data-id="3754766" data-parent_id="3754520" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            negative lookahead и positive/negative lookbehind — это совсем разные вещи.<br/>
про последние (&quot;(?&lt;=expr)&quot;, &quot;(?&lt;!expr)&quot;), кстати, вообще не упомянуто.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3754766">
    </div>
</div>

    </div>
</div>

    <div class="comment_item" id="comment_3754780" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body">
        <div class="info  " rel="3754780">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3754780" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/pietrovich/" class="avatar"><img src="//habr.habrastorage.org/avatars/66d/bcd/47f/66dbcd47fe7a3fc68a17502edf5f6d0a_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/pietrovich/" class="username">pietrovich</a><span class="comma">,</span>
            <time>21 марта 2011 в 04:12</time>

            <a href="#comment_3754780" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3754780 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            RegexBuddy упомяните, пожалуйста, в статье — архиполезный инструмент в этом деле.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3754780">
        <div class="comment_item" id="comment_3754871" >

    <span class="parent_id" data-parent_id="3754780"></span>
    <div class="comment_body">
        <div class="info  " rel="3754871">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3754871" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/lesa80/" class="avatar"><img src="//habr.habrastorage.org/avatars/613/e9d/c94/613e9dc9413a31a0278f0afade002a3f_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/lesa80/" class="username">lesa80</a><span class="comma">,</span>
            <time>21 марта 2011 в 07:48</time>

            <a href="#comment_3754871" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3754871 )" title="В избранное"></a>
            <div class="show_tree" data-id="3754871" data-parent_id="3754780" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3754780" data-id="3754871" data-parent_id="3754780" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Полезный но платный.<br/>
<br/>
Есть похожий, но не такой красивый и навороченный, зато с бесплатной регистрацией.<br/>
<a href="http://www.ultrapico.com/Expresso.htm">www.ultrapico.com/Expresso.htm</a>
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3754871">
        <div class="comment_item" id="comment_3755908" >

    <span class="parent_id" data-parent_id="3754871"></span>
    <div class="comment_body">
        <div class="info  " rel="3755908">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3755908" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/pietrovich/" class="avatar"><img src="//habr.habrastorage.org/avatars/66d/bcd/47f/66dbcd47fe7a3fc68a17502edf5f6d0a_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/pietrovich/" class="username">pietrovich</a><span class="comma">,</span>
            <time>21 марта 2011 в 14:41</time>

            <a href="#comment_3755908" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3755908 )" title="В избранное"></a>
            <div class="show_tree" data-id="3755908" data-parent_id="3754871" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3754871" data-id="3755908" data-parent_id="3754871" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Expresso заточен под синтаксис регулярок .NET, синтаксисы, конечно, оень похожи между собой, но для нормального применения Expresso нужно держать разницу в голове, что для новичка может оказаться неподъемно.<br/>
В идеале можно начать триала RegexBuddy, подтянуть хотя бы немного понимание регулярок, после чего попробовать перейти на Expresso
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3755908">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    <div class="comment_item" id="comment_3755593" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body">
        <div class="info  " rel="3755593">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3755593" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/neon/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/neon/" class="username">neon</a><span class="comma">,</span>
            <time>21 марта 2011 в 13:00</time>

            <a href="#comment_3755593" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3755593 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Для закрепления всего могу подкинуть очень хорошую задачку на регулярные выражения — разбить одним выражением число на триады: 1234567 станет 1.234.567<br/>
<br/>
А для себя в качестве упражнения как-то написал galaxy почти полностью на рэгэкспах. perl использовал только как средство ввода-вывода. Вся логика в регэкспах.<br/>
q — влево, w — вправо, проблел — стрелять. Есть один баг со смещением кораблей, но было лениво фиксить.<br/>
<br/>
Вот код<br/>
<pre>#!/usr/bin/perl                                                                                                                                                                                                                                                                
use strict;                                                                                                                                                                                                                                                                    
use warnings;                                                                                                                                                                                                                                                                  
use Time::HiRes qw(usleep);                                                                                                                                                                                                                                                    
use Term::ReadKey;                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                               
$_ = &quot;\33[2J\x33[HD&lt;\n\33[2J\33[H+&quot;.&quot;-&quot; x 40 . &quot;+\n|&quot; . (&quot; &quot; x 10 . &quot;x &quot; x                                                                                                                                                                                                     
     10 . &quot; &quot; x 10 . &quot;|\n|&quot;) x 5 . (&quot; &quot; x 40 . &quot;|\n|&quot;) x 10 . &quot; &quot; x                                                                                                                                                                                                            
     19 . &quot;^&quot; . &quot; &quot; x 20 . &quot;|\n+&quot; . (&quot;-&quot; x 40) . &quot;+&quot;;                                                                                                                                                                                                                          
my $i = 0;                                                                                                                                                                                                                                                                     
while ( 1 ) {                                                                                                                                                                                                                                                                  
        s/^([^\n]+)\n(.*)/$2\n$1/s;                                                                                                                                                                                                                                            
        if ( $i == 5 ) {                                                                                                                                                                                                                                                       
        s/(.*?) x(?=.*?D&lt;)/$1X /sg;                                                                                                                                                                                                                                            
        s/(.*?)x (?=.*?D&gt;)/$1 X/sg;                                                                                                                                                                                                                                            
        s/(\|X.*)D&lt;/$1Dv&gt;/s;                                                                                                                                                                                                                                                   
        s/(X\|.*)D&gt;/$1Dv&lt;/s;                                                                                                                                                                                                                                                   
        s/(?&lt;=\-.{42})\./ /sg;                                                                                                                                                                                                                                                 
        s/X(.{42})\./ $1 /sg;                                                                                                                                                                                                                                                  
        s/X\./  /sg;                                                                                                                                                                                                                                                           
        s/\.X/  /sg;                                                                                                                                                                                                                                                           
        s/(?&lt;=X.{42}) (?=.*Dv)/*/sg;                                                                                                                                                                                                                                           
        s/X(?=.{42}\*.*Dv)/ /sg;                                                                                                                                                                                                                                               
        s/(?&lt;=X.{42}) (?=.*Dv)/*/sg;                                                                                                                                                                                                                                           
        s/X(?=.{42}\*.*Dv)/ /sg;                                                                                                                                                                                                                                               
        s/(?&lt;=X.{42}) (?=.*Dv)/*/sg;                                                                                                                                                                                                                                           
        s/X(?=.{42}\*.*Dv)/ /sg;                                                                                                                                                                                                                                               
        s/(?&lt;=X.{42}) (?=.*Dv)/*/sg;                                                                                                                                                                                                                                           
        s/X(?=.{42}\*.*Dv)/ /sg;                                                                                                                                                                                                                                               
        s/(?&lt;=X.{42}) (?=.*Dv)/*/sg;                                                                                                                                                                                                                                           
        s/X(?=.{42}\*.*Dv)/ /sg;                                                                                                                                                                                                                                               
        s/\*/X/sg;                                                                                                                                                                                                                                                             
        s/Dv&lt;/D&lt;/s;                                                                                                                                                                                                                                                            
        s/Dv&gt;/D&gt;/s;                                                                                                                                                                                                                                                            
        s/.*?X[^\n]+\n\| *\^.*/&quot;\33[2J\33[HGame over&quot;/es;                                                                                                                                                                                                                      
        s/X/x/g;                                                                                                                                                                                                                                                               
        }                                                                                                                                                                                                                                                                      
        s/(.*)\n([^\n]+)$/$2\n$1/s;                                                                                                                                                                                                                                            
        s/ (.{42})\./\.$1 /sg;                                                                                                                                                                                                                                                 
        ReadMode 4;                                                                                                                                                                                                                                                            
        my $key;                                                                                                                                                                                                                                                               
        $key = ReadKey(-1);                                                                                                                                                                                                                                                    
        if ( defined $key ) {                                                                                                                                                                                                                                                  
                s/ (?=.{42}\^)/./sg if $key eq ' ';                                                                                                                                                                                                                            
                s/\^ / ^/sg if $key eq 'w';                                                                                                                                                                                                                                    
                s/ \^/^ /sg if $key eq 'q';                                                                                                                                                                                                                                    
        }                                                                                                                                                                                                                                                                      
        ReadMode 0;                                                                                                                                                                                                                                                            
        print $_,&quot;\n&quot;;                                                                                                                                                                                                                                                         
        s/Game over/exit()/e;                                                                                                                                                                                                                                                  
        $i = 0 if $i++ == 5;                                                                                                                                                                                                                                                   
        usleep (20000);                                                                                                                                                                                                                                                        
}
</pre>
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3755593">
        <div class="comment_item" id="comment_4627579" >

    <span class="parent_id" data-parent_id="3755593"></span>
    <div class="comment_body">
        <div class="info  " rel="4627579">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_4627579" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Pastafarianist/" class="avatar"><img src="//habr.habrastorage.org/avatars/4f2/519/dc4/4f2519dc48f731aa6df49fb6f8716e6e_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/Pastafarianist/" class="username">Pastafarianist</a><span class="comma">,</span>
            <time>20 февраля 2012 в 22:02</time>

            <a href="#comment_4627579" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 4627579 )" title="В избранное"></a>
            <div class="show_tree" data-id="4627579" data-parent_id="3755593" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3755593" data-id="4627579" data-parent_id="3755593" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            <blockquote>Для закрепления всего могу подкинуть очень хорошую задачку на регулярные выражения — разбить одним выражением число на триады: 1234567 станет 1.234.567</blockquote><br/>
<pre><code class="python">f = lambda s: re.sub(r&quot;(\b|\d)(\d+?)(?=(?:\d{3,3})+?\b)&quot;, r&quot;\1\2.&quot;, s)
</code></pre><br/>
Наверняка можно проще, но у меня получилось только так :(
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_4627579">
    </div>
</div>

    </div>
</div>

    <div class="comment_item" id="comment_3756874" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body">
        <div class="info  " rel="3756874">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3756874" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/afiskon/" class="avatar"><img src="//habr.habrastorage.org/avatars/39b/20d/269/39b20d269418a83093ddb9915b2fb7d4_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/afiskon/" class="username">afiskon</a><span class="comma">,</span>
            <time>21 марта 2011 в 19:53</time>

            <a href="#comment_3756874" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3756874 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Могу я <s>попиариться</s> предложить дополнить заметку ссылкой на мой гайд по регулярным выражениям? <a href="http://eax.me/regular-expr/">eax.me/regular-expr/</a>
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3756874">
        <div class="comment_item" id="comment_3757433" >

    <span class="parent_id" data-parent_id="3756874"></span>
    <div class="comment_body">
        <div class="info  is_topic_starter  " rel="3757433">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_3757433" class="voting   ">
                <span class="minus" title="Read-only не могут голосовать"></span>
                <span class="plus" title="Read-only не могут голосовать"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/LeoMat/" class="avatar"><img src="//habr.habrastorage.org/avatars/397/fe0/f1d/397fe0f1d3b43931763be4d82ba2b133_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/LeoMat/" class="username">LeoMat</a><span class="comma">,</span>
            <time>21 марта 2011 в 22:56</time>

            <a href="#comment_3757433" class="link_to_comment">#</a>
            <a href="#" class="favorite add" onclick="return comments_add_to_favorite(this, '3', 3757433 )" title="В избранное"></a>
            <div class="show_tree" data-id="3757433" data-parent_id="3756874" title="Показать ветку комментариев">&#8629;</div>

            <a href="#comment_3756874" data-id="3757433" data-parent_id="3756874" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Да заметка уже переросла возможности храбра по объему текста. А guide очень даже ничего. Плюс вам.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_3757433">
    </div>
</div>

    </div>
</div>

</div>

						<form action="#" method="post"  id="comments_form" class="hidden">
					<input type="hidden" name="ts" value="1392889299" />
					<input type="hidden" name="tt" value="2" />
					<input type="hidden" name="ti" value="115436" />  
					<input type="hidden" name="comment_id" value="0" />
					<input type="hidden" name="parent_id" value="0" />

				</form>


	
<form action="/json/favorites/" method="post" id="edit_tags_form" class="hidden">
  <input type="hidden" name="action" value="add" />
  <input type="hidden" name="ti" value="0" />
  <input type="hidden" name="tt" value="0" />
  <label>Пометьте топик понятными вам метками, если хотите</label>
  <input type="text" name="tags_string" class="tags_string" />
  <div class="description">Метки лучше разделять запятой. Например: <i>общение, социальные сети, myspace.com, подростки, мердок</i></div>
  <input type="submit" value="Сохранить" class="submit" /> или <a href="#" class="close" onclick="return close_edit_tags()">закрыть</a>
</form>
    


  </div>
  <div class="sidebar_right">
		
	
	
		<div class="banner_300x500">
		<div id="adriver_banner_1863387959"></div>
		<script type="text/javascript">
			(function(){
				var custom = {};
					custom[1] = 'python';
				
				var std = {},i;for(i in
				std){try{custom[std[i]]=eval(i)}catch(e){} }
				new adriver("adriver_banner_1863387959", {sid: 176776, bt: 52, bn: 1, custom:
				custom});
			}());
		</script>
		</div>
	
	



















		
		
<div class="block daily_best_posts">
  <div class="title">Лучшее <sup>за 24 часа</sup></div>
  <div class="posts_list">
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/213215/" class="post_name">Теплый ламповый звук</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/yandex/blog/213103/" class="post_name">Яндекс.Кит: новая прошивка для смартфонов</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/213217/" class="post_name">Реакция разных компаний на уязвимости их ресурсов</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/213157/" class="post_name">TCP/IP по аудиоканалу</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/contactless/blog/213243/" class="post_name">Наш контроллер для умного дома</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/213205/" class="post_name">Переполненяем стек в fprintf на Linksys WRT120N</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/212957/" class="post_name">WhatsApp вышел на тропу войны</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/beeline/blog/213235/" class="post_name">Как мы делали автомобильный трекер</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/213233/" class="post_name">Лабораторный программируемый линейный блок питания UnionTest/KORAD UT3005EP и его калибровка/управление</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/213191/" class="post_name">Исследуем обфускацию прошивки Linksys WRT120N</a>
      </div>
  </div>
  <div class="all"><a href="/top/">все лучшие</a></div>
</div>

		
		


<div class="block similar_posts">

	<div class="title">Похожие посты</div>
  <div class="posts_list">
    	<div class="post_item">
    				<a class="post_name" href="/post/192920/">Разбор регулярных выражений</a>
    				<span class="when">07.09.2013</span>
      </div>
    	<div class="post_item">
    				<a class="post_name" href="/post/192356/">Регулярные выражения в WinEdt: поиск формул с неиспользуемыми номерами</a>
    				<span class="when">03.09.2013</span>
      </div>
    	<div class="post_item">
    				<a class="post_name" href="/post/166777/">Регулярные выражения изнутри</a>
    				<span class="when">23.01.2013</span>
      </div>
    	<div class="post_item">
    				<a class="post_name" href="/post/156395/">Использование регулярных выражений в Ruby</a>
    				<span class="when">27.10.2012</span>
      </div>
    	<div class="post_item">
    				<a class="post_name" href="/post/123845/">Регулярные выражения для валидации распространенных видов данных</a>
    				<span class="when">11.07.2011</span>
      </div>
    	<div class="post_item">
    				<a class="post_name" href="/post/115825/">Регулярные выражения, пособие для новичков. Часть 1</a>
    				<span class="when">20.03.2011</span>
      </div>
    	<div class="post_item">
    				<a class="post_name" href="/post/114156/">280 кроказябл или взрывная мощь регулярных выражений</a>
    				<span class="when">20.02.2011</span>
      </div>
    	<div class="post_item">
    				<a class="post_name" href="/post/107992/">Умляуты в регулярных выражениях</a>
    				<span class="when">12.11.2010</span>
      </div>
    	<div class="post_item">
    				<a class="post_name" href="/post/104768/">Тест простоты числа регулярным выражением</a>
    				<span class="when">22.09.2010</span>
      </div>
    	<div class="post_item">
    				<a class="post_name" href="/post/102442/">Основы Linux от основателя Gentoo. Часть 2 (1/5): Регулярные выражения</a>
    				<span class="when">23.08.2010</span>
      </div>
  </div>			
</div>



	    
<div class="block similar_questions">
	<div class="title">Вопросы по теме</div>

	<div class="posts_list">
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/38613?_aa=press_anykey">Метод start в python</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/460?_aa=press_anykey">Как заматчить в питоне многострочный текст регэкспом?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/69334?_aa=press_anykey">Как правильно написать regexp?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/67990?_aa=press_anykey">Регулярное выражение - проблема с кириллицей в названии файла</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/62402?_aa=press_anykey">Как написать поиск русских заглавных букв в строке (regexp, php)?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/61988?_aa=press_anykey">RegExp в php. Проверка строки на наличие нужных последовательностей</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/53938?_aa=press_anykey">Как написать парсер файлов на сайте (Python)?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/40603?_aa=press_anykey">Помогите правильно составить регулярное выражение для org.apache.regexp.re</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/35845?_aa=press_anykey">Почему «срабатывает» выражение?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/21146?_aa=press_anykey">Помогите с регулярным выражением для проверки строки вида 159,5|15|19.6 и вытаскивания чисел</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/17674?_aa=press_anykey">К гуру RegExp-а - как уменьшить число в строке?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/14089?_aa=press_anykey">Регулярное выражение php для получения уникальных доменов в строке</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/11641?_aa=press_anykey">Вопрос для гуру регулярных выражений</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/9910?_aa=press_anykey">RegExp-задачка</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/6792?_aa=press_anykey">PHP + RegExp, поиск по диапазону символов с исключением</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/5012?_aa=press_anykey">Регулярные выражения, использующие lookbehind, на языке JavaScript. Есть ли готовый код, решающий эту проблему раз и навсегда?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/72968?_aa=press_anykey">Как при помощи Python определить имя проводной или беспроводной сети, к которой в текущий момент подключен компьютер?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/72790?_aa=press_anykey">Как заставить Django при отладке запускать удаленный интерпретатор с правами суперюзера?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/72610?_aa=press_anykey">Как на Python (Django) реализовать парсинг query string?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" href="https://toster.ru/q/72598?_aa=press_anykey">Из-за чего низкая скорость обработки больших таблиц (ManyToManyField) в административном интерфейсе Django?</a>
		</div>
  </div>			
		
</div>

		
		

	<div class="block live_broadcast">
		<div class="title">Что обсуждают? </div>

		<div class="live_broadcast_activity">
				<div class="posts_list">
							<div class="post_item">
								
								<a href="/post/212957/#comment_7332745" class="post_name">WhatsApp вышел на тропу войны</a>&nbsp;<span class="count">52</span>
							</div>
							<div class="post_item">
								
								<a href="/post/213217/#comment_7332743" class="post_name">Реакция разных компаний на уязвимости их ресурсов</a>&nbsp;<span class="count">63</span>
							</div>
							<div class="post_item">
								
								<a href="/post/213243/#comment_7332741" class="post_name">Наш контроллер для умного дома</a>&nbsp;<span class="count">49</span>
							</div>
							<div class="post_item">
								
								<a href="/post/213131/#comment_7332739" class="post_name">Обзор ASUS Zenbook UX301LA</a>&nbsp;<span class="count">108</span>
							</div>
							<div class="post_item">
								
								<a href="/post/213279/#comment_7332737" class="post_name">Самолетное: 10 категорий людей — те, которые умеют и которые нет</a>&nbsp;<span class="count">2</span>
							</div>
							<div class="post_item">
								
								<a href="/post/213231/#comment_7332735" class="post_name">Nokia Treasure Tag: «умные» метки на страже ваших вещей</a>&nbsp;<span class="count">6</span>
							</div>
							<div class="post_item">
								
								<a href="/post/213197/#comment_7332733" class="post_name">BigRep One: новый 3D принтер, который может печатать мебель целиком</a>&nbsp;<span class="count">14</span>
							</div>
							<div class="post_item">
								
								<a href="/post/213103/#comment_7332731" class="post_name">Яндекс.Кит: новая прошивка для смартфонов</a>&nbsp;<span class="count">323</span>
							</div>
							<div class="post_item">
								
								<a href="/post/213173/#comment_7332723" class="post_name">«Теоретический минимум» Леонарда Сасскинда издан на русском</a>&nbsp;<span class="count">57</span>
							</div>
							<div class="post_item">
								
								<a href="/post/213069/#comment_7332721" class="post_name">Риски ИИ от LessWrong.com, часть 1: интервью с Шейном Леггом из DeepMind</a>&nbsp;<span class="count">23</span>
							</div>
				</div>
				<div class="all"><a href="/posts/">все посты</a></div>
		</div>

	</div>
  
		

<!--  AdRiver code START. Type:AjaxJS Site: habrahabr PZ: 0 BN: 2 -->
<div id="adriver_banner_480931290" class="adbanner"></div>

<script type="text/javascript">
new adriver("adriver_banner_480931290", {sid:176776, bt:52, bn:2});
</script>


<!--  AdRiver code END  -->
		
<div class="block best_company">

		<div class="title">Компания дня <img src="/images/bg_cicle_help.png" title="
Компания, чей пост набрал максимальное количество баллов<br>
среди всех опубликованных в корпоративных блогах постах за <br>
прошедшие сутки. Учитываются посты, для которых истек срок голосования <br>(3 дня с момента публикации)." class="help-tip"></div>

		<div class="company_info">
			<div class="name">
			 <img class="favicon" src="//habr.habrastorage.org/company/06e/d69/4b4/06ed694b450896cd8466141051206a02_small.jpg" alt="Telebreeze Corporation" height="16" width="16" />
			 <div class="company_name"><a href="http://habrahabr.ru/company/telebreeze/" class="title">Telebreeze Corporation</a></div>
			</div>

			<p>Последний пост:
				<a href="http://habrahabr.ru/company/telebreeze/blog/212797/">10 самых прорывных технологий 2013 года и основанные на них стартапы</a>
			</p>

			<div class="buttons">
  			<div id="fans_count">46 подписчиков</div>
  				<input  type="button"  id="addCompanyFan" data-id="2666" class="blue " title="Мне нравится компания" value="Подписаться" />
  				<input  type="button"  id="removeCompanyFan" data-id="2666" class="hidden" title="Компания мне больше не нравится" value="Подписан" />
			</div>
		</div>

	</div>


		

		
	<div class="block new_vacanies">
  <a href="http://hantim.ru" class="title">Хантим</a>
  <div class="vacancies">
		<div class="job_item ">
			<a href="http://hantim.ru/jobs/22572-razrabotchik-java-v-departament-upravleniya-zakupkami">Разработчик Java в Департамент управления закупками</a>&nbsp;&rarr; <a href="http://naumen.hantim.ru/jobs" class="company_name">NAUMEN</a>
		</div>
		<div class="job_item ">
			<a href="http://hantim.ru/jobs/15904-stazhyor">Стажёр</a>&nbsp;&rarr; <a href="http://intersystems.hantim.ru/jobs" class="company_name">InterSystems  Corporation</a>
		</div>
		<div class="job_item ">
			<a href="http://hantim.ru/jobs/24878-java-developer">Java Developer</a>&nbsp;&rarr; <a href="http://wrike.hantim.ru/jobs" class="company_name">Wrike</a>
		</div>
		<div class="job_item marked">
			<a href="http://hantim.ru/jobs/27196-opytnyy-programmist-c">Опытный программист C++</a>&nbsp;&rarr; <a href="http://viva64.hantim.ru/jobs" class="company_name">ООО "СиПроВер"</a>
		</div>
		<div class="job_item ">
			<a href="http://hantim.ru/jobs/30818-veb-razrabotchik-django">Веб-разработчик Django</a>
		</div>
		<div class="job_item ">
			<a href="http://hantim.ru/jobs/30810-embedded-linux-developer">Embedded Linux Developer</a>&nbsp;&rarr; <a href="http://zodiac.hantim.ru/jobs" class="company_name">Zodiac Interactive </a>
		</div>
		<div class="job_item ">
			<a href="http://hantim.ru/jobs/20530-web-programmist">Web-программист</a>
		</div>
		<div class="job_item ">
			<a href="http://hantim.ru/jobs/30790-veduschiy-razrabotchik-s-s">Ведущий разработчик С++/С# </a>&nbsp;&rarr; <a href="http://speechpro.hantim.ru/jobs" class="company_name">Центр Речевых Технологий</a>
		</div>
		<div class="job_item ">
			<a href="http://hantim.ru/jobs/30788-veduschiy-spetsialist-diasoft-fa">Ведущий специалист Diasoft FA#</a>&nbsp;&rarr; <a href="http://uralsib.hantim.ru/jobs" class="company_name">БАНК УРАЛСИБ (ОАО "УРАЛСИБ")</a>
		</div>
		<div class="job_item ">
			<a href="http://hantim.ru/jobs/11347-veduschiy-programmist-java">Ведущий программист Java</a>&nbsp;&rarr; <a href="http://naumen.hantim.ru/jobs" class="company_name">NAUMEN</a>
		</div>
  </div>
  <div class="all"><a href="http://hantim.ru/">все вакансии</a></div>
</div>

		
	<div class="block freelansim">
	  <a href="http://freelansim.ru" class="title"></a>
	  <div class="tasks">
				<div class="task ">
					<a href="http://freelansim.ru/tasks/55310">Нужно заниматься озвучиванием</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/55308">Перенести сайт на платформу easel </a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/55306">Отредактировать аналитический отчет</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/55302">Написать программу для курсовой работы на языке программирования F#</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/55300">Подключить 1C к интернет магазину Shop Script 5</a>
				</div>
				<div class="task marked">
					<a href="http://freelansim.ru/tasks/55296">Разработка лендинг пейдж и интернет магазина</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/55294">Отвечать на определенные вопросы пользователей Интернета</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/55290">Интересный заказ высокого уровня на верстку</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/55288">Разработать дизайн и UI мобильного приложения для iPhone</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/55286">Node.js developer</a>
				</div>

	  </div>
	  <div class="all"><a href="http://freelansim.ru/tasks">все заказы</a></div>
	</div>

		
		
		

<div class="block similar_events">
	<div class="title">Ближайшие события</div>
		<div class="events_items">
				<div class="event_item">
						<div class="date">
						<div class="dayname dayname_5"></div>
						<div class="day">21</div>
						<div class="month">фев</div>
						</div>
					<div class="title">
						<a href="/events/4381/">DevArt хакатон в Москве</a>
					</div>
				</div>
				<div class="event_item">
						<div class="date">
						<div class="dayname dayname_5"></div>
						<div class="day">21</div>
						<div class="month">фев</div>
						</div>
					<div class="title">
						<a href="/events/4304/">HackDay #30 в Москве</a>
					</div>
				</div>
				<div class="event_item">
						<div class="date">
						<div class="dayname dayname_5"></div>
						<div class="day">21</div>
						<div class="month">фев</div>
						</div>
					<div class="title">
						<a href="/events/4423/">Как стать экспертом по AutoCAD</a>
					</div>
				</div>
				<div class="event_item">
						<div class="date">
						<div class="dayname dayname_5"></div>
						<div class="day">21</div>
						<div class="month">фев</div>
						</div>
					<div class="title">
						<a href="/events/4148/">Курс «Введение в Java»</a>
					</div>
				</div>
				<div class="event_item">
						<div class="date">
						<div class="dayname dayname_5"></div>
						<div class="day">21</div>
						<div class="month">фев</div>
						</div>
					<div class="title">
						<a href="/events/4160/">Курс «Интернет-маркетинг в ИТ»</a>
					</div>
				</div>
		</div>
	<div class="all"><a href="/events/">все события</a></div>
</div>

		
  </div>
  <div class="clear"></div>

  
        	
	<div class="rotated_posts">
			<div class="rotated_post ">
				<a href="http://habrahabr.ru/company/2gis/blog/204004/" class="grey">Графика и типографика нового 2ГИС</a>
			</div>
			<div class="rotated_post ">
				<a href="http://habrahabr.ru/post/204836/" class="grey">Valve вступила в Linux Foundation</a>
			</div>
			<div class="rotated_post last">
				<a href="http://habrahabr.ru/company/3mrussia/blog/203828/" class="grey">Как безопасно читать Хабр на работе с помощью наших экранов защиты информации</a>
			</div>
		<div class="clear"></div>
	</div>

        <div class="clear"></div>
      </div>
    </div>


    <script type="text/javascript">
      $(document).ready(function(){
        // test gggg
        // настройки всплывающих уведомлений
        $.jGrowl.defaults.closerTemplate = '<div>Закрыть все уведомления</div>';         
        
        // настройки тултипов
        $(".help-tip").tipTip({maxWidth: "300px", edgeOffset: 10});  
        
      });
      // global vars
      var g_base_url = 'habrahabr.ru';
      var g_show_xpanel = true;
      var g_base_fullurl = 'http://habrahabr.ru/';
      var g_is_guest = true;
        var g_user_login = 'zlodiak';
        var g_user_id = 215974;
        var g_user_avatar = 'http://habrahabr.ru/i/avatars/stub-user-small.gif';   
    </script>
    
    <script type="text/javascript" src="/javascripts/1392889138/_parts/shortcuts.js"></script>
    <script type="text/javascript" src="/javascripts/1392889138/_parts/to_top.js"></script>
    <link href="/styles/1392889138/_parts/_to_top.css" rel="stylesheet" media="all" />

    
    <script type="text/javascript" src="/javascripts/1392889138/_parts/float_block.js"></script>
    
    <!-- <script type="text/javascript" src="/javascripts/1392889138/_parts/float_block.js"></script> //-->
      <!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter19919284 = new Ya.Metrika({id:19919284,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/19919284" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->





<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-726094-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- tns-counter.ru -->
<script type="text/javascript">
(new Image()).src = '//www.tns-counter.ru/V13a***R>' + document.referrer.replace(/\*/g,'%2a') + '*tmtm_ru/ru/UTF-8/tmsec=habrahabr_total/' + Math.round(Math.random()*1E9);
</script>
<noscript>
	<img src="http://www.tns-counter.ru/V13a****tmtm_ru/ru/UTF-8/tmsec=habrahabr_total/" width="1" height="1" alt="" />
</noscript>
<!--/ tns-counter.ru -->

    <script type="text/javascript" src="/javascripts/1392889138/advertising.js"></script>
    	<script type="text/javascript" src="http://habrahabr.ru/viewcount/post/115436/"></script>

    
    <div id="footer">
	<dl class="user">
		<dt><a href="http://habrahabr.ru/users/zlodiak/">zlodiak</a></dt>
		<dd><a href="http://habrahabr.ru/tracker/">Трекер</a></dd>
			<dd><a href="http://habrahabr.ru/sandbox/add/">Написать</a></dd>
				<dd><a href="https://auth.habrahabr.ru/settings/upgrade/">Read-only</a></dd>

			<dd><a href="https://auth.habrahabr.ru/settings/">Настройки</a></dd>
	</dl>
	<dl>
		<dt>Разделы</dt>

		<!--dd><a href="http://habrahabr.ru/qa/">Q&A</a></dd-->
		<dd><a href="http://habrahabr.ru/hubs/">Хабы</a></dd>
		<dd><a href="http://habrahabr.ru/events/">События</a></dd>
		<dd><a href="http://habrahabr.ru/companies/">Компании</a></dd>
		<dd><a href="http://habrahabr.ru/users/">Пользователи</a></dd>
	</dl>
	<dl>
		<dt>Посты</dt>
		<dd><a href="http://habrahabr.ru/feed/">Лента</a></dd>
		<dd><a href="http://habrahabr.ru/posts/top/">Лучшие</a></dd>
		<dd><a href="http://habrahabr.ru/posts/collective/">Тематические</a></dd>
		<dd><a href="http://habrahabr.ru/posts/corporative/">Корпоративные</a></dd>
		<dd><a href="http://habrahabr.ru/sandbox/">Песочница</a></dd>
	</dl>
	<dl>
		<dt>Инфо</dt>
		<dd><a href="http://habrahabr.ru/info/about/">О сайте</a></dd>
		<dd><a href="http://habrahabr.ru/info/help/rules/">Правила</a></dd>
		<dd><a href="http://habrahabr.ru/info/help/">Помощь</a></dd>
		<dd><a href="http://habrahabr.ru/info/agreement/">Соглашение</a></dd>
		<dd><a href="http://habrahabr.ru/info/stats/">Статистика</a></dd>
	</dl>
	<dl>
		<dt>Услуги</dt>
		<dd><a href="http://habrahabr.ru/info/advertising/">Реклама</a></dd>
		<dd><a href="http://habrahabr.ru/info/advertising/corporate/">Корпоративные тарифы</a></dd>
		<dd><a href="http://habrahabr.ru/info/advertising/workshops/">Семинары</a></dd>
		<dd><a href="http://habrahabr.ru/special/">Спецпроекты</a></dd>
		<dd><a href="http://habrahabr.ru/special/minsvyaz/" style="color:green;">Льготы стартапам</a></dd>
	</dl>
	<div class="copyright">

		<div class="about">
			<a href="http://tmtm.ru/">TM</a>
			© 2006&#8211;2014
			<br><br>
			<a href="http://habrahabr.ru/feedback/">Служба поддержки</a><br><br>
			<a href="http://m.habrahabr.ru">Мобильная версия</a><br><br>


			<div class="social_accounts">
				<a href="https://twitter.com/habrahabr" class="tw"></a>
				<a href="https://www.facebook.com/habrahabr.ru" class="fb"></a>
				<a href="http://vk.com/habr" class="vk"></a>
				<!-- <a href="" class="gp"></a> //-->
			</div>

		</div>
	</div>

</div>    
    <div class="footer_logos">
		
		<div class="project brainstorage">
			<a href="http://brainstorage.ru" class="icon "></a>
			<div class="text">Все мозги в одном месте</div>
		</div>

		<div class="project toster">
			<a href="http://toster.ru" class="icon "></a>
			<div class="text">Q&A-сервис для разработчиков</div>
		</div>
		
		<div class="project freelansim">
			<a href="http://freelansim.ru" class="icon "></a>
			<div class="text">Заказы для фрилансеров</div>
		</div>
		
		
		<div class="project hantim">
			<a href="http://hantim.ru" class="icon "></a>
			<div class="text">Вакансии для айтишников</div>
		</div>
		
		<div class="project autokadabra">
			<a href="http://autokadabra.ru" class="icon "></a>
			<div class="text ">Уютная и дружелюбная</div>
		</div>
		
</div>


    
    
  </body>
</html>
