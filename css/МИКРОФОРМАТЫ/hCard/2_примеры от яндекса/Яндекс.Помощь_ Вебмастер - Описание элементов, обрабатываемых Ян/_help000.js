(function(a){if(!a){a=window.Lego={}}a.messages=a.messages||{};a.message=function(c,b){return a.params.locale=="ru"?b:(a.messages[c]||b)}})(window.Lego);(function(a){if(!a){a=window.Lego={}}a.oframebust=function(c){if(location==top.location){return}var d=(location.search.match(/[&?]oframebust=([^&;]+)/)||[])[1];if(!d){top.location=location}if(c.hasOwnProperty(d)){var b=document.createElement("iframe");b.style.position="absolute";b.style.left="-999px";b.style.width="1px";b.src="//"+d+"/oframebust.html?"+encodeURIComponent(location.href);(function(){if(document.body&&document.body.firstChild){document.body.insertBefore(b,document.body.firstChild)}else{setTimeout(arguments.callee,0)}})();return}top.location=location}})(window.Lego);(function(c,b){var d;function a(e){e[0]&&!!e.attr("href")&&(window.location.href=e.attr("href"))}b.block["b-pager"]=function(e){if(d){return e.override&&(d=c(this))}d=c(this);if(e.keydownReaction){c(document).keydown(function(f){if(!f.ctrlKey||c(f.target).is("input, textarea")){return}if(f.keyCode==37){a(d.find(".b-pager__prev"))}else{if(f.keyCode==39){a(d.find(".b-pager__next"))}}})}}})(jQuery,window.Lego);(function(e){var b=(function(){_}).toString().indexOf("_")>-1,a=e.browser.msie,c=a?["toString","valueOf"]:null,f=function(){};function d(h,g,i){var k=false;if(a){var j=[];e.each(c,function(){i.hasOwnProperty(this)&&(k=true)&&j.push({name:this,val:i[this]})});if(k){e.each(i,function(l){j.push({name:l,val:this})});i=j}}e.each(i,function(m,n){if(k){m=n.name;n=n.val}if(e.isFunction(n)&&(!b||n.toString().indexOf(".__base")>-1)){var l=h[m]||function(){};g[m]=function(){var q=this.__base;this.__base=l;var o=n.apply(this,arguments);this.__base=q;return o}}else{g[m]=n}})}e.inherit=function(){var h=e.isFunction(arguments[0]),n=h?arguments[0]:f,j=arguments[h?1:0]||{},l=arguments[h?2:1],g=j.__constructor||(h&&n.prototype.__constructor)?function(){this.__constructor.apply(this,arguments)}:function(){};if(!h){g.prototype=j;g.prototype.__self=g.prototype.constructor=g;return e.extend(g,l)}e.extend(g,n);var k=function(){},i=k.prototype=n.prototype,m=g.prototype=new k();m.__self=m.constructor=g;d(i,m,j);l&&d(n,g,l);return g};e.inheritSelf=function(j,h,i){var g=j.prototype;d(g,g,h);i&&d(j,j,i);return j}})(jQuery);(function(c){var a=0,d="__"+(+new Date),b=function(){return"uniq"+ ++a};c.identify=function(g,f){if(!g){return b()}var e="uniqueID" in g?"uniqueID":d;return f||e in g?g[e]:g[e]=b()}})(jQuery);(function(a){a.isEmptyObject||(a.isEmptyObject=function(c){for(var b in c){return false}return true})})(jQuery);(function(d){var a="__"+ +new Date+"storage",c=function(f,e){return d.identify(f)+(e?d.identify(e):"")},b={buildEventName:function(f){return f},on:function(o,j,q,t,m){if(typeof o=="string"){if(d.isFunction(j)){t=q;q=j;j=undefined}var f=c(q,t),l=this[a]||(this[a]={}),g=o.split(" "),h=0,r;while(o=g[h++]){o=this.buildEventName(o);r=l[o]||(l[o]={ids:{},list:{}});if(!(f in r.ids)){var n=r.list,s={fn:q,data:j,ctx:t||this,special:m};if(n.last){n.last.next=s;s.prev=n.last}else{n.first=s}r.ids[f]=n.last=s}}}else{var k=this;d.each(o,function(u,i){k.on(u,i,j,m)})}return this},onFirst:function(i,h,g,f){return this.on(i,h,g,f,{one:true})},un:function(q,r,u){if(typeof q=="string"||typeof q=="undefined"){var n=this[a];if(n){if(q){var h=q.split(" "),k=0,s;while(q=h[k++]){q=this.buildEventName(q);if(s=n[q]){if(r){var g=c(r,u),f=s.ids;if(g in f){var o=s.list,t=f[g],j=t.prev,l=t.next;if(j){j.next=l}else{if(t===o.first){o.first=l}}if(l){l.prev=j}else{if(t===o.last){o.last=j}}delete f[g]}}else{delete this[a][q]}}}}else{delete this[a]}}}else{var m=this;d.each(q,function(v,i){m.un(v,i,u)})}return this},trigger:function(k,i){var l=this[a],j;typeof k==="string"?k=d.Event(this.buildEventName(j=k)):k.type=this.buildEventName(j=k.type);if(l&&(l=l[k.type])){var h=l.list.first,f,g;while(h){k.data=h.data;f=h.fn.call(h.ctx,k,i);if(typeof f!=="undefined"){k.result=f;if(f===false){k.preventDefault();k.stopPropagation()}}g=h.next;h.special&&h.special.one&&this.un(j,h.fn,h.ctx);h=g}}return this}};d.observable=d.inherit(b,b)})(jQuery);(function(e,g){var d=[],f={},a={};function c(j,i,h){return(j?"__elem_"+j:"")+"__mod"+(i?"_"+i:"")+(h?"_"+h:"")}function b(i,h,j){e.isFunction(i)?(h[c(j,"*","*")]=i):e.each(i,function(l,k){e.isFunction(k)?(h[c(j,l,"*")]=k):e.each(k,function(m,n){h[c(j,l,m)]=n})})}this.BEM=e.inherit(e.observable,{__constructor:function(i,h){var j=this;j._modCache={};j._processingMods={};j.params=e.extend(j.getDefaultParams(),i);j._uniqId=j.params.uniqId||e.identify(j);a[j._uniqId]=j;h!==false?j._init():j.afterCurrentEvent(j._init)},_init:function(){var h=this;if("_uniqId" in h&&!h.hasMod("js","inited")){h.setMod("js","inited").trigger("init")}return h},changeThis:function(i,h){var j=this;return function(){return i.apply(h||j,arguments)}},afterCurrentEvent:function(i,h){this.__self.afterCurrentEvent(this.changeThis(i,h))},bind:function(j,k,i,h){return this.on(j,k,i,h)},bindOne:function(j,k,i,h){return this.onFirst(j,k,i,h)},unbind:function(i,h){return this.un(i,h)},trigger:function(i,h){this.__base(i=this.buildEvent(i),h).__self.trigger(i,h);return this},buildEvent:function(h){typeof h=="string"&&(h=e.Event(h));h.block=this;return h},hasMod:function(i,j,h){if(arguments.length==2){h=j;j=i;i=g}return this.getMod(i,j)===h},getMod:function(j,k){var h=typeof j;if(h==="string"||h==="undefined"){k=j||k;var i=this._modCache;return k in i?i[k]:i[k]=this._extractModVal(k)}return this._getElemMod(k,j)},_getElemMod:function(j,h,i){return this._extractModVal(j,h,i)},getMods:function(k){var i=k&&typeof k!="string",l=this,h=[].slice.call(arguments,i?1:0),j=l._extractMods(h,i?k:g);if(!i){h.length?e.each(h,function(n,m){l._modCache[m]=j[m]}):l._modCache=j}return j},setMod:function(k,o,q){if(typeof q=="undefined"){q=o;o=k;k=g}var l=this;if(!k||k[0]){var m=(k&&k[0]?e.identify(k[0]):"")+"_"+o;if(this._processingMods[m]){return l}var j,i=k?l._getElemMod(o,k,j=l.__self._extractElemNameFrom(k)):l.getMod(o);if(i===q){return l}this._processingMods[m]=true;var h=true,n=[o,q,i];k&&n.unshift(k);e.each([["*","*"],[o,"*"],[o,q]],function(){h=l._callModFn(j,this[0],this[1],n)!==false&&h});!k&&h&&(l._modCache[o]=q);h&&l._afterSetMod(o,q,k,j);delete this._processingMods[m]}return l},_afterSetMod:function(j,h,i){},toggleMod:function(j,k,i,m,l){if(typeof j=="string"){l=m;m=i;i=k;k=j;j=g}if(typeof m=="undefined"){m=""}else{if(typeof m=="boolean"){l=m;m=""}}var h=this.getMod(j,k);(h==i||h==m)&&this.setMod(j,k,typeof l==="boolean"?(l?i:m):this.hasMod(j,k,i)?m:i);return this},delMod:function(h,i){if(!i){i=h;h=g}return this.setMod(h,i,"")},_callModFn:function(k,j,h,i){var l=c(k,j,h);return this[l]?this[l].apply(this,i):g},_extractModVal:function(i,h){return""},_extractMods:function(h,i){return{}},getDefaultParams:function(){return{}},del:function(i){var h=[].slice.call(arguments);typeof i=="string"&&h.unshift(this);this.__self.del.apply(this.__self,h);return this},destruct:function(){delete a[this.un()._uniqId];delete this._uniqId}},{_name:"i-bem",blocks:f,_uniqIdToBlock:a,getBlockByUniqId:function(h){return a[h]},decl:function(h,i,k){if(typeof h=="string"){h={block:h}}else{if(h.name){h.block=h.name}}if(i.onSetMod){b(i.onSetMod,i);delete i.onSetMod}if(i.onElemSetMod){e.each(i.onElemSetMod,function(n,m){b(m,i,n)});delete i.onElemSetMod}var j=f[h.baseBlock||h.block]||this;if(h.modName){e.each(i,function(m,n){e.isFunction(n)&&(i[m]=function(){var q;if(this.hasMod(h.modName,h.modVal)){q=n}else{var o=j.prototype[m];o&&o!==i[m]&&(q=this.__base)}return q?q.apply(this,arguments):g})})}var l;h.block==j._name?(l=e.inheritSelf(j,i,k))._processLive(true):(l=f[h.block]=e.inherit(j,i,k))._name=h.block;return l},_processLive:function(h){return false},create:function(h,i){return new f[h](i)},getName:function(){return this._name},_extractElemNameFrom:function(h){},afterCurrentEvent:function(i,h){d.push({fn:i,ctx:h})==1&&setTimeout(function(){var j,k=d.splice(0,d.length);while(j=k.shift()){j.fn.call(j.ctx||this)}},0)},changeThis:function(i,h){return function(){return i.apply(h||this,arguments)}},del:function(l){var k=typeof l=="string",j=k?0:1,h=arguments.length;k&&(l=this);while(j<h){delete l[arguments[j++]]}return this}})})(jQuery);(function(i,b,a){var g="_",c="__",d="[a-zA-Z0-9-]+";function e(l,j,k){k.push(g,l,g,j)}function f(l,m,j,k){k.push(l);j&&e(m,j,k)}function h(n,l,m,j,k){f(n,a,a,k);k.push(c,l);j&&e(m,j,k)}i.INTERNAL={NAME_PATTERN:d,MOD_DELIM:g,ELEM_DELIM:c,buildModPostfix:function(m,j,k){var l=k||[];e(m,j,l);return k?l:l.join("")},buildClass:function(q,n,o,j,k){var m=typeof o;if(m=="string"){if(typeof j!="string"){k=j;j=o;o=n;n=a}}else{if(m!="undefined"){k=o;o=a}else{if(n&&typeof n!="string"){k=n;n=a}}}if(!(n||o||k)){return q}var l=k||[];n?h(q,n,o,j,l):f(q,o,j,l);return k?l:l.join("")},buildClasses:function(n,m,l,j){var k=j||[];m?h(n,m,a,a,k):f(n,a,a,k);l&&b.each(l,function(q,o){if(o){k.push(" ");m?h(n,m,q,o,k):f(n,q,o,k)}});return j?k:k.join("")}}})(BEM,jQuery);(function(a){var b=a.event.special.leftclick={setup:function(){a(this).bind("click",b.handler)},teardown:function(){a(this).unbind("click",b.handler)},handler:function(c){if(!c.button){c.type="leftclick";a.event.handle.apply(this,arguments);c.type="click"}}}})(jQuery);(function(a,c){if(typeof JSON!="undefined"){return a.stringify=JSON.stringify}var b=Object.prototype.toString;a.stringify=function(h){if(h===null){return"null"}switch(b.call(h)){case"[object String]":return'"'+h.replace(/"/g,'\\"')+'"';case"[object Number]":case"[object Boolean]":return""+h;case"[object Array]":var g="[",f=0,d=h.length,j;while(f<d){j=a.stringify(h[f]);g+=(f++>0?",":"")+(typeof j=="undefined"?"null":j)}return g+"]";case"[object Object]":var g="{",f=0,j;for(var e in h){if(h.hasOwnProperty(e)){j=a.stringify(h[e]);typeof j!="undefined"&&(g+=(f++>0?",":"")+'"'+e+'":'+j)}}return g+"}";default:return c}}})(jQuery);(function(k,d,c){var g=k.INTERNAL,f=g.ELEM_DELIM,h={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},i=g.buildClasses,j={};function e(l,m,n){(l[m]||(l[m]=[])).unshift(n)}function b(l,m){return m.modName?function(n){(n._currBlock.mods||{})[m.modName]===m.modVal&&l(n)}:l}function a(m,l){var o=d.isArray(l),n;d.isArray(m)?o?n=m.concat(l):(n=m).push(l):o?(n=l).unshift(m):n=[m,l];return n}k.HTML={decl:function(n,m){typeof n=="string"&&(n={name:n});var l=j[n.name]||(j[n.name]={});m.onBlock&&e(l,"_block",b(m.onBlock,n));if(m.onElem){d.isFunction(m.onElem)?e(l,"_elem",b(m.onElem,n)):d.each(m.onElem,function(q,o){e(l,"_elem"+(q==="*"?"":f+q),b(o,n))})}},build:function(m){var l=new this.Ctx(m);l._buildAll();return l._flush()},Ctx:d.inherit({__constructor:function(l){this._buffer=[];this._params=l;this._tParams=null;this._tParamsChanges=null;this._currBlock=c},pos:function(){return this._params._pos},isFirst:function(){return this._params._pos===1},isLast:function(){var l=this._params;return l._pos===l._siblingsCount},params:function(l){var m=this;if(typeof l=="undefined"){return m._params}m._params=l;return m},param:function(l,o,m,r){var q=this,n=q._params;if(typeof o=="undefined"){return n[l]}if(m||!(l in n)){n[l]=o}else{if(r){n[l]=d.extend(o,n[l])}}return q},attrs:function(m,l){return this.param("attrs",m,l,true)},attr:function(m,o,n){var q=this;if(typeof o=="undefined"){return(q._params.attrs||{})[m]}var l=q._params.attrs;l?(n||!(m in l))&&(l[m]=o):(q._params.attrs={})[m]=o;return q},tag:function(m,l){return this.param("tag",m,l)},cls:function(m,l){return this.param("cls",m,l)},mods:function(m,l){return this.param("mods",m,l,true)},mod:function(l,o,n){var q=this;if(typeof o=="undefined"){return(q._params.mods||{})[l]}var m=q._params.mods;m?(n||!(l in m))&&(m[l]=o):(q._params.mods={})[l]=o;return q},js:function(l){return this.param("js",l)},content:function(m,l){return this.param("content",m,l)},wrapContent:function(l){var n=this,m=n._params;l.content=m.content;m.content=l;return n},beforeContent:function(l){var n=this,m=n._params;m.content=a(l,m.content);return n},afterContent:function(l){var n=this,m=n._params;m.content=a(m.content,l);return n},wrap:function(l){var n=this,m=n._params;l.block||(l._currBlock=n._currBlock);l.content=m._wrapper?m._wrapper:m;m._wrapper=l;return n},tParam:function(l,o){var q=this,n=q._tParams||(q._tParams={});if(typeof o=="undefined"){return n[l]}var m=q._tParamsChanges||(q._tParamsChanges={});l in m||(m[l]=n[l]);n[l]=o;return q},_buildAll:function(){var t=this,m=t._buffer,s=t._params,q=typeof s;if(q=="string"||q=="number"){m.push(s)}else{if(d.isArray(s)){var o=0,l=s.length,n,r;while(o<l){t._params=n=s[o++];r=typeof n;if(r=="string"||r=="number"){m.push(n)}else{if(n){n._pos=o;n._siblingsCount=l;t._buildByDecl()}}}}else{if(s){t._params._pos=t._params._siblingsCount=1;t._buildByDecl()}}}},_build:function(){var r=this,m=r._buffer,q=r._params,l=q.tag||"div",o,n=q.block||q.elem;q.js&&((o={})[q.block]=q.js===true?{}:q.js);m.push("<",l);if(n||q.cls){m.push(' class="');if(n){i(q.block||r._currBlock.block,q.elem,q.mods,m);q.mix&&d.each(q.mix,function(s,t){m.push(" ");i(t.block,t.elem,t.mods,m);t.js&&((o||(o={}))[t.block]=t.js===true?{}:t.js)})}q.cls&&m.push(n?" ":"",q.cls);o&&m.push(" i-bem");m.push('"')}o&&m.push(' onclick="return ',d.stringify(o).replace(/'/g,"\\'").replace(/"/g,"'"),'"');q.attrs&&d.each(q.attrs,function(s,t){t!==false&&m.push(" ",s,'="',typeof t!="undefined"&&t!==null?t.toString().replace(/"/g,"&quot;"):"",'"')});if(h[l]){m.push("/>")}else{m.push(">");if(typeof q.content!="undefined"){r._params=q.content;r._buildAll()}m.push("</",l,">")}},_flush:function(){var l=this._buffer.join("");delete this._buffer;return l},_buildByDecl:function(){var o=this,s=o._currBlock,l=o._params;l._currBlock&&(o._currBlock=l._currBlock);l.block&&(o._currBlock=l);if(!l._wrapper){if(l.block||l.elem){var r=j[o._currBlock.block];if(r){var t;if(l.elem){t=r["_elem"+f+l.elem];r._elem&&(t=(t?t.concat(r._elem):r._elem))}else{t=r._block}if(t){var m=0,q;while(q=t[m++]){q(o)}}}}if(l._wrapper){l._currBlock=o._currBlock;o._params=l._wrapper;return o._buildAll()}}var u=o._tParamsChanges;o._tParamsChanges=null;o._build();o._currBlock=s;if(u){var n=o._tParams;d.each(u,function(v,w){typeof w=="undefined"?delete n[v]:n[v]=w})}}})}})(BEM,jQuery);(function(i,e,h){var d=e(window),y=e(document),m={},A={},f={},q={},v=i.blocks,w=i._uniqIdToBlock,b=i.INTERNAL,k=b.NAME_PATTERN,o=b.MOD_DELIM,j=b.ELEM_DELIM,z=b.buildModPostfix,t=b.buildClass;function r(D,B){var C=D[0];e.each(s(C),function(E,G){c(G,C,E,B);var F=w[G.uniqId];F?F._addDomElem(D):a(E,D,G)})}function a(I,E,D,B,J){if(typeof D=="boolean"){J=B;B=D;D=h}var F=E[0];D=c(D||s(F)[I],F,I);var H=D.uniqId;if(w[H]){return w[H]._init()}m[H]=m[H]?m[H].add(E):E;var G=v[I]||u.decl(I,{},{live:true});if(B||!(G._liveInitable=!!G._processLive())){var C=new G(m[H],D,!!B);delete m[H];J&&J.apply(C,Array.prototype.slice.call(arguments,4));return C}}function c(G,D,C,B){(G||(G={})).uniqId||(G.uniqId=(G.id?C+"-id-"+G.id:e.identify())+(B||e.identify()));var F=e.identify(D),E=A[F]||(A[F]={});E[C]||(E[C]=G);return G}function x(C,B,E){var D=C.find(B);return E?D:D.add(C.filter(B))}function s(B){var C=e.identify(B);return A[C]||(A[C]=g(B))}function g(D){var C=D.onclick;if(!C&&D.tagName.toLowerCase()=="body"){var B=e(D).attr("onclick");B&&(C=Function(B))}return C?C():{}}function l(B){delete A[e.identify(B)]}function n(){return y[0][e.support.boxModel?"documentElement":"body"]}e.fn.bem=function(B,C){return a(B,this,C,true)};var u=i.DOM=i.decl("i-bem__dom",{__constructor:function(C,D,B){this.domElem=C;this._eventNameCache={};this._elemCache={};this._needSpecialUnbind=false;this.__base(D,B)},_addDomElem:function(B){this.domElem=this.domElem.add(B)},_removeDomElem:function(B){!(this.domElem=this.domElem.not(B))[0]&&this.destruct()},findBlocksInside:function(B,C){return this._doBlocksMethod(this._buildFindBlocksParams("find",B,C))},findBlockInside:function(B,C){return this._doBlocksMethod(this._buildFindBlocksParams("find",B,C,true))},findBlocksOutside:function(B,C){return this._doBlocksMethod(this._buildFindBlocksParams("closest",B,C))},findBlockOutside:function(B,C){return this.findBlocksOutside(B,C)[0]},findBlocksOn:function(B,C){return this._doBlocksMethod(this._buildFindBlocksParams("",B,C))},findBlockOn:function(B,C){return this._doBlocksMethod(this._buildFindBlocksParams("",B,C,true))},_buildFindBlocksParams:function(B,C,E,D){return{select:B,elem:E?C:h,block:E||C,onlyFirst:D}},doBlocksMethodInside:function(C,D,E,B){return this._doBlocksMethod(this._buildDoBlocksMethodParams("find",C,D,E,B))},doBlocksMethodOutside:function(C,D,E,B){return this._doBlocksMethod(this._buildDoBlocksMethodParams("closest",C,D,E,B))},doBlocksMethodOn:function(C,D,E,B){return this._doBlocksMethod(this._buildDoBlocksMethodParams("",C,D,E,B))},doBlocksMethod:function(C,D,B){return this._doBlocksMethod({blocks:C,method:D,args:B})},_buildDoBlocksMethodParams:function(B,E,F,G,D){var C=typeof G=="string";return{select:B,elem:C?E:h,block:C?F:E,method:C?G:F,args:C?D:G}},_doBlocksMethod:function(C){var F=this;if(C.blocks){return e.map(C.blocks,function(K){return F._doBlockMethod(K,C.method,C.args)})}var E=C.elem?(typeof C.elem=="string"?this.findElem(C.elem):C.elem):this.domElem,D=typeof C.block=="string",J=D?C.block:C.block.blockName,B="."+(D?t(J):t(J,C.block.modName,C.block.modVal))+(C.onlyFirst?":first":""),G=E.filter(B);C.select&&(G=G.add(E[C.select](B)));if(C.onlyFirst){return G[0]?this._doBlockMethod(a(J,G.eq(0),true),C.method,C.args):null}if(C.method){return e.map(G,function(K){return F._doBlockMethod(a(J,e(K),true),C.method,C.args)})}var I=[],H={};e.each(G,function(K,L){var M=a(J,e(L),true);if(!H[M._uniqId]){H[M._uniqId]=true;I.push(M)}});return I},_doBlockMethod:function(C,D,B){return D?C[D].apply(C,B||[]):C},bindToDomElem:function(C,D,B){var E=this;B?C.bind(E._buildEventName(D),function(F){(F.data||(F.data={})).domElem=e(this);return B.apply(E,arguments)}):e.each(D,function(G,F){E.bindToDomElem(C,G,F)});return E},bindToDoc:function(C,B){this._needSpecialUnbind=true;return this.bindToDomElem(y,C,B)},bindToWin:function(C,B){this._needSpecialUnbind=true;return this.bindToDomElem(d,C,B)},bindToBlock:function(C,B){return this.bindToDomElem(this.domElem,C,B)},bindToElem:function(D,C,B){return this.bindToDomElem(typeof D=="string"?this.findElem(D):D,C,B)},bindTo:function(D,C,B){if(!C||e.isFunction(C)){B=C;C=D;D=this.domElem}else{if(typeof D=="string"){D=this.elem(D)}}return this.bindToDomElem(D,C,B)},unbindFromDomElem:function(B,C){B.unbind(this._buildEventName(C));return this},unbindFromDoc:function(B){return this.unbindFromDomElem(y,B)},unbindFromWin:function(B){return this.unbindFromDomElem(d,B)},unbindFromBlock:function(B){return this.unbindFromDomElem(this.domElem,B)},unbindFromElem:function(C,B){return this.unbindFromDomElem(typeof C=="string"?this.findElem(C):C,B)},unbindFrom:function(C,B){if(!B){B=C;C=this.domElem}else{if(typeof C=="string"){C=this.elem(C)}}return this.unbindFromDomElem(C,B)},_buildEventName:function(B){var C=this;return B.indexOf(" ")>1?e.map(B.split(" "),function(D){return C._buildOneEventName(D)}).join(" "):C._buildOneEventName(B)},_buildOneEventName:function(D){var F=this,B=F._eventNameCache;if(D in B){return B[D]}var E="."+F._uniqId;if(D.indexOf(".")<0){return B[D]=D+E}var C=".bem_"+F.__self._name;return B[D]=e.map(D.split("."),function(H,G){return G==0?H+C:C+"_"+H}).join("")+E},trigger:function(C,B){this.__base(C=this.buildEvent(C),B)._ctxTrigger(C,B);return this},_ctxTrigger:function(C,B){var F=this,E=f[F.__self._buildCtxEventName(C.type)],D={};E&&F.domElem.each(function(){var H=this,G=E.counter;while(H&&G){var J=e.identify(H,true);if(J){if(D[J]){break}var I=E.ctxs[J];if(I){e.each(I,function(L,K){K.fn.call(K.ctx||F,C,B)});G--}D[J]=true}H=H.parentNode}})},setMod:function(C,D,B){if(C&&typeof B!="undefined"&&C.length>1){var E=this;C.each(function(){E.setMod(e(this),D,B)});return E}return this.__base(C,D,B)},_extractModVal:function(F,C,E){var B=(C||this.domElem)[0],D;B&&(D=B.className.match(this.__self._buildModValRE(F,E||C)));return D?D[2]:""},_extractMods:function(B,F){var E={},C=!B.length,D=0;e.each((F||this.domElem)[0].className.match(this.__self._buildModValRE("("+(C?k:B.join("|"))+")",F,"g"))||[],function(G,H){var J=(H=e.trim(H)).lastIndexOf(o),I=H.substr(0,J-1).lastIndexOf(o);E[H.substr(I+1,J-I-1)]=H.substr(J+1);++D});D<B.length&&e.each(B,function(G,H){H in E||(E[H]="")});return E},_afterSetMod:function(H,D,F,G){var C=this.__self,B=C._buildModClassPrefix(H,G),E=C._buildModValRE(H,G),I=D==="";(F||this.domElem).each(function(){var J=this.className;J.indexOf(B)>-1?this.className=J.replace(E,(I?"":"$1"+B+D)+"$3"):I||e(this).addClass(B+D)});G&&this.dropElemCache(G,H,D)},findElem:function(E,G,F,D){if(arguments.length%2){D=F;F=G;G=E;E=this.domElem}else{if(typeof E=="string"){E=this.findElem(E)}}var C=this.__self,B="."+e.map(G.split(" "),function(H){return t(C._name,H,F,D)}).join(",.");return x(E,B)},_elem:function(C,E,B){var D=C+z(E,B);return this._elemCache[D]||(this._elemCache[D]=this.findElem(C,E,B))},elem:function(E,D,B){if(E.indexOf(" ")<0){return this._elem(E,D,B)}var C=e([]),F=this;e.each(E.split(" "),function(){C=C.add(F._elem(this,D,B))});return C},dropElemCache:function(E,D,B){if(E){var F=this,C=z(D,B);E.indexOf(" ")<0?delete F._elemCache[E+C]:e.each(E.split(" "),function(H,G){delete F._elemCache[G+C]})}else{this._elemCache={}}return this},containsDomElem:function(B){return B.parents().andSelf().index(this.domElem)>-1},buildSelector:function(C,D,B){return this.__self.buildSelector(C,D,B)},destruct:function(C){var D=this,B=D.__self;D._needSpecialUnbind&&B.doc.add(B.win).unbind("."+D._uniqId);D.__base();D.dropElemCache().domElem.each(function(E,F){e.each(s(F),function(G,H){var I=w[H.uniqId];I&&I._removeDomElem(F)});l(F)});C||D.domElem.remove();delete D.domElem;delete D._elemCache}},{doc:y,win:d,_processLive:function(C){var E=this,D=E._liveInitable;if("live" in E){var B=typeof D=="undefined";if(B^C){if(e.isFunction(E.live)){D=E.live()!==false;E.live=function(){}}else{D=E.live}}}return D},init:function(C,E,D){if(!C||e.isFunction(C)){D=E;E=C;C=y}var B=e.identify();x(C,".i-bem").each(function(){r(e(this),B)});E&&this.afterCurrentEvent(E,D)},destruct:function(C,B,D){if(typeof C!="boolean"){D=B;B=C;C=h}x(B,".i-bem",D).each(function(){e.each(s(this),function(E,F){if(F.uniqId){var G=w[F.uniqId];G&&G.destruct(true)}});l(this)});C||(D?B.empty():B.remove())},update:function(B,C,E,D){this.destruct(B,true);this.init(B.html(C),E,D)},_buildCtxEventName:function(B){return this._name+":"+B},_liveClassBind:function(D,E,I,B){var H=this;if(E.indexOf(" ")>-1){e.each(E.split(" "),function(J,K){H._liveClassBind(D,K,I,B)})}else{var C=H._buildCtxEventName(E),G=q[C],F=e.identify(I);if(!G){G=q[C]={};y.bind(E,H.changeThis(H._liveClassTrigger,H))}G=G[D]||(G[D]={uniqIds:{},fns:[]});if(!(F in G.uniqIds)){G.fns.push({uniqId:F,fn:H._buildLiveEventFn(I,B)});G.uniqIds[F]=G.fns.length-1}}return this},_liveClassUnbind:function(E,F,I){var D=this._buildCtxEventName(F),H=q[D];if(H){if(I){if(H=H[E]){var G=e.identify(I);if(G in H.uniqIds){var C=H.uniqIds[G],B=H.fns.length-1;H.fns.splice(C,1);while(C<B){H.uniqIds[H.fns[C++].uniqId]=C-1}delete H.uniqIds[G]}}}else{delete H[E]}}return this},_liveClassTrigger:function(H){var G=q[this._buildCtxEventName(H.type)];if(G){var D=H.target,B=[];for(var I in G){G.hasOwnProperty(I)&&B.push(I)}do{var C=" "+D.className+" ",F=0;while(I=B[F++]){if(C.indexOf(" "+I+" ")>-1){var E=0,K=G[I].fns,J;while(J=K[E++]){J.fn.call(e(D),H)}B.splice(--F,1)}}}while(B.length&&(D=D.parentNode))}},_buildLiveEventFn:function(D,B){var C=this;return function(F){var E=[C._name,((F.data||(F.data={})).domElem=e(this)).closest(C.buildSelector()),true],G=a.apply(null,B?E.concat([D,F]):E);G&&(B||D.apply(G,arguments))}},liveInitOnEvent:function(C,B,D){return this.liveBindTo(C,B,D,true)},liveBindTo:function(F,C,E,B){if(!E){E=C;C=F;F=h}if(!F||typeof F=="string"){F={elemName:F}}var D=this;if(F.elemName&&F.elemName.indexOf(" ")>1){e.each(F.elemName.split(" "),function(G,H){D._liveClassBind(t(D._name,H,F.modName,F.modVal),C,E,B)});return D}return D._liveClassBind(t(D._name,F.elemName,F.modName,F.modVal),C,E,B)},liveUnbindFrom:function(C,B,E){var D=this;if(C.indexOf(" ")>1){e.each(C.split(" "),function(F,G){D._liveClassUnbind(t(D._name,G),B,E)});return D}return D._liveClassUnbind(t(D._name,C),B,E)},_liveInitOnBlockInit:function(C,E,D){var B=this._name;v[C].on("init",function(F){var G=F.block[D](B);E&&e.each(G,function(){E.call(this)})});return this},liveInitOnBlockInit:function(B,C){return this._liveInitOnBlockInit(B,C,"findBlocksOn")},liveInitOnBlockInsideInit:function(B,C){return this._liveInitOnBlockInit(B,C,"findBlocksOutside")},on:function(B,F,E,D,C){return B.jquery?this._liveCtxBind(B,F,E,D,C):this.__base(B,F,E,D)},un:function(B,E,D,C){return B.jquery?this._liveCtxUnbind(B,E,D,C):this.__base(B,E,D)},liveCtxBind:function(B,F,E,D,C){return this._liveCtxBind(B,F,E,D,C)},_liveCtxBind:function(B,G,F,E,D){if(e.isFunction(F)){D=E;E=F;F=h}var I=this;if(G.indexOf(" ")>-1){e.each(G.split(" "),function(J,K){I._liveCtxBind(B,K,F,E,D)})}else{var C=I._buildCtxEventName(G),H=f[C]||(f[C]={counter:0,ctxs:{}});B.each(function(){var K=e.identify(this),J=H.ctxs[K];if(!J){J=H.ctxs[K]={};++H.counter}J[e.identify(E)+(D?e.identify(D):"")]={fn:E,data:F,ctx:D}})}return I},liveCtxUnbind:function(B,E,D,C){return this._liveCtxBind(B,E,D,C)},_liveCtxUnbind:function(B,E,D,C){var G=this,F=f[E=G.buildEventName(E)];if(F){B.each(function(){var I=e.identify(this,true),H;if(I&&(H=F.ctxs[I])){D&&delete H[e.identify(D)+(C?e.identify(C):"")];if(!D||e.isEmptyObject(H)){F.counter--;delete F.ctxs[I]}}});F.counter||delete f[E]}return G},_extractElemNameFrom:function(B){var C=B[0].className.match(this._buildElemNameRE());return C?C[1]:h},extractParams:g,_buildModClassPrefix:function(C,B){return t(this._name)+(B?j+(typeof B==="string"?B:this._extractElemNameFrom(B)):"")+o+C+o},_buildModValRE:function(C,B,D){return new RegExp("(\\s?)"+this._buildModClassPrefix(C,B)+"("+k+")(\\s|$)",D)},_buildElemNameRE:function(){return new RegExp(this._name+j+"("+k+")(?:\\s|$)")},buildSelector:function(C,D,B){return"."+t(this._name,C,D,B)},getWindowSize:function(){var B=d[0];if(typeof B.innerWidth!="undefined"){return{width:B.innerWidth,height:B.innerHeight}}var C=n();return{width:C.clientWidth,height:C.clientHeight}},buildClass:function(D,B){var C={};B?C[D]=B:C=D;return b.buildClasses(this._name,null,C)},buildElemClass:function(C,E,B){var D={};B?D[E]=B:D=E;return b.buildClasses(this._name,C,D)},buildHtml:function(F){F=F||{};var C=F.tag||"div",G=this,B=["<",C,' class="'],E={};e.each([{name:F.name,elem:F.elem,mods:F.mods,params:F.params}].concat(F.mix||[]),function(H,J){var I=J.name?i.blocks[J.name]:G;H&&B.push(" ");B.push(J.elem?I.buildElemClass(J.elem,J.mods):I.buildClass(J.mods));J.elem||(E[I.getName()]=J.params||{})});var D=!e.isEmptyObject(E);B.push(D?" i-bem":"",'"');D&&B.push(' onclick="return ',e.stringify(E).replace(/"/g,"'"),'"');B.push(">",this.buildHtmls(F.content),"</",C,">");return B.join("")},buildHtmls:function(B){if(!e.isArray(B)){return B||""}var C=this;return e.map(B,function(D){return C.buildHtml(D)}).join("")}})})(BEM,jQuery);$(function(){BEM.DOM.init()});(function(a){BEM.DOM.decl("b-dropdowna",{onSetMod:{js:function(){this._getSwitcher().on("click",this._toggle,this)},disabled:function(c,b){this._getSwitcher().setMod(c,b);b=="yes"&&this.getPopup().hide()}},_getSwitcher:function(){return this._switcher||(this._switcher=this.findBlockInside("b-"+(this.getMod(this.elem("switcher"),"type")||"pseudo-link")))},_toggle:function(){this.getPopup().toggle(this.elem("switcher"))},getPopup:function(){return this._popup||(this._popup=this.findBlockInside("b-popupa")).on("outside-click",function(c,b){this._getSwitcher().containsDomElem(a(b.domEvent.target))&&c.preventDefault()},this)},destruct:function(){var b=this._popup;b&&b.destruct.apply(b,arguments);this.__base.apply(this,arguments)}},{live:function(){this.liveInitOnEvent("switcher","leftclick",function(){})}})})(jQuery);(function(d){var c,g=[],a=d.browser;function f(){return g.length?g.shift():c?c.clone():c=b()}function e(h){g.push(h)}function b(){return d((a.safari||a.webkit)&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1?"<div/>":"<iframe"+(a.msie&&a.version<9?' frameborder="0"':"")+"/>")}BEM.DOM.decl("i-popup",{onSetMod:{visibility:{visible:function(){var h=this._getUnder(),i=h.parent();this.hasMod(h,"type","paranja")?i.is("body")||h.appendTo("body"):(i[0]!==this.domElem[0])&&h.prependTo(this.domElem);this._inBody||(this._inBody=!!this.domElem.appendTo("body"));this.trigger("show")},"":function(){var h=this._getUnder();this.hasMod(h,"type","paranja")&&h.remove();this._putUnder();this.trigger("hide")}}},_getUnder:function(){return this._under||(this._under=f().attr("class",this._underClass||(this._underClass=this.findElem("under").remove().attr("class"))))},_putUnder:function(){e(this._under);delete this._under},show:function(h){h&&this.domElem.css(h);return this.setMod("visibility","visible")},hide:function(){return this.delMod("visibility")}},{live:true})})(jQuery);BEM.HTML.decl("i-popup",{onBlock:function(a){a.mod("autoclosable","yes").js(true).wrapContent({elem:"content"}).afterContent({elem:"under",mods:a.param("underMods"),mix:a.param("underMix")}).param("zIndex")&&a.attr("style","z-index:"+(32700+a.param("zIndex")))}});(function(a){BEM.DOM.decl({name:"i-popup",modName:"autoclosable",modVal:"yes"},{onSetMod:{visibility:{visible:function(){var b=a.browser.opera?"keypress":"keydown";this.afterCurrentEvent(function(){this.bindToDoc("leftclick",function(c){this.containsDomElem(a(c.target))||this._onOutClick(c)}).bindToDoc(b,function(c){c.keyCode==27&&this.hide()})});this.__base.apply(this,arguments)},"":function(){return this.unbindFromDoc("leftclick keypress").__base.apply(this,arguments)}}},_onOutClick:function(b){var c=a.Event("outside-click");this.trigger(c,{domEvent:b});c.isDefaultPrevented()||this.hide()}})})(jQuery);(function(d){BEM.DOM.decl("b-popupa",{onSetMod:{js:function(){this._owner=null;this._isShowed=false;this._direction=this.getMod("direction")||"down"}},show:function(k){if(!this._isShowed||this._owner!==k){this._getUnder().show({left:-10000,top:-10000});this._owner=k;this.pos()}return this},hide:function(){this._isShowed&&this._getUnder().hide();return this},toggle:function(k){return this.isShowed()?this.hide():this.show(k)},pos:function(){var k=this._calcParams(this._owner);this.elem("tail").css(k.tailOffsets);this.setMod("direction",k.direction)._getUnder().show(k.offsets);return this},isShowed:function(){return this._isShowed},setDirection:function(k){if(this._direction!=k){this._direction=k;this.isShowed()&&this.pos()}},setContent:function(k,m,l){BEM.DOM.update(this.elem("content"),k,m,l);return this.isShowed()?this.pos():this},_calcDimensions:function(o){var l=this._under.domElem,u=this.__self.doc,v=!!o.jquery,s=v?o.offset():o,m=v?o.outerWidth():e,n=v?o.outerHeight():e,r=u.scrollLeft(),q=u.scrollTop(),t=this.__self.getWindowSize(),k=parseInt(this.elem("content").css("border-top-width"),10);return{ownerLeft:s.left,ownerTop:s.top,ownerRight:s.left+m,ownerBottom:s.top+n,ownerMiddle:s.left+m/2,underWidth:l.outerWidth(),underHeight:l.outerHeight(),borderWidth:isNaN(k)?0:k,windowLeft:r,windowRight:r+t.width,windowTop:q,windowBottom:q+t.height}},_calcParams:function(k){var r=this._calcDimensions(k);if(this.hasMod("adjustable","no")){return f(this._direction,r)}var l={},n=d.inArray(this._direction,a),m=n,q,o;do{q=a[n];o=l[q]=f(q,r);if(!o.factor){return o}++n==a.length&&(n=0)}while(n!==m);return l["down-right"]},destruct:function(){var k=this._under;k&&k.destruct.apply(k.hide(),arguments);this.__base.apply(this,arguments)},_getUnder:function(){var l=this;if(!l._under){var k=d(BEM.HTML.build({block:"i-popup",zIndex:this.params.zIndex,mods:{autoclosable:l.getMod("autoclosable")||"yes",fixed:l.hasMod("direction","fixed")&&"yes"},underMods:l.params.underMods,underMix:[{block:"b-popupa",elem:"under"}]}));(l._under=l.findBlockOn(k,"i-popup")).on({show:function(){l._isShowed=true;l.hasMod("adjustable","no")||l.bindToWin("resize",function(){l.isShowed()&&l.pos()});l.trigger("show")},hide:function(){l._isShowed=false;l.hasMod("adjustable","no")||l.unbindFromWin("resize");l.trigger("hide")},"outside-click":function(){l.trigger.apply(l,arguments)}},l).elem("content").append(l.domElem)}return l._under}},{live:function(){this.liveBindTo("close","leftclick",function(){this.hide()})}});var e=19,b=7,i=15,g=15,h=7,j=8,a=["up","up-right","up-left","down","down-right","down-left","right","right-up","left","left-up"];function f(o,q){var l,m,k,n;switch(o){case"down":case"up":l=c(m={left:q.ownerMiddle-q.underWidth/2,top:o=="down"?q.ownerBottom+h:q.ownerTop-q.underHeight-h},q);k={marginLeft:(q.ownerRight-q.ownerLeft)/2+q.ownerLeft-m.left-i/2,marginTop:(o=="down"?-h+q.borderWidth:-q.borderWidth)};break;case"down-right":case"down-left":case"up-right":case"up-left":n=o=="down-right"||o=="down-left"?"down":"up";l=c(m={left:(o=="down-right"||o=="up-right"?q.ownerLeft:q.ownerRight-q.underWidth),top:n=="down"?q.ownerBottom+h:q.ownerTop-q.underHeight-h},q);k={marginLeft:(q.ownerRight-q.ownerLeft)/2+q.ownerLeft-m.left-i/2,marginTop:(n=="down"?-h+q.borderWidth:-q.borderWidth)};break;case"left":case"right":l=c(m={left:(o=="left"?q.ownerLeft-q.underWidth-b:q.ownerRight+b),top:q.ownerTop-e+g/2},q);k={marginLeft:o=="left"?-q.borderWidth:-b+q.borderWidth,marginTop:e-g/2};break;case"left-up":case"right-up":l=c(m={left:(o=="left-up"?q.ownerLeft-q.underWidth-b:q.ownerRight+b),top:q.ownerTop+g/2+e-q.underHeight},q);n=o=="left-up"?"left":"right";k={marginLeft:n=="left"?-q.borderWidth:-b+q.borderWidth,marginTop:q.ownerTop-m.top+j-g/2}}return{direction:n||o,factor:l,offsets:m,tailOffsets:k}}function c(m,l){var k=0;l.windowTop>m.top&&(k+=l.windowTop-m.top);m.top+l.underHeight>l.windowBottom&&(k+=m.top+l.underHeight-l.windowBottom);l.windowLeft>m.left&&(k+=l.windowLeft-m.left);m.left+l.underWidth>l.windowRight&&(k+=m.left+l.underWidth-l.windowRight);return k}BEM.HTML.decl("b-popupa",{onBlock:function(k){var l=false;d.each(k.param("content"),function(m,n){return !(l=n.elem=="close")});k.mods({theme:"ffffff",direction:"down","has-close":l&&"yes"}).js(true).afterContent({elem:"shadow"})},onElem:{content:function(k){k.wrap({elem:"wrap-cell",tag:"td"}).wrap({tag:"tr"}).wrap({elem:"wrap",tag:"table"})},close:function(k){k.tag("i")},shadow:function(k){k.tag("i")},tail:function(k){k.tag("i").wrapContent({elem:"tail-i",tag:"i"})}}})})(jQuery);(function(c,a){var b=a.block["b-head-tabs"]=function(v){var e=c(this),g=c.decodeURIComponent?c.decodeURIComponent:function(A){var z="";try{z=decodeURIComponent(A)}catch(B){z=A}return z},y=c(".b-head-search"),x=y.find(".b-search .b-form-input input:first"),o=a.params.id,k=r(document.location.search),j={www:505,search:521,images:526}[o]||527,f={market:{cvredirect:1,clid:j}},m={news:{rpt:"nnews",grhow:"clutop"},yaca:{rpt:"rs2"},market:{cvredirect:1,clid:j},blogs:{ft:"blog"}},w=(function(){var z={};c.each(["news","yaca","market","blogs","maps","adresa","video","fotki","slovari","auto","images","music","www"],function(){z[this]=["family"]});return z})(),s=(function(){var z={};c.each(["news","yaca","market","blogs","maps","adresa","video","fotki","slovari","auto","images","music","www"],function(){z[this]=["noreask","family"]});return z})(),t=e.find(':not(strong)>a.b-head-tabs__link:not([href$="/all"])').map(function(){var A=this.host.split(".")[0],B=r(this.search).clid,z=c.param(h(A,B),true);return{node:this,clid:B,toServiceId:A,path:b.getHostToUrlMap()[A],host:this.host,searchHost:b.getHostMap()[A],noSearchParamsUrl:z?"?"+z:"",searchParams:q(A,B)}}).filter(function(){return typeof this.path!=="undefined"}),n,u=y.find(".b-search__advanced")[0];if(u){var i=r(u.search),l=u.pathname.replace(/^\/?(.*)/,"$1");i.text="";t.push({node:u,clid:i.clid,toServiceId:o,path:l,host:u.host,noSearchParamsUrl:l+"?"+c.param(i,true),searchParams:i})}(function(){var z=c.trim(x.val())||v["default"];if(n!=z){n=z;c.each(t,function(){z&&(this.searchParams[b.getSearchParamName(this.toServiceId)]=z);this.node.href=[this.node.protocol+"/",z&&this.searchHost?this.searchHost:this.host,z?this.path+"?"+c.param(this.searchParams,true):this.noSearchParamsUrl].join("/")})}setTimeout(arguments.callee,200)})();function h(z,A){var B=f[z]||{};!B.clid&&A&&(B.clid=A);c.each(w[z]||[],function(){k[this]&&(B[this]=k[this])});return B}function q(A,B){var D=[].concat(s[A]),z=A+o;(z=="imageswww"||z=="wwwimages")&&D.push("site");var C=m[A]||{};c.each(D,function(){k[this]&&(C[this]=k[this])});!C.clid&&B&&A!=="www"&&(C.clid=B);return C}function r(z){var A={};c.each(z.substr(1).split("&"),function(E){var F=this.split("="),B=F[0],D=F[1];if(B){if(A.hasOwnProperty(B)){var C=A[B];c.isArray(C)?C.push(D):A[B]=[C,D]}else{A[B]=D}}});return d(A)}function d(A){var z=["site"];c.each(A,function(B,C){if(c.inArray(B,z)>-1){A[B]=c.isArray(C)?C.map(function(D){return g(D)}):g(C)}});return A}};c.extend(b,{getHostToUrlMap:function(){var d={www:"yandsearch",market:"search.xml",maps:"",music:"#/search",video:"#search"};d.blogs=d.adresa=d.fotki=d.slovari=d.auto=d.market;d.news=d.yaca=d.images=d.www;return d},getHostMap:function(){return{}},getSearchParamName:function(d){return"text"}})})(jQuery,window.Lego);BEM.DOM.decl({name:"b-pseudo-link",modName:"isBEM",modVal:"yes"},{_onClick:function(a){a.preventDefault();this.hasMod("disabled","yes")||this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){this.liveBindTo({modName:"isBEM",modVal:"yes"},"leftclick",function(a){this._onClick(a)})}});BEM.HTML.decl("b-pseudo-link",{onBlock:function(a){var b=a.param("url");a.tag(b?"a":"span").js(true);b&&a.attr("href",b)}});(function(b,a){a.block["b-dropdown"]=function(e){var d=b(this),c,i,g,j,h=false,l=false,k=function(){c=d.find(".b-dropdown__list");i=b('<div class="b-dropdown__popup"/>');g=b('<iframe class="b-dropdown__iframe" frameborder="0" src="javascript:\'<body style=\\\'background:none;overflow:hidden\\\'>\'"/>');j=c.clone(true).addClass("b-dropdown__list_clone").hide();c.before(i);i.after(j);f();b(document).keydown(function(m){if(m.keyCode==27&&!(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)){f()}}).click(function(m){if(!b(m.target).is(".b-dropdown *")){f()}}).bind("popupsClose.lego",f);l=true},f=(function(){if(h){return}i.css("visibility","hidden").before(c).hide();j.hide();h=true});d.find(".b-dropdown__or").click(function(n){n.preventDefault();if(!l){k()}if(d.hasClass("b-dropdown_state_disabled")){d.trigger("popupDisabled.lego");return}if(h){b(document).trigger("popupsClose.lego",{source:d[0]});var o=b.Event("popupOpen.lego");d.trigger(o);if(!o.isDefaultPrevented()){j.css("display","");i.append(c).css("visibility","");if(e.direction=="up"||d.hasClass("b-dropdown_direction_up")){var m=i.height()-j.height();i.css("margin-top",-(m-(parseInt(c.css("padding-bottom"),10)+parseInt(b(this).closest(".b-dropdown__item").css("padding-bottom"),10))))}i.prepend(g).css("display","");h=false}}else{f()}})}})(jQuery,window.Lego);(function(c,a){var b=a.block["b-head-user"]=function(){var d=c(this);if(a.params.login!=""||a.params.displayName){c.getJSON(b.getApiUrl(),{locale:a.params.locale,login:"yes","current-login":a.params.login,yu:a.getCookie("yandexuid")},function(e){b.buildHtml(e,d)})}};b.buildHtml=function(i,f){if(!i||!i.services){return}var j=i.displayName&&i.displayName.social,e=c("<div/>").text(b.getUserLogin(i)).html(),d=j?'<b class="b-user b-user_social_yes b-user_provider_'+j.provider+'"><span class="b-user__provider-ico"></span>'+e+"</b>":'<b class="b-user"><b class="b-user__first-letter">'+e.substring(0,1)+"</b>"+e.substring(1)+"</b>",h=!j&&f.hasClass("b-head-user_type_com")?d:'<a class="b-pseudo-link b-pseudo-link_isBEM_yes i-bem" onclick="return {\'b-pseudo-link\':{name:\'b-pseudo-link\'}}" href="'+(j?a.params["social-host"]:"http://i.yandex.ru")+'">'+d+"</a>",g='<div class="b-dropdowna b-dropdowna_isBEM_yes i-bem" onclick="return {\'b-dropdowna\':{name:\'b-dropdowna\'}}"><span class="b-dropdowna__switcher">'+h+'</span><div class="i-popup i-popup_autoclosable_yes i-popup_isBEM_yes i-bem" onclick="return {\'i-popup\':{name:\'i-popup\'}}"><div class="i-popup__content"><div class="i-popup__under b-popupa__under"></div><div class="b-popupa b-popupa_theme_ffffff b-popupa_direction_down b-popupa_isBEM_yes i-bem b-dropdowna__popup b-lang-switcher__popup" onclick="return {\'b-popupa\':{name:\'b-popupa\'}}"><i class="b-popupa__shadow"></i><i class="b-popupa__tail"><i class="b-popupa__tail-i"></i></i><table cellpadding="0" cellspasing="0" class="b-popupa__wrap"><tr><td class="b-popupa__wrap-cell"><div class="b-popupa__content"><div class="b-menu b-menu_layout_vert b-menu_preset_vmenu"><ul class="b-menu_layout_vert__layout">';j&&f.addClass("b-head-user_social_yes");c.each(i.services,function(){g+='<li class="b-menu__layout-cell b-menu_layout_vert__layout-cell"><div class="b-menu__item">';if(a.params.id==this.id&&a.params.index){g+="<strong>"+this.title+"</strong>"}else{g+='<a class="b-link b-head-user__link" href="'+this.url+'" onmousedown="Lego.ch(\''+a.params.id+".login.myservices."+this.id+"',this)\">"+this.title+"</a>"}g+="</div></li>"});if(i.services.length){g+='<li class="b-menu_layout_vert__layout-separator"><i class="b-menu__separator"></i></li>'}g+=b.getUserItems(i,f);g+="</ul></div></div></td></tr></table></div></div></div></div>";f.find(".b-user").replaceWith(g);BEM.DOM.init(f)};b.getApiUrl=function(){return a.params["pass-host"]+"/services?callback=?"};b.getUserItems=function(f){var e=f.displayName&&f.displayName.social?[{name:a.message("b-head-userinfo.user:profile","Мой профиль"),url:a.params["social-host"]}]:[{name:a.message("b-head-userinfo.user:passport","Паспорт"),url:a.params["passport-host"]},{name:a.message("b-head-userinfo.user:change-password","Сменить пароль"),url:a.params["passport-host"]+"/passport?mode=changepass&&amp;retpath="+encodeURIComponent(a.params.retpath)+"/"}];var d="";c.each(e,function(h,g){d+='<li class="b-menu__layout-cell b-menu_layout_vert__layout-cell'+(h==e.length-1?" b-menu_layout_vert__layout-cell_last":"")+'"><div class="b-menu__item"><a class="b-link b-head-user__link" href="'+g.url+'">'+g.name+"</a></div></li>"});return d};b.getUserLogin=function(d){return a.params.displayName&&a.params.displayName.social&&a.params.displayName.name||d.displayName&&d.displayName.name||a.params.login||d.login}})(jQuery,window.Lego);(function(a){window.Lego||(window.Lego={block:{}});Lego.block["i-social"]=function(d){function e(j){var i=this,g={};this.url=j.startUrl+"?";delete j.startUrl;this.popupName=j.popupName;this.yaWindow=null;this.wTimer=null;this.paramsDefault=j;function l(){var m;if(!i.yaWindow){return true}try{m=i.yaWindow.closed}catch(n){m=true}return m}function k(){if(l()){i.wTimer=clearInterval(i.wTimer);i.onFailure({status:"error"})}}function f(v){var y=i.popupName,q=500,z=280,s=Math.round(((window.opera?window.innerWidth:screen.availWidth)-q)/2),w=Math.round(((window.opera?window.innerHeight:screen.availHeight)-z)/2),n="scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0, left="+s+", top="+w+", width="+q+", height="+z;var r={};for(var u in i.paramsDefault){r[u]=i.paramsDefault[u]}for(var u in v){r[u]=v[u]}var x=["ddom="+(r.ddom||(location.hostname==document.domain?"":document.domain))];r.retpath+=(r.retpath.match("#")?"&":"#")+x.join("&");var m=i.url;var o=[];for(var t in r){o.push(encodeURIComponent(t)+"="+encodeURIComponent(r[t]))}m+=o.join("&");i.yaWindow=window.open(m,y,n);i.yaWindow.focus();if(i.yaWindow){i.wTimer=setInterval(k,500)}}function h(){this.handlers={onSuccess:null,onFailure:null};i.wTimer=clearInterval(i.wTimer);l()||i.yaWindow.close();i.yaWindow=false}this.start=function(n,m,o){h();i.handlers={onSuccess:n,onFailure:m};f(o)};this.onSuccess=function(n){h();var m=i.handlers.onSuccess;m&&m()};this.onFailure=function(n){h();var m=i.handlers.onFailure;m&&m()}}arguments.callee.Broker=e;var c=arguments.callee.defaultParams={startUrl:Lego.params["social-startUrl"]||Lego.params["social-host"]+"/broker/start",retpath:Lego.params["social-retpath"]||location.protocol+"//"+location.host+Lego.params["lego-path"]+"/blocks/i-social/closer/i-social__closer.html",consumer:Lego.params.id||"morda",popupName:"social_"+(Lego.params.id||"morda"),application:"",action_if_anonymous:"authorize",result_location:"fragment"};var b=arguments.callee.broker=new e(a.extend(c,d));return b}})(jQuery);(function(b,a){a.block["b-domik"]=function(A){var d=this,u=d.find(".b-domik__lock"),w=d.find(".b-domik__social"),l=arguments.callee,s=false,o=b('<input type="hidden" name="timestamp"/>'),k=false,y=this.attr("class").match(/\bb-domik_type_(\w+)\b/)[1];if(w.length&&a.params["social-host"]){if(a.params["social-providers"]){B(a.params["social-providers"])}else{b.getJSON(a.params["social-host"]+"/providers.jsonp?callback=?",function(F){B(F)})}var E=new a.block["i-social"];b(".b-domik__social-link").live("click",function(F){j();b(".b-domik__social-popup").each(function(){b(this).bem("b-popupa").hide()});E.start(function(){if(!a.params.retpath||top.location.href==a.params.retpath){top.location.reload()}else{top.location.href=a.params.retpath}},function(){w.removeClass("b-domik__social_loading_yes").css("height","")},{provider:this.onclick()["b-domik"].provider});F.preventDefault()})}function B(G){if(!G.length){w.remove();return}w.html(n(G));var H=w.find(".b-dropdowna");BEM.DOM.init(H);var I=H.bem("b-dropdowna").getPopup();function F(){I.pos()}I.on("show",function(){b(window).scroll(F)}).on("hide",function(){b(window).unbind("scroll",F)})}function n(H){var I=[{block:"b-domik",elem:"social-title",content:a.message("b-domik:enter-with","Войти при помощи")}];H=b.grep(H,function(J){return J.enabled});var G=b.grep(H,function(J){return J.primary});G=b.map(G,function(J){return{block:"b-domik",tag:"a",elem:"social-link",content:{elem:"social-icon",mods:{provider:J.code},tag:"i"},js:{provider:J.code},attrs:{tabIndex:103}}});[].push.apply(I,G);function F(M){var L=b.map(M,function(O){return{block:"b-domik",tag:"a",elem:"social-link",mods:{},attrs:{tabIndex:103},js:{provider:O.code},content:[{tag:"i",elem:"social-icon",mods:{provider:O.code}},O.display_name]}});L.length%2&&(L[L.length]="");var K=[],N;for(var J=0;J<L.length;J++){J%2||K.push(N={tag:"tr",content:[]});N.content.push({tag:"td",elem:"provider",content:L[J]})}return K}I.push({tag:"div",block:"b-dropdowna",js:true,content:[{elem:"switcher",tag:"span",content:{tag:"a",block:"b-pseudo-link",mods:{isBEM:"yes"},js:true,attrs:{href:"http://passport.yandex.ru/",tabIndex:103}}},{block:"b-popupa",js:true,tag:"div",mix:[{block:"b-dropdowna",elem:"popup"},{block:"b-domik",elem:"social-popup",mods:{type:y}}],content:[{elem:"tail",tag:"i"},{elem:"content",content:[{elem:"providers",tag:"table",content:F(H)}]}]}]});I.push({block:"b-spin",mods:{theme:y=="bigform"?"blue-50":"blue-16"}});return BEM.HTML.build(I)}function j(){w.css("height",w.height()).addClass("b-domik__social_loading_yes")}l.isHTTPSSupported=false;d.append(o).submit(function(){if(s){return false}o.val(+new Date);a.block["b-domik"].isHTTPSSupported&&d.attr("action",d.attr("action").replace(/^http\:/,"https:"))});var x=d.find("input[name=login], input[name=passwd]"),t=d.find("input[type=submit]");x.change(function(){s=false;var F;x.each(function(){var I=b(this),H=b.trim(I.val());F=I.attr("name")=="login"&&H.indexOf("@")>-1?false:/[а-яА-Я]/.test(H);if(!H||F){return !(s=true)}});t.attr("disabled",s);var G=A&&A.err_msg?A.err_msg:"смените раскладку";F?i(a.message("b-domik:error",G)):q()});x.change();var h;function i(F){!h&&(h=b('<div class="b-domik__error"/>').insertAfter(d.find(".b-domik__password")));h.text(F).show()}function q(){h&&h.hide()}function D(){var F=a.params["lego-static-host"];if(F){if(F.indexOf("https:")==0){return F}if(F.indexOf("http:")==0){return"https"+F.substr(4)}if(F.indexOf("//")==0){return"https:"+F}else{return"https://"+location.host+F}}else{return"https://"+location.host}}l.enableHTTPS=function(){l.isHTTPSSupported=true;u.addClass("b-domik__lock_visibility_visible")};function c(){if(k){return}k=true;b.ajax({url:D()+"/blocks/b-domik/check-https.js",cache:true,dataType:"script"})}c();l.checkForHTTPS=c;var z=l.getLockBaloonContent||function(){return[a.message("b-domik.lock-balloon:content","Логин и пароль будут передаваться в&nbsp;"),{block:"b-link",tag:"a",attrs:{href:a.message("b-domik.lock-balloon:linkHref","http://help.yandex.ru/mail/?id=1113446")},content:a.message("b-domik.lock-balloon:linkContent","безопасном режиме")}]},e=b(BEM.HTML.build({block:"b-popupa",mods:{direction:"right",theme:"feffd6"},mix:[{block:"b-domik",elem:"lock-balloon"}],content:[{elem:"tail",tag:"i"},{elem:"content",content:z()}]}));d.append(e);var m=e.bem("b-popupa"),g=300,r;function f(){r=setTimeout(function(){m.hide()},g)}var C;function v(){r&&clearTimeout(r);r=null;m.show(u);if(!C){C=true;e.hover(v,f)}}u.hover(v,f)}})(jQuery,window.Lego);(function(b,a){a.block["b-hint-input"]=function(){var i=b(this),e=b("#"+i.attr("for")),g=function(){i.hide()},d=function(){i.show()},c=function(){h||e.val()?g():d()},h=false;e.bind("focus blur",function(j){h=j.type=="focus";c()}).bind("change mouseover",c);i.click(function(){e.focus()});e.change();var f=e.val();(function(){if(e.val()!=f){b(e).trigger("change");f=e.val()}setTimeout(arguments.callee,200)})()}})(jQuery,window.Lego);(function(b,a){a.block["b-domik_type_popup"]=function(h){var e=b(this),d;b(".b-head-userinfo__entry .b-pseudo-link").click(function(i){i.preventDefault();setTimeout(function(){c()},0)});function c(j){if(!d){g()}if(j){a.params.retpath=j}var i="&from="+a.params["passport-msg"]+"&retpath="+encodeURIComponent(a.params.retpath);e.attr("action",a.params["passport-host"]+"/passport?mode=auth"+i);d.find(".b-domik__register .b-domik__link").attr("href",a.params["passport-host"]+"/passport?mode="+(h.regMode||"register")+i);b(document).bind("keyup.b-domik",function(k){if(k.keyCode==27){f()}}).bind("click.b-domik",function(m){var l=b(m.target),k=l.parents().andSelf();if(l.is("input[type=button]")||k.index(d)==-1&&!k.is(".b-popupa")){f()}});!d.hasClass("b-domik_position_popup-50-50")&&window.scrollTo(0,0);d.show().find("input[name=login]").focus();b(document).trigger("show.b-domik_type_popup")}function f(){b(document).unbind(".b-domik");d.hide()}function g(){d=b('<form class="'+e.attr("class").replace("g-hidden","")+'" method="POST"><i class="b-domik__roof"></i><table class="b-domik__shadow"><tr><td class="b-domik__shadow__lt">&nbsp;</td><td class="b-domik__shadow__t"></td><td class="b-domik__shadow__rt">&nbsp;</td></tr><tr><td class="b-domik__shadow__l">&nbsp;</td><td class="b-domik__shadow__m"><div class="b-domik__form"><div class="b-domik__title">'+(h.title||a.message("b-domik:title","Вход"))+'</div><div class="b-domik__username"><label for="b-domik_popup-username" class="b-hint-input g-js" onclick="return {name:\'b-hint-input\'}">'+a.message("b-domik:login","логин")+'</label><div class="b-input"><input class="b-input__text" id="b-domik_popup-username" name="login" value="'+e.find("input[name=login]").val()+'" tabindex="11"/></div></div><div class="b-domik__password"><label for="b-domik_popup-password" class="b-hint-input g-js" onclick="return {name:\'b-hint-input\'}">'+a.message("b-domik:password","пароль")+'</label><div class="b-domik__lock"></div><div class="b-input"><input class="b-input__text" id="b-domik_popup-password" name="passwd" value="'+e.find("input[name=passwd]").val()+'" type="password" tabindex="11"/></div></div><div class="b-domik__permanent"><input class="b-domik__check" id="b-domik_popup-permanent" name="twoweeks" type="checkbox" value="yes" tabindex="11"/><label for="b-domik_popup-permanent" class="b-domik__permanent-label">'+a.message("b-domik:permanent","запомнить меня")+'</label> <span class="b-domik__help">(<a class="b-domik__link" href="http://help.yandex.ru/passport/?id=922493" tabindex="12">'+a.message("b-domik:help","что&nbsp;это")+'</a>)</span></div><div class="b-domik__button"><input class="b-domik__submit" type="submit" value="'+a.message("b-domik:logon","Войти")+'" tabindex="11"/><input class="b-domik__submit" type="button" value="'+a.message("b-domik:cancel","Отмена")+'" tabindex="11"/></div><div class="b-domik__social"></div><div class="b-domik__register"><a class="b-domik__link" href="" tabindex="11">'+(h.register||a.message("b-domik:register","Зарегистрироваться"))+'</a></div><div class="b-domik__remember"><a class="b-domik__remind" href="'+a.params["passport-host"]+'/passport?mode=restore" tabindex="11">'+a.message("b-domik:remember","Напомнить пароль")+'</a></div></div></td><td class="b-domik__shadow__r">&nbsp;</td></tr><tr><td class="b-domik__shadow__lb">&nbsp;</td><td class="b-domik__shadow__b"></td><td class="b-domik__shadow__rb">&nbsp;</td></tr></table><iframe class="b-popup-under" frameborder="0"></iframe></form>').submit(function(i){i.preventDefault();e.find("input[name=login]").val(d.find("input[name=login]").change().val()).end().find("input[name=passwd]").val(d.find("input[name=passwd]").change().val()).end().find("input[name=twoweeks]").attr("checked",d.find("input[name=twoweeks]").attr("checked")).end().append('<input type="hidden" name="timestamp" value="'+ +new Date+'"/>').attr("action",a.block["b-domik"].isHTTPSSupported?e.attr("action").replace(/^http:/,"https:"):e.attr("action")).submit()});if(a.block["b-domik"]){a.block["b-domik"].call(d)}b("body").append(d);a.blockInit(d)}arguments.callee.login=function(){var i=arguments;setTimeout(function(){c.apply(this,i)},0)}}})(jQuery,window.Lego);(function(b,a){a.block["b-search__input"]=function(e){var f=b(this);var c=b.extend({focus:false,shortcut:false},e);if(c.focus||f.data("lego:focused")){if(!f.data("lego:focused")){var d=document.activeElement;(d&&"input textarea".indexOf(d.tagName.toLowerCase())>-1)||setTimeout(function(){f.focus();if(f[0].createTextRange){var h=f[0].createTextRange(),g=f.val().length;h.collapse();h.moveStart("character",g);h.moveEnd("character",g);h.select()}f.data("lego:focused",true)},0)}if(!!window.history.length&&!b.trim(f.val())){f.bind("keydown",function(g){if(g.keyCode==8){if(!b.trim(f.val())){return window.history.back()}}f.unbind("keydown",arguments.callee)})}f.blur(function(){f.data("lego:focused",false)}).focus(function(){f.data("lego:focused",true)})}if(c.shortcut){b(document).keydown(function(g){if(!g.ctrlKey||b(g.target).is("input, textarea")){return}if(g.keyCode==38){f.focus().select()}})}}})(jQuery,window.Lego);(function(){var a;BEM.DOM.decl("b-form-input",{onSetMod:{js:function(){var d=this,b=d.elem("input"),c=d.__self.doc[0].activeElement;d._val=b.val();d._focused=c===b[0];if(!a){a=[];(function(){var e,f=0;while(e=a[f++]){e.val(e.elem("input").val())}setTimeout(arguments.callee,50)})()}d._focused&&d.setMod("focused","yes");if(d.params.autoFocus&&!d._focused&&!(c&&"input textarea".indexOf(c.tagName.toLowerCase())>-1)){d.setMod("focused","yes")._focused=true}d._instanceIndex=a.push(d.bindTo(b,{focus:d._onFocus,blur:d._onBlur}))-1;d.params.shortcut&&this.bindToDoc("keydown",function(f){if(f.ctrlKey&&f.keyCode==38&&!$(f.target).is("input, textarea")){this.setMod("focused","yes")}})},disabled:function(c,b){this.elem("input").attr("disabled",b=="yes")},focused:function(c,b){if(this.hasMod("disabled","yes")){return false}var d=b=="yes";d?this._focused||this._focus():this._focused&&this._blur();this.afterCurrentEvent(function(){this.trigger(d?"focus":"blur")})}},onElemSetMod:{message:{visibility:function(e,f,b){var g=this,d=g.getMod(e,"type");if(d){var c=true;b||g.elem("message","type",d).each(function(){this!=e[0]&&g.hasMod($(this),"visibility","visible")&&(c=false)});c&&g.toggleMod("message-"+d,"yes","",b==="visible")}d=="error"&&e.attr("aria-hidden",b!=="visible")}}},val:function(d,c){if(typeof d=="undefined"){return this._val}if(this._val!=d){var b=this.elem("input");b.val()!=d&&b.val(d);this._val=d;this.trigger("change",c)}return this},_onFocus:function(){this._focused=true;return this.setMod("focused","yes")},_onBlur:function(){this._focused=false;return this.delMod("focused")},_focus:function(){var c=this.elem("input")[0];if(c.createTextRange&&!c.selectionStart){var b=c.createTextRange();b.move("character",c.value.length);b.select()}else{c.focus()}},_blur:function(){this.elem("input").blur()},destruct:function(){this.__base.apply(this,arguments);this.params.shortcut&&this.unbindFromDoc("keydown");a.splice(this._instanceIndex,1);var c=this._instanceIndex,b;while(b=a[c++]){--b._instanceIndex}}})})();BEM.DOM.decl("b-form-input",{onSetMod:{js:function(){this.__base.apply(this,arguments);(this._hasHint=!!this.elem("hint")[0])&&this.on("change",this._updateHint)._updateHint()},focused:function(){this.__base.apply(this,arguments);this._hasHint&&this._updateHint()}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!(this._focused||this.val()))}});(function(b,a){a.block["b-search__sample"]=function(g){var f=b(this),e=f.closest("form"),d=e.find("input[name='"+(g["for"]||"text")+"']"),c;f.find(".b-pseudo-link").click(function(h){d.data("b-suggest",false).focus().attr("value",g.text||b(h.target).text());c=e.find("input[name='nl']");if(g.nl&&!c.length){c=b('<input type="hidden" name="nl" value="1"/>').insertAfter(d)}b(document).trigger("popupsClose.lego");setTimeout(function(){d.removeData("b-suggest")},0);h.preventDefault()})}})(jQuery,window.Lego);BEM.DOM.decl("b-form-button",{onSetMod:{js:function(){(this._href=this.domElem.attr("href"))&&this.isDisabled()&&this.domElem.removeAttr("href")},focused:{yes:function(){if(this.isDisabled()){return false}this.bindTo("keydown",this._onKeyDown).elem("input").focus()},"":function(){this.unbindFrom("keydown").elem("input").blur()}},disabled:function(c,a){var b=a=="yes";this.domElem.attr("aria-disabled",b);this.elem("input").attr("disabled",b);this._href&&(b?this.domElem.removeAttr("href"):this.domElem.attr("href",this._href));b&&this.domElem.keyup()},pressed:function(b,a){this.isDisabled()||this.trigger(a=="yes"?"press":"release")},"*":function(b,a){if(this.isDisabled()&&"hovered pressed".indexOf(b)>-1){return false}"hovered focused".indexOf(b)>-1&&a==""&&this.delMod("pressed")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(a){if(typeof a=="undefined"){return this._href}else{this._href=a;this.isDisabled()||this.domElem.attr("href",a);return this}},_onKeyDown:function(a){if(a.keyCode==13&&!this._keyDowned){this._keyDowned=true;this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup");delete this._keyDowned})}},_onClick:function(a){this.isDisabled()?a.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){var a={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}};this.liveBindTo("leftclick",function(b){this._onClick(b)}).liveBindTo("mouseover mouseout mouseup focusin focusout",function(c){var b=a[c.type];this.setMod(b.name,b.val||"")}).liveBindTo("mousedown",function(c){var b=a[c.type];c.which==1&&this.setMod(b.name,b.val||"")})}});(function(b,a){a.block["b-vmenu"]=function(){b(">.item>.switcher>.b-pseudo-link , >.item>.switcher>.switcher-icon",this).click(function(){var c=b(this).parents(".switcher:first");c.toggleClass("switcher-on");c.find("img").attr("alt",c.hasClass("switcher-on")?"-":"+");b(".b-vmenu:first",b(this).parents(".item:first")).toggleClass("g-hidden")})}})(jQuery,window.Lego);BEM.DOM.decl("b-menu",{onElemSetMod:{trigger:{state:function(b,c,a){this.toggleMod(this.findElem(b.closest(this.buildSelector("layout-cell")),"item-content").eq(0),"visibility","visible",a=="opened").trigger("trigger",{domElem:b,state:a})}},item:{state:{current:function(b){var a=this.elem("item","state","current"),c=this;this.findElem(b.parents(this.buildSelector("layout-cell")),"trigger").each(function(){c.setMod($(this),"state","opened")});this.delMod(a,"state").trigger("current",{prev:a,current:b})}}}},onTriggerClick:function(a){a.preventDefault();this.toggleMod(a.data.domElem,"state","opened")},onItemSelectorClick:function(b){var a=this._getItemByEvent(b);this.hasMod(a,"state","disabled")||this.setMod(a,"state","current")},_getItemByEvent:function(a){return a.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("trigger","leftclick",function(a){this.onTriggerClick(a)}).liveBindTo("item-selector","leftclick",function(a){this.onItemSelectorClick(a)})}});
/*jeanny-ignore*/
(function(b,a){a.block["b-keyboard-loader"]=function(g){var i=b(document.body),e=b(window),j=this,l;j.click(function(t){t.preventDefault();var s=b(this),r=(this.className.match(/b-keyboard-loader_lang_(\w+)/)||["",""])[1];switch(r){case"uk":r="ua";break;case"kk":r="kz";break;case"be":r="by";break}var v=s.hasClass("b-keyboard-loader_dropdowna_yes");if(!i.find(".b-keyboard")[0]){var u=a.params["lego-static-host"]+(a.params["lego-static-host"]=="/"?"":"/")+"blocks/",q=(v?[u+"b-keyboard/_keyboard.js"]:[u+"b-keyboard-popup/_b-keyboard-popup.js",u+"b-keyboard/_b-keyboard.js",u+"b-dropdown/_b-dropdown.js"]),o=b.browser.msie&&((!document.documentMode)||(document.documentMode<9))?".ie":"",n=[u+"b-keyboard/_keyboard"+o+".css"];s.append('<i class="b-keyboard-loader__progress"/>');b.xLazyLoader({name:"b-keyboard",js:q,css:n,success:function(){a.block["b-keyboard-popup"]({lang:r,isDropdowna:v});i.append('<div class="b-keyboard'+(v?" b-keyboard-loader_dropdowna_yes":"")+" g-js\" onclick=\"return {name: 'b-keyboard', lang: '"+r+"'};\"></div>");a.blockInit(i,".b-keyboard");s.find(".b-keyboard-loader__progress").remove();e.trigger("keyboardOpened.lego",{afterLoad:true})}})}else{h()}});function h(n){var q=n?"addClass":"toggleClass",o=i.find(".b-keyboard-popup");if(o.length){i.find(".b-keyboard-popup__gap")[q]("g-hidden");if(i.find(".b-keyboard-popup")[q]("g-hidden").hasClass("g-hidden")){e.trigger("keyboardClosed");b(document).trigger("popupsClose.lego")}else{e.trigger("keyboardOpened.lego")}o.data("isHidden",false)}}e.bind("keyboardOpen.lego",function(){j.click()}).bind("keyboardClose.lego",h);g["for"]&&e.bind("keyboardOpened.lego",function(o,n){!(n&&n.afterLoad&&g.autoLoad)&&b(g["for"]).focus()});e.bind("keyboardLangChanged.lego keyboardSetLang.lego",function(o,q){var n=j.find(".b-keyboard-loader__flag");if(n[0]){if(q==="tt"){q="ru"}n.attr("src",n.attr("src").replace(/[a-z]+\.png$/,q+".png"))}});g.storeState=g.storeState!==false;if(g.storeState){e.bind("keyboardOpened.lego",function(){k("keyboard_state","open");var n=c("keyboard_lang");if(n){b(window).trigger("keyboardSetLang.lego",n)}}).bind("keyboardClosed.lego",function(){k("keyboard_state","close")}).bind("keyboardLangChanged.lego",function(n,o){k("keyboard_lang",o)})}(g.autoLoad=g.autoLoad||(g.storeState&&c("keyboard_state")=="open"))&&j.click();var m;function f(){if(m){return}a.cp(0,70873,a.params.id+"."+(g.autoLoad?"auto":"manual"));m=true}e.bind("keyboardOpened.lego",function(){f()});function c(n){return d()[n]}function d(){var n={};b.each(window.name.split("&"),function(){if(this.toString()){var o=this.split("=");n[o[0]]=o[1]}});return n}function k(n,q){var o=d(),r=[];o[n]=q;b.each(o,function(s,t){r.push(s+"="+t)});window.name=r.join("&")}}})(jQuery,window.Lego);(function(b){b.xLazyLoader=function(e,d){if(typeof e=="object"){d=e;e="init"}new c()[e](d)};b.xLazyLoader.defaults={js:[],css:[],img:[],name:null,timeout:20000,success:function(){},error:function(){},complete:function(){},each:function(){}};var a=document.getElementsByTagName("head")[0];function c(){var m=this,o,i=[],k=[],j,d,f,e=[];this.init=function(q){if(!q){return}o=b.extend({},b.xLazyLoader.defaults,q);f={js:o.js,css:o.css,img:o.img};b.each(f,function(r,s){if(typeof s=="string"){s=s.split(",")}e=e.concat(s)});if(!e.length){h("error");return}if(o.timeout){j=setTimeout(function(){var r=i.concat(k);b.each(e,function(t,s){b.inArray(s,r)==-1&&k.push(s)});h("error")},o.timeout)}b.each(f,function(r,s){if(b.isArray(s)){b.each(s,function(u,t){l(r,t)})}else{if(typeof s=="string"){l(r,s)}}})};this.js=function(v,w,r){var u=b('script[src*="'+v+'"]');if(u.length){u.attr("pending")?u.bind("scriptload",w):w();return}var t=document.createElement("script");t.setAttribute("type","text/javascript");t.setAttribute("charset","utf-8");t.setAttribute("src",v);t.setAttribute("pending",1);t.onerror=n;b(t).bind("scriptload",function(){b(this).removeAttr("pending");w();setTimeout(function(){b(t).unbind("scriptload")},10)});var q=false;t.onload=t.onreadystatechange=function(){if(!q&&(!this.readyState||/loaded|complete/.test(this.readyState))){q=true;t.onload=t.onreadystatechange=null;b(t).trigger("scriptload")}};a.appendChild(t)};this.css=function(q,t,r){if(b('link[href*="'+q+'"]').length){t();return}var s=document.createElement("link");s.setAttribute("type","text/css");s.setAttribute("rel","stylesheet");s.setAttribute("href",q);if(b.browser.msie){s.onreadystatechange=function(){/loaded|complete/.test(s.readyState)&&t()}}else{if(b.browser.opera){s.onload=t}else{(function(){if(s&&s.sheet){t()}else{d=setTimeout(arguments.callee,20)}})()}}a.appendChild(s)};this.img=function(r,s){var q=new Image();q.onload=s;q.onerror=n;q.src=r};this.disable=function(q){b("#lazy-loaded-"+q,a).attr("disabled","disabled")};this.enable=function(q){b("#lazy-loaded-"+q,a).removeAttr("disabled")};this.destroy=function(q){b("#lazy-loaded-"+q,a).remove()};function l(r,q){m[r](q,function(s){s=="error"?k.push(q):i.push(q)&&o.each(q);g()},"lazy-loaded-"+(o.name?o.name:new Date().getTime()))}function h(q){o.complete(q,i,k);o[q](q=="error"?k:i);clearTimeout(j);clearTimeout(d)}function g(){if(i.length==e.length){h("success")}else{if(i.length+k.length==e.length){h("error")}}}function n(){k.push(this.src);g()}}})(jQuery);
/*jeanny-ignore*/
(function(b,a){a.block["b-feedback"]=function(){var h=this;var g=b(".b-feedback__comment");g.val(g.html());var e=g[0].value;var j=0;var f=function(){b(".b-rating-stars__link",h).unbind("click",i).unbind("mouseover",d);b(".b-rating-stars",h).unbind("mouseout",c)};var i=function(){if(this.id=="r1"||this.id=="r2"){b(".b-feedback__form").toggleClass("g-hidden");f()}else{b(".b-feedback").addClass("b-feedback_done");f();b("#feedback").submit()}};var d=function(){j=this.id.substr(1);this.parentNode.className+=" b-rating-stars-"+j};var c=function(){this.className="b-rating-stars"};b(".b-rating-stars__link",this).click(i).mouseover(d);b(".b-rating-stars",this).mouseout(c);b(".b-feedback__comment").focus(function(){if(!this.isChanged){this.value="";b(".b-feedback__comment").removeClass("b-feedback__comment_blur")}}).blur(function(){if(this.value==""){this.isChanged=false;this.value=e;b(".b-feedback__comment").addClass("b-feedback__comment_blur")}else{this.isChanged=true}});b("#feedback").submit(function(){var k=g.val();if(g[0].isChanged||(j-0)>2){b("input[name=mark]",this).val(j);b.post("/blocks/b-feedback/send.xml",b(this).serialize(),function(m){if((j-0)<=2){var l=m.getElementsByTagName("send-form-ok");if(l.length>0){h.addClass("b-feedback_send");g.get(0).value=""}}})}return false})}})(jQuery,window.Lego);(function($,Lego){Lego.block["b-sms"]=function(){$(document).ready(function(){$(".b-sms form").submit(function(){if($.trim($(".b-sms__query").val())){$.ajax({url:"../blocks/b-sms/b-sms.xml",data:$(this).serialize(),dataType:"html",success:function(data){data=eval(data);var resultNode=$(".h-sms__results");resultNode.empty();if(!data||data.length==0){var noResult=$(".b-sms__results_type_no").clone();resultNode.append(noResult);noResult.show()}else{var resultTemplate=$(".b-sms__results_type_yes").clone();var dataHolder=$(".b-sms__results__list",resultTemplate);var dataTemplate=$(".b-sms__results__item",dataHolder);for(var i=0;i<data.length;i++){var node=dataTemplate.clone().appendTo(dataHolder);node.find(".b-sms__oper").html(data[i].opName);node.find(".b-sms__cost").html(data[i].cost)}dataHolder.children().eq(0).hide();resultNode.append(resultTemplate);resultTemplate.show()}},error:function(xhr,status){alert("Uuupsss!!!!")},cache:false})}else{$(".h-sms__results").empty();var noNumber=$(".b-sms__results_type_nonum").clone();$(".h-sms__results").append(noNumber);noNumber.show()}return false})})}})(jQuery,window.Lego);(function(b,a){a.block["b-searchform"]=function(){b(".b-searchform .form").submit(function(){if(!b.trim(b(".query",this).val())){b(".b-searchform .message").show();return false}})}})(jQuery,window.Lego);(function(b,a){a.block["b-movie-popup"]=function(){var f=b(".b-movie-popup");var e="828",c="478";b(".b-video-promo__preview").click(d);b(".b-video-promo__text .b-pseudo-link").click(d);b(".b-movie-popup__close").click(g);function d(){var i,j;f.css({top:"-5000px",left:"-5000px"});f.removeClass("g-hidden");function h(){i=(b(window).width()/2)-(e/2);if(b.browser.msie){j=(b(window).height()/2)-(c/2)+b(document).scrollTop()}else{j=(b(window).height()/2)-(c/2);f.css({position:"fixed"})}return{x:i,y:j}}p=h();f.css({top:p.y,left:p.x});if(b.browser.msie){b(window).bind("scroll.popup",function(){p=h();f.css({top:p.y,left:p.x})})}b(window).bind("resize.popup",function(){p=h();f.css({top:p.y,left:p.x})})}function g(h){h.preventDefault();f.css({top:"-5000px",left:"-5000px"});f.addClass("g-hidden");b(window).unbind(".popup")}}})(jQuery,window.Lego);